/**
 * ParamQuery Pro
 * 
 * Copyright (c) 2012-2016 Paramvir Dhindsa (http://paramquery.com)
 * Released under Evaluation license
 * http://paramquery.com/pro/license/evaluate
 * 
 */
(function(l){var p=l.ui.autocomplete.prototype,f=p._renderMenu,c=p._renderItem;p._renderMenu=function(a,b){f.call(this,a,b);var e=this.options.selectItem;if(e&&e.on){var e=e.cls,e=void 0===e?"ui-state-highlight":e,n=this.element.val();n&&e&&l("a",a).filter(function(){return l(this).text()===n}).addClass(e)}};p._renderItem=function(a,b){var e=c.call(this,a,b),n=this.options.highlightText;if(n&&n.on){var k=this.element.val();if(k){var k=new RegExp("("+k+")","i"),h=b.label;if(k.test(h)){var q=n.style,
n=n.cls,h=h.replace(k,"<span style='"+(void 0===q?"font-weight:bold;":q)+"' class='"+(void 0===n?"":n)+"'>$1</span>");e.find("a").html(h)}}}return e};var p=l.paramquery=l.paramquery||{},a=function(a,b,e,n){b=b.slice();for(var k=[],h=0,c=b.length;h<c;h++){var g=b[h],m=g.cb,C=g.one;if(C){if(g._oncerun)continue;g._oncerun=!0}!1===m.call(a,e,n)&&(e.preventDefault(),e.stopPropagation());C&&k.push(h);if(e.isImmediatePropagationStopped())break}if(k.length)for(h=k.length-1;0<=h;h--)b.splice(k[h],1)};p._trigger=
function(d,b,e){var n,k,h=this.listeners,c=h[d],g=this.options,m=g.allEvents,C=g.bubble,s=this.element,r=g[d];e=e||{};b=l.Event(b);b.type=this.widgetName+":"+d;b.target=s[0];if(k=b.originalEvent)for(n in k)n in b||(b[n]=k[n]);m&&"function"==typeof m&&m.call(this,b,e);if(c&&c.length&&(a(this,c,b,e),b.isImmediatePropagationStopped())||g.trigger&&(s[C?"trigger":"triggerHandler"](b,e),b.isImmediatePropagationStopped()))return!b.isDefaultPrevented();r&&!1===r.call(this,b,e)&&(b.preventDefault(),b.stopPropagation());
(c=h[d+"Done"])&&c.length&&a(this,c,b,e);return!b.isDefaultPrevented()};p.on=function(){var a=arguments;if("boolean"==typeof a[0])var b=a[0],e=a[1],n=a[2],a=a[3];else e=a[0],n=a[1],a=a[2];for(var e=e.split(" "),k=0;k<e.length;k++){var h=e[k];if(h){var c=n,g=a,m=b,C=this.listeners[h];C||(C=this.listeners[h]=[]);C[m?"unshift":"push"]({cb:c,one:g})}}return this};p.one=function(){for(var a=arguments.length,b=[],e=0;e<a;e++)b[e]=arguments[e];b[a]=!0;return this.on.apply(this,b)};p.off=function(a,b){for(var e=
a.split(" "),n=0;n<e.length;n++){var k=e[n];if(k){var h=k;if(k=b){if(h=this.listeners[h]){for(var c=[],g=0,m=h.length;g<m;g++)k==h[g].cb&&c.push(g);if(c.length)for(g=c.length-1;0<=g;g--)h.splice(c[g],1)}}else delete this.listeners[h]}}return this};l.widget("paramquery.pqTooltip",l.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var a=l(this),b=a.closest(".pq-grid").pqGrid("getInstance").grid,e=b.getCellIndices({$td:a});return(b=
b.data({rowIndx:e.rowIndx,dataIndx:e.dataIndx,data:"pq_valid"}).data)?(a=b.icon,b=b.msg,(""==a?"":"<span class='ui-icon "+a+" pq-tooltip-icon'></span>")+(null!=b?b:"")):a.attr("title")}},_create:function(){this._super();var a=this.element,b=this.eventNamespace;a.on("pqtooltipopen"+b,function(b,a){var d=l(b.target),h=l(b.originalEvent.target);h.on("remove",function(g){d.pqTooltip("close",g,!0)});a.tooltip.css("zIndex",h.zIndex()+5);if(d.is(".pq-grid")){var c=d.pqGrid("getCellIndices",{$td:h}),g=c.dataIndx,
m;(m=d.pqGrid("getRowData",{rowIndx:c.rowIndx}))&&(m=m.pq_celldata)&&(m=m[g])&&(m=m.pq_valid)&&(g=m,c=g.style,a.tooltip.addClass(g.cls),g=a.tooltip.attr("style"),a.tooltip.attr("style",g+";"+c));d.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(g,m){g.currentTarget=h[0];d.pqTooltip("close",g,!0)})}});a.on("pqtooltipclose"+b,function(b,a){var d=l(b.target);l(b.originalEvent.target).off("remove");d.is(".pq-grid")&&d.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(l){var p=window.pq=p||{},f=l.paramquery;p.arrayUnique=function(b,e){var a=[],d,h=b.length,c,g={},m;for(d=0;d<h;d++)c=b[d],m=e?c[e]:c,g.hasOwnProperty(m)||(g[m]=1,a.push(c));return a};f.select=function(b){var a=b.options,d=b.groupIndx,c=b.labelIndx,h=b.valueIndx,q=null!=c&&null!=h,g=null!=d,m=b.prepend,C=b.dataMap,s,r,t;b=["<select ",b.attr," >"];if(m)for(var w in m)b.push('<option value="',w,'">',m[w],"</option>");if(a&&a.length){for(var m=0,u=a.length;m<u;m++){var f=a[m];if(q){var l=f[h],
A=f.pq_disabled?'disabled="disabled" ':"",B=f.pq_selected?'selected="selected" ':"";if(null!=l){if(C){s={};for(t=0;t<C.length;t++){var v=C[t];s[v]=f[v]}s="data-map='"+JSON.stringify(s)+"'"}else s="";t=s;g&&(v=f.pq_disabled_group?'disabled="disabled" ':"",s=f[d],r!=s&&(null!=r&&b.push("</optgroup>"),b.push('<optgroup label="',s,'" ',v," >"),r=s));c==h?b.push("<option ",B,A,t,">",l,"</option>"):b.push("<option ",B,A,t,' value="',l,'">',f[c],"</option>")}}else if("object"==typeof f)for(w in f)b.push('<option value="',
w,'">',f[w],"</option>");else b.push("<option>",f,"</option>")}g&&b.push("</optgroup>")}b.push("</select>");return b.join("")};l.fn.pqval=function(b){if(b){if(b.incr)return b=this.data("pq_value"),this.prop("indeterminate",!1),b?(b=!1,this.prop("checked",!1)):!1===b?(b=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(b=!0,this.prop("checked",!0)),this.data("pq_value",b),b;b=b.val;this.data("pq_value",b);this.prop("indeterminate",!1);null==b?(this.prop("indeterminate",!0),this.prop("checked",
!1)):b?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};f.xmlToArray=function(b,a){var d=a.itemParent,c=a.itemNames,h=[];l(b).find(d).each(function(b,g){var m=l(g),C=[];l(c).each(function(g,b){C.push(m.find(b).text().replace(/\r|\n|\t/g,""))});h.push(C)});return h};f.xmlToJson=function(b,a){var d=a.itemParent,c=a.itemNames,h=[];l(b).find(d).each(function(b,g){for(var m=l(g),C={},a=0,e=c.length;a<e;a++){var d=c[a];C[d]=m.find(d).text().replace(/\r|\n|\t/g,"")}h.push(C)});
return h};f.tableToArray=function(b){var a=[],d=[];b=l(b).children("tbody").children("tr");var c=b.length?l(b[0]):l(),h=1<b.length?l(b[1]):l();c.children("th,td").each(function(b,g){var m=l(g),C=m.html(),m=m.width(),d="left";if(h.length)var n=h.find("td:eq("+b+")").attr("align"),d=n?n:d;a.push({title:C,width:m,dataType:"string",align:d,dataIndx:b})});b.each(function(b,g){if(0!=b){var m=[];l(g).children("td").each(function(g,b){m.push(l.trim(l(b).html()))});d.push(m)}});return{data:d,colModel:a}};
var c={};f.formatCurrency=function(b,a){var d=parseFloat(b);if(!isNaN(d)){var k=0>d,h;a:{var q=a,g,m;if(q){q=q.split(":");q=k&&1<q.length?q[1]:q[0];if(g=c[q]){h=g;break a}m=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(m=q.match(m))&&m.length&&(g={symbol:m[1]||"",thouSep:m[2],thousand:m[3].length,decSep:m[4],decimal:m[5].length,symbolEnd:m[6]||""},c[q]=g)}h=g=g||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}q=h.symbol;g=h.symbolEnd;
m=h.thousand;var C=h.thouSep,s=h.decSep,r=h.decimal,d=d.toFixed(r);h=d.length;var t=r+s.length,r=d.substring(0,h-t),d=d.substring(h-t+s.length,h);h=r.match(/\d/g).reverse();r=[];for(t=0;t<h.length;t++)0<t&&0==t%m&&r.push(C),r.push(h[t]);r=r.reverse();r=r.join("");return(k?"-":"")+q+r+s+d+g}};p.formatNumber=f.formatCurrency;p.validation={is:function(b,a){if("string"==b||!b)return!0;b=b.substring(0,1).toUpperCase()+b.substring(1,b.length);return this["is"+b](a)},isFloat:function(b){var a=parseFloat(b);
return isNaN(a)||a!=b?!1:!0},isInteger:function(b){var a=parseInt(b);return isNaN(a)||a!=b?!1:!0},isDate:function(b){b=Date.parse(b);return isNaN(b)?!1:!0}};var a=[],d=f.toLetter=function(b){var e=a[b];if(!e){b++;var n=b%26,e=b/26|0,n=n?String.fromCharCode(64+n):(--e,"Z"),e=e?d(e-1)+n:n;b--;a[b]=e}return e};f.generateData=function(b,a){for(var n=[],c=0;c<a;c++)n[c]=d(c);for(var h=[],c=0;c<b;c++)for(var q=h[c]=[],g=0;g<a;g++)q[g]=n[g]+(c+1);return h}})(jQuery);
(function(l){function p(b,a,d){return b?l("<span tabindex='0' rel='tooltip' data-placement='top' title='"+a+"' class='btn btn-xs "+d+"'></span>"):l("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+a+"'><span class='ui-icon ui-icon-"+d+"'></span></span>")}function f(b,a){b.bind("click keydown",function(b){if("keydown"!=b.type||b.keyCode==l.ui.keyCode.ENTER)return a.call(this,b)})}function c(b,a,d){a[d?"addClass":"removeClass"]("disabled").css("pointer-events",d?"none":
"").attr("tabindex",d?"":"0")}var a={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};l.extend(a.options,a._regional);a._create=function(){var b=this,a=this.options,d=this.element,c=a.bootstrap,h=c.on;this.listeners={};d.addClass("pq-pager "+(h?c.pager:""));this.first=p(h,a.strFirstPage,h?c.firstIcon:"seek-first").appendTo(d);f(this.first,function(d){1<a.curPage&&b._onChange(d,1)});this.prev=p(h,a.strPrevPage,h?c.prevIcon:"seek-prev").appendTo(d);f(this.prev,function(d){1<a.curPage&&
b._onChange(d,a.curPage-1)});l("<span class='pq-separator'></span>").appendTo(d);this.pageHolder=l("<span class='pq-page-placeholder'></span>").appendTo(d);l("<span class='pq-separator'></span>").appendTo(d);this.next=p(h,a.strNextPage,h?c.nextIcon:"seek-next").appendTo(d);f(this.next,function(d){a.curPage<a.totalPages&&b._onChange(d,a.curPage+1)});this.last=p(h,a.strLastPage,h?c.lastIcon:"seek-end").appendTo(d);f(this.last,function(d){a.curPage!==a.totalPages&&b._onChange(d,a.totalPages)});l("<span class='pq-separator'></span>").appendTo(d);
this.rPPHolder=l("<span class='pq-page-placeholder'></span>").appendTo(d);this.$refresh=p(h,a.strRefresh,h?c.refreshIcon:"refresh").appendTo(d);f(this.$refresh,function(a){if(!1===b._trigger("beforeRefresh",a))return!1;b._trigger("refresh",a)});l("<span class='pq-separator'></span>").appendTo(d);this.$msg=l("<span class='pq-pager-msg'></span>").appendTo(d);this._refresh()};a._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};a._setOption=function(b,a){if("curPage"==
b||"totalPages"==b)a*=1;this._super(b,a)};a._setOptions=function(a){var e,d=!1,c=this.options;for(e in a){var h=a[e],q=typeof h;"string"==q||"number"==q?h!=c[e]&&(this._setOption(e,h),d=!0):"function"==typeof h.splice||l.isPlainObject(h)?JSON.stringify(h)!=JSON.stringify(c[e])&&(this._setOption(e,h),d=!0):h!=c[e]&&(this._setOption(e,h),d=!0)}d&&this._refresh();return this};l.widget("paramquery.pqPager",a);pq.pager=function(a,e){var d=l(a).pqPager(e);return d.data("paramqueryPqPager")||d.data("paramquery-pqPager")};
var d=l.paramquery;d.pqPager.regional={};d.pqPager.regional.en=a._regional;a=d.pqPager.prototype;d.pqPager.defaults=a.options;a._refreshPage=function(){var a=this;this.pageHolder.empty();for(var e=this.options,d=e.bootstrap,c=e.strPage.split(" "),h=[],q=0,g=c.length;q<g;q++){var m=c[q];"{0}"==m?h.push("<input type='text' tabindex='0' class='pq-pager-input ",d.on?"":"ui-corner-all","' />"):"{1}"==m?h.push("<span class='total'></span>"):h.push("<span>",m,"</span>")}d=h.join("");d=l(d).appendTo(this.pageHolder);
this.page=d.filter("input").bind("change",function(g){var m=l(this),d=m.val();if(isNaN(d)||1>d)return m.val(e.curPage),!1;d=parseInt(d);if(d>e.totalPages||!1===a._onChange(g,d))return m.val(e.curPage),!1});this.$total=d.filter("span.total")};a._onChange=function(a,e){if(!1===this._trigger("beforeChange",a,{curPage:e})||!1===this._trigger("change",a,{curPage:e}))return!1;this.option({curPage:e})};a._refresh=function(){this._refreshPage();var a=this,e=this.options,d=e.bootstrap;this.rPPHolder.empty();
if(e.strRpp){var k=e.rPPOptions,h=e.strRpp;if(-1!=h.indexOf("{0}")){for(var d=["<select class='",d.on?"":"ui-corner-all","'>"],q=0,g=k.length;q<g;q++){var m=k[q];d.push('<option value="',m,'">',m,"</option>")}d.push("</select>");k=d.join("");h=h.replace("{0}","</span>"+k);h="<span>"+h+"<span class='pq-separator'></span>"}else h="<span>"+h+"</span><span class='pq-separator'></span>";this.$rPP=l(h).appendTo(this.rPPHolder).filter("select").val(e.rPP).change(function(g){var m=l(this),d=m.val();if(!1===
a._trigger("beforeChange",g,{rPP:d}))return m.val(a.options.rPP),!1;!1!==a._trigger("change",g,{rPP:d})&&(a.options.rPP=d)})}h=e.bootstrap.on;k=e.curPage>=e.totalPages;c(h,this.next,k);c(h,this.last,k);k=1>=e.curPage;c(h,this.first,k);c(h,this.prev,k);this.page.val(e.curPage);this.$total.text(e.totalPages);0<this.options.totalRecords?(h=e.rPP,k=e.curPage,d=e.totalRecords,q=k*h,q>d&&(q=d),e=e.strDisplay,e=e.replace("{0}",(k-1)*h+1),e=e.replace("{1}",q),e=e.replace("{2}",d),this.$msg.html(e)):this.$msg.html("")};
a.getInstance=function(){return{pager:this}};a._trigger=d._trigger;a.on=d.on;a.one=d.one;a.off=d.off})(jQuery);
(function(l){function p(a,b){return a?"<div class='"+b+"'></div>":"<div class='ui-icon ui-icon-"+b+"'></div>"}var f=l.paramquery,c={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){l(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(a,b){var e=this.options;"disabled"==a?(this._super(a,b),!0==b?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==a?(e[a]=b,this._createLayout()):"ratio"==a?0<=b&&1>=b&&(e[a]=b):e[a]=b},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};l.widget("paramquery.pqScrollBar",c);pq.scrollbar=function(a,b){var e=l(a).pqScrollBar(b);return e.data("paramqueryPqScrollBar")||e.data("paramquery-pqScrollBar")};c=f.pqScrollBar.prototype;f.pqScrollBar.defaults=c.options;c._createLayout=function(){var a=this,b=this.options,e=b.bootstrap,c=e.on,k=b.direction,h=this.eventNamespace,q=b.theme,g=this.element.empty();"vertical"==k?(g.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),q?(g.addClass("pq-sb-vert-t"),
g[0].innerHTML=["<div class='top-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-top","'>",p(c,c?e.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",c?e.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-bottom","'>",p(c,c?e.down:"triangle-1-s"),"</div>"].join("")):(g.addClass("pq-sb-vert-wt"),g[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(g.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),q?(g.addClass("pq-sb-horiz-t"),g[0].innerHTML=["<div class='left-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-left","'>",p(c,c?e.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",c?e.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-right","'>",p(c,c?e.right:"triangle-1-e"),"</div>"].join("")):(g.addClass("pq-sb-horiz-wt"),g.width(this.width),
g[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));g.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(g){if(!b.disabled&&!a.$slider.is(":hidden"))if(l(document).off("."+h).on("mouseup."+
h,function(g){a._mouseup(g)}),"vertical"==k){var C=g.pageY,e=a.element.offset().top,c=e+b.length,n=a.$slider,q=n.offset().top,f=n.height(),n=q+f;C<q&&C>e+17?a._setTimerPageLeft(C,f,g,0):C>n&&C<c-17&&a._setTimerPageRight(C,f,g,0)}else C=g.pageX,e=a.element.offset().left,c=e+b.length,q=a.$slider.offset().left,n=q+a.$slider.width(),C<q&&C>e+17?(a.$slider.css("left",C-a.element.offset().left),a._updateCurPosAndTrigger(g)):C>n&&C<c-17&&(a.$slider.css("left",C-a.element.offset().left-a.$slider.width()),
a._updateCurPosAndTrigger(g))});e=this.$slider=l("div.pq-sb-slider",this.element);e.attr("tabindex","0");this._bindSliderEvents(e);this.$top_btn=l("div.top-btn,div.left-btn",this.element).click(function(g){if(!a.options.disabled)return a.decr_cur_pos(g),!1}).mousedown(function(g){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.decr_cur_pos(g)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(g){a._mouseup(g)});this.$bottom_btn=
l("div.bottom-btn,div.right-btn",this.element).click(function(g){if(!a.options.disabled)return a.incr_cur_pos(g),!1}).mousedown(function(g){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.incr_cur_pos(g)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(g){a._mouseup(g)});this.refresh()};var a=0;c._setTimerPageLeft=function(d,b,e,c){var k=this,h=k.options;this.mousedownTimeout=window.setTimeout(function(){if(d>=k.$slider.offset().top)k._mouseup();
else{k._pageLeft(e);var c=a?0:h.timeout;a++;k._setTimerPageLeft(d,b,e,c)}},c)};c._setTimerPageRight=function(d,b,e,c){var k=this;this.mousedownTimeout=window.setTimeout(function(){if(d<=k.$slider.offset().top+b)k._mouseup();else{k._pageRight(e);var c=a?0:k.options.timeout;a++;k._setTimerPageRight(d,b,e,c)}},c)};c._bindSliderEvents=function(a){var b=this,e="x";"vertical"==this.options.direction&&(e="y");a.draggable({axis:e,helper:function(a,e){b._setDragLimits();return this},start:function(a){b.topWhileDrag=
null;b.dragging=!0},drag:function(a){b.dragging=!0;var e=b.options.pace;"optimum"==e?b._setNormalPace(a):"fast"==e&&b._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=b.options.pace&&b._updateCurPosAndTrigger(a);b.dragging=!1;b.refresh()}}).on("keydown.pq-scrollbar",function(a){var e=a.keyCode,d=b.options,c=d.cur_pos,g=d.ratio,m=d.num_eles,C=l.ui.keyCode;null==b.keydownTimeout&&(b.keydownTimeout=window.setTimeout(function(){e==C.DOWN||e==C.RIGHT?b.incr_cur_pos(a):e==C.UP||e==C.LEFT?b.decr_cur_pos(a):
e==C.HOME?d.steps?0<c&&(d.cur_pos=0,b.updateSliderPos(),b.scroll(a)):0<g&&(d.ratio=0,b.updateSliderPos(),b.drag(a)):e==C.END?d.steps?c<m&&(d.cur_pos=m,b.updateSliderPos(),b.scroll(a)):1>g&&(d.ratio=1,b.updateSliderPos(),b.drag(a)):"vertical"==d.direction&&(e==C.PAGE_DOWN?b._pageRight(a):e==C.PAGE_UP&&b._pageLeft(a));b.keydownTimeout=null},0));if(e==C.DOWN||e==C.RIGHT||e==C.UP||e==C.LEFT||e==C.PAGE_DOWN||e==C.PAGE_UP||e==C.HOME||e==C.END)return a.preventDefault(),!1})};c.decr_cur_pos=function(a){var b=
this.options;if(b.steps)0<b.cur_pos&&(b.cur_pos--,this.updateSliderPos(),this.scroll(a));else if(0<b.ratio){var e=b.ratio-1/(b.num_eles-1);0>e&&(e=0);b.ratio=e;this.updateSliderPos();this.drag(a)}};c.incr_cur_pos=function(a){var b=this.options;if(b.steps)b.cur_pos<b.num_eles-1&&b.cur_pos++,this.updateSliderPos(),this.scroll(a);else{if(1>b.ratio){var e=b.ratio+1/(b.num_eles-1);1<e&&(e=1);b.ratio=e}this.updateSliderPos();this.drag(a)}};c._mouseup=function(d){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};c._setDragLimits=function(){var a=this.options;if("vertical"==a.direction){var b=this.element.offset().top+17,a=b+a.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,b,0,a])}else b=this.element.offset().left+17,a=b+a.length-34-this.slider_length,this.$slider.draggable("option","containment",[b,0,a,0])};c._validateCurPos=function(){var a=this.options;a.cur_pos>=a.num_eles&&
(a.cur_pos=a.num_eles-1);0>a.cur_pos&&(a.cur_pos=0)};c._updateSliderPosRatio=function(){var a=this.options,b=a.direction,e=a.ratio,c=this.$slider[0],a=a.length-34-this.slider_length;if(null==e)throw"updateSliderPosRatio ratio N/A";e=e*a+17;"vertical"==b?c.style.top=e+"px":c.style.left=e+"px"};c._updateSliderPosCurPos=function(){var a=this.options,b=this.$slider[0],e=this.scroll_space*a.cur_pos/(a.num_eles-1);"vertical"==a.direction?b.style.top=17+e+"px":b.style.left=17+e+"px"};c.updateSliderPos=function(){var a=
this.options;if(void 0===a.steps)throw"updateSliderPos. steps N/A";a.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};c.scroll=function(a){var b=this.options;this._trigger("scroll",a,{cur_pos:b.cur_pos,num_eles:b.num_eles})};c.drag=function(a){this._trigger("drag",a,{ratio:this.options.ratio})};c._pageRight=function(a){this._trigger("pageRight",a,null)};c._pageLeft=function(a){this._trigger("pageLeft",a,null)};c._setSliderBgLength=function(){var a=this.options,b=a.theme,e=this.$slider,
c=a.length,c=Math.round(((c-34)*c/(40*a.num_eles+c)-14)/2);1>c&&(c=1);var k=14+2*c;this.scroll_space=a.length-34-k;if(k!==this.slider_length)if(this.slider_length=k,a="vertical"===a.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},b)e[a.dim](k-2);else l(a.cls,this.element)[a.dim](c),e[a.dim](k)};c._updateCurPosAndTrigger=function(a,b){var e=this.options,c=e.direction,k=this.$slider;null==b&&(b=parseInt(k[0].style["vertical"===c?"top":"left"]));c=(b-17)/(e.length-
34-this.slider_length);if(e.steps){if(c*=e.num_eles-1,c=Math.round(c),e.cur_pos!=c){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<b&&e.cur_pos>c||this.topWhileDrag>b&&e.cur_pos<c))return;this.topWhileDrag=b}this.options.cur_pos=c;this.scroll(a)}}else e.ratio=c,this.drag(a)};c._setNormalPace=function(a){this.timer&&(window.clearInterval(this.timer),this.timer=null);var b=this,e=this.options.direction;b.timer=window.setInterval(function(){var c=parseInt(b.$slider[0].style["vertical"===
e?"top":"left"]);b.prev_top===c&&(b._updateCurPosAndTrigger(a,c),window.clearInterval(b.timer),b.timer=null);b.prev_top=c},20)};c.refresh=function(){var a=this.options,b=this.$slider[0],e=this.element;1>=a.num_eles?e[0].style.display="none":(e[0].style.display="",this._validateCurPos(),this.dragging||(e["vertical"===a.direction?"height":"width"](a.length),this._setSliderBgLength(),b.style.display=4>this.scroll_space||1>=a.num_eles?"none":""),this.updateSliderPos())};c._trigger=f._trigger;c.on=f.on;
c.one=f.one;c.off=f.off})(jQuery);
(function(l){l.paramquery=l.paramquery||{};l.paramquery.onResize=function(p,f){var c=l(p);"static"===c.css("position")&&c.css("position","relative");var a=l('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(c);a[0].data="about:blank";a.css("opacity","0");for(var d=0;d<c.length;d++)l(a[d].contentWindow).on("resize",function(a){f()})}})(jQuery);
(function(l){function p(g){return"<span class='btn btn-xs glyphicon glyphicon-"+g+"' ></span>"}function f(g){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+g+"'></span></span>"}var c=function(){};c.prototype.belongs=function(g){if(g.target==this.that.element[0])return!0};var a=l.paramquery;a.cClass=c;var d=function(g){this.that=g;var m=this.options=g.options,a=this;a.odd=[];if(null!=m.postRenderInterval)g.on("refresh",function(){a.prColDef.length&&a.postRenderAll()}).on("refreshRow",
function(g,m){a.prColDef.length&&a.postRenderRow(m)}).on("refreshCell",function(g,m){m.column.postRender&&a.postRenderRow(m)}).on("refreshColumn",function(g,m){m.column.postRender&&a.setTimerPostRender(0,m.colIndx,m.column)});if(!m.mergeModel.flex)g.on("refresh refreshCell refreshRow refreshColumn",a.onRefreshMerge(g))};a.cGenerateView=d;c=d.prototype=new c;c.onRefreshMerge=function(g){return function(){for(var m=g.$cont.find(".pq-merge-cell-div"),a,b,e,d,c=m.length,h=[],n=[];c--;)a=m[c],a=a.parentNode,
b||(b=2*parseInt(l(a).css("paddingTop")),e=2*parseInt(l(a).css("paddingLeft"))),d=Math.max(a.offsetHeight,28),d-=b,a=a.offsetWidth-e,h[c]=d-1+"px",n[c]=a+"px";for(c=m.length;c--;)a=m[c],a.style.height=h[c],a.style.width=n[c]}};c.generateView=function(g){g=g||{};var m=this.that,C=m.options,b="flex"===C.width,e="flex"===C.height,d=C.cls,c=d.cont_inner,h=d.cont_inner_b,n,k,q=m.initH,f=m.finalH,l=m.pqpanes;if(g.$cont)n=this._generateTables(null,null,g),d=g.$cont,d.empty(),d[0].innerHTML=l.v?["<div class='",
c,"'>",n,"</div><div class='",c,"'>",n,"</div>"].join(""):["<div class='",c,"'>",n,"</div>"].join(""),C=d.children("div").children("table"),m.tables[0]={$tbl:C,$cont:d};else{n=m.initV;k=m.finalV;var x=m.pdata,d=m.$cont;null!=C.editModel.indices&&m.blurEditor({force:!0});q={pageData:x,initV:n,finalV:k,initH:q,finalH:f,source:g.source};m._trigger("beforeTableView",null,q);n=this._generateTables(n,k,g);d.empty();0===m.totalVisibleRows?d.append("<div class='"+c+" pq-grid-norows' >"+C.strNoRows+"</div>"):
(g=e||b?"style='position:relative;'":"",d[0].innerHTML=l.h&&l.v?["<div class='",c,"'>",n,"</div><div class='",c,"'>",n,"</div><div class='",c," ",h,"'>",n,"</div><div class='",c," ",h,"'>",n,"</div>"].join(""):l.v?["<div class='",c,"' ",g," >",n,"</div><div class='",c,"' >",n,"</div>"].join(""):l.h?["<div class='",c,"' style='position:static;' >",n,"</div><div class='",c," ",h,"' style='position:static;' >",n,"</div>"].join(""):["<div class='",c,"' ",g," >",n,"</div>"].join(""));m.$tbl=d.children("div").children("table");
if(C.scrollModel.flexContent&&m.$tbl[0])a.onResize(m.$tbl[0],function(){var g=m.iRefresh;g.ignoreTResize||g.softRefresh()});this.setPaneEvents();m._trigger("refresh",null,q)}this.setPanes()};c.postRenderRow=function(g){var m=this.that,a=this.prColDef,b=m.iMerge,e=g.rowIndx,d;null!=g.colIndx&&(a=[{colIndx:g.colIndx,column:g.column}]);for(var c=0,h=a.length;c<h;c++)g=a[c],d=g.column.postRender,g=g.colIndx,b.ismergedCell(e,g)?b.isRootCell(e,g,"a")&&(g=b.getRootCell(e,g),d.call(m,g)):(g=m.normalize({rowIndx:e,
colIndx:g}),d.call(m,g))};c.setTimerPostRender=function(g,m,a){var b=this.that,e=this,d=b.pdata,c=function(g){return-1==b.options.postRenderInterval?g():setTimeout(g,0)};d&&d.length&&(e.postRenderTimeoutID=c(function(){var c=b.initV,h=b.options.freezeRows;g<c&&g>=h&&(g=c);d[g].pq_hidden||e.postRenderRow({column:a,colIndx:m,rowIndx:g+b.rowIndxOffset});g++;g<=b.finalV&&e.setTimerPostRender(g)}))};c.postRenderAll=function(){var g=this.that,m=this,a=g.pdata,b=g.options.postRenderInterval,g=function(g){return-1==
b?g():setTimeout(g,b)};a&&a.length&&(clearTimeout(m.postRenderTimeoutID),m.postRenderTimeoutID=g(function(){m.setTimerPostRender(0)}))};c.scrollView=function(){var g=this.that,m=this.options,a=m.virtualY;m.virtualX||g.hscroll.drag();a||g.vscroll.drag()};c.setPaneEvents=function(){var g=this.that,m=g.pqpanes,a=g.$cont.children("div"),b=g.iMouseSelection;if((g=g.$tbl)&&g.length)if(m.h&&m.v){var m=l(a[0]),g=l(a[1]),e=l(a[2]),a=l(a[3]);m.on("scroll",function(g){this.scrollLeft=this.scrollTop=0});g.on("scroll",
function(g){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});e.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(m.v)m=l(a[0]),a=l(a[1]),m.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(m.h)m=l(a[0]),a=l(a[1]),m.on("scroll",
function(g){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),a.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else a.on("scroll",function(g){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};c.setPanes=function(){var g=this.that,m=g.pqpanes,a=g.$cont.children("div"),b=g.iRefresh,e=g.$tbl,d=g.options,c=g.calcWidthCols(-1,1*d.freezeCols)+1,h="flex"!==d.width||d.maxWidth?b.getEContWd():"";if(g.tables.length){var n=g.tables[0].$tbl,
k=g.tables[0].$cont,q=n.parent("div");m.v?(l(q[0]).css({width:c}),l(q[1]).css({left:c,width:h-c}),l(n[1]).css({left:-1*c})):l(q[0]).css({width:h});k.height(n[0].scrollHeight-1);b.setContHeight()}if(e&&e.length)if(b="flex"!==d.height||d.maxHeight?b.getEContHt():"",m.h&&m.v){var n=l(a[0]),k=l(a[1]),q=l(e[1]),f=l(a[2]),v=l(e[2]),a=l(a[3]),x=l(e[3]),e=g.calcHeightFrozenRows();n.css({width:c,height:e});k.css({left:c,width:h-c,height:e});q.css({left:-1*c});f.css({width:c,top:e,height:b-e});v.css({marginTop:-(e+
1)});a.css({left:c,width:h-c,top:e,height:b-e});x.css({marginTop:-(e+1),left:-1*c})}else m.v?(n=l(a[0]),a=l(a[1]),e=l(e[1]),n.css({width:c,height:b}),a.css({left:c,width:h-c,height:b}),e.css({left:-1*c})):m.h?(n=l(a[0]),a=l(a[1]),k=l(e[1]),e=g.calcHeightFrozenRows(),n.css({height:e,width:h}),a.css({width:h,top:e,height:b-e}),k.css({marginTop:-(e+1)})):a.css({width:h,height:b});d.showHeader&&(m.vH?(g.$header_left.css({width:c}),g.$header_right.css({left:c,width:h-c}),g.$header_right_inner.css({left:-c})):
g.$header_left.css({width:h}))};c.createColDefs=function(){for(var g=this.that,m=g.colModel,a=g.initH,b=g.finalH,g=g.options.freezeCols,e=[],d=[],c=0;c<=b;c++){if(c<a&&c>=g&&(c=a,c>b))throw"initH>finalH";var h=m[c];h.hidden||(e.push({column:h,colIndx:c}),h.postRender&&"function"==typeof h.postRender&&d.push({column:h,colIndx:c}))}this.colDef=e;this.prColDef=d};c._generateTables=function(g,m,a){a=a||{};var b=this.that,e=b.options,d=e.bootstrap,c=e.numberCell,h=!0,n=1*e.freezeRows,k=0,q=a.other,f=this.odd;
m=q?a.data.length-1:m;q?a=a.data:(a=b.pdata,this.setFrozenRip(a,n));if(q||null!=g&&null!=m){k=["pq-grid-table"];d.on&&k.push(d.tbody);e.columnBorders&&k.push("pq-td-border-right");e.rowBorders&&k.push("pq-td-border-top");k.push(e.wrap?"pq-wrap":"pq-no-wrap");e=["<table class='"+k.join(" ")+"' >"];e.push("<tr class='pq-row-hidden'>");if(c.show){var l=c.width;e.push("<td style='width:"+l+"px;' ></td>")}k=this.colDef;c=0;for(d=k.length;c<d;c++)l=k[c],b=l.colIndx,l=l.column.outerWidth,e.push("<td style='width:",
l,"px;' pq-col-indx='",b,"'></td>");e.push("</tr>");for(k=0;k<=m;k++)k<g&&k>=n&&(k=g),c=a[k],d=k,c&&c.pq_hidden||(f[d]=h=!h,b=c.pq_detail&&c.pq_detail.show,this._generateRow(c,d,e,q,b),b&&this._generateDetailRow(c,d,e));e.push("</table>");return e.join("")}};c.appendRow=function(g){var m=this.that,a=m.pdata,b=m.colModel,e=m.finalV;e+g>a.length&&(g=a.length-e);if(g){if(1<g)throw"noRows > 1";m._trigger("beforeTableView",null,{pageData:a,initV:e,finalV:e,initH:m.initH,finalH:m.finalH,colModel:b});m.refreshRow({rowIndxPage:e,
refresh:!1})}return g};c.prependRow=function(g){var m=this.that,a=m.options.freezeRows,b=m.calcVisibleRows(m.pdata,0,a),e=m.pdata,d=m.initV,c=m.colModel;if(m._mergeCells){if(b)for(b=0;b<a;b++)m.refreshRow({rowIndxPage:b,refresh:!1});m.refreshRow({rowIndxPage:d+1,refresh:!1})}m._trigger("beforeTableView",null,{pageData:e,initV:d,finalV:d,initH:m.initH,finalH:m.finalH,colModel:c});m.refreshRow({rowIndxPage:d,refresh:!1});return g};c.removeTopRow=function(g){for(var m=this.that,a=m.options.freezeRows,
b=m.calcVisibleRows(m.pdata,0,a),e=m.$tbl,d=l([]),c=0;c<e.length;c++)var h=l(e[c]).children("tbody").children("tr:gt(0)").slice(b,g+b),d=d.add(h);d.remove();if(m._mergeCells){if(b)for(c=0;c<a;c++)m.refreshRow({rowIndxPage:c,refresh:!1});m.refreshRow({rowIndxPage:m.initV,refresh:!1})}};c.removeBottomRow=function(g){var m=this.that.$tbl;if(g)for(var a=0;a<m.length;a++)l(m[a]).children("tbody").children("tr:gt(0)").slice(-g).remove()};c.format=function(){var g=l.datepicker,m=pq.formatNumber;return function(a,
b,e){if("date"==e){if(!isNaN(Date.parse(a)))return g.formatDate(b,new Date(a))}else return m(a,b)}}();c.renderCell=function(g){var m=this.that,a=[],b=[],e=g.Export,d=!1,c=this.options,n=["pq-grid-cell"];if(!g.other&&!e&&m._mergeCells){g=m.iMerge.renderCell(g);if(null==g)return"";g.rowspan&&(a.push("rowspan='"+g.rowspan+"'","colspan='"+g.colspan+"'"),c.mergeModel.flex||(d=!0,n.push("pq-merge-cell")));g.style&&b.push(g.style);g.cls&&n.push(g.cls)}var k=g.rowData,q=g.column,f=g.colIndx,l=q.dataIndx,
v=c.freezeCols,c=c.columnBorders;if(k){e||(a.push("pq-col-indx='"+f+"'"),"right"==q.align?n.push("pq-align-right"):"center"==q.align&&n.push("pq-align-center"),f==v-1&&c&&n.push("pq-last-frozen-col"),(f=q.cls)&&n.push(f),(f=m.iSelection.dirty?null:k.pq_cellselect)&&f[l]&&n.push(m.iCells.hclass));var x,v=k[l],f=(f=q.format)?this.format(v,f,q.dataType):v;g.dataIndx=l;g.cellData=v;g.formatVal=f;if(q.render&&(x=q.render.call(m,g))&&"string"!=typeof x){var v=x.attr,c=x.cls,p=x.style;v&&a.push(v);c&&n.push(c);
p&&b.push(p);x=x.text}null==x&&q._render&&(x=q._render.call(m,g));x&&"string"!=typeof x&&(v=x.attr,c=x.cls,p=x.style,v&&a.push(v),c&&n.push(c),p&&b.push(p),x=x.text);null==x&&(x=f);if(e)return x;if(""===x||void 0==x)x="&nbsp;";(g=k.pq_cellcls)&&(g=g[l])&&n.push(g);if(k=k.pq_cellattr)if(l=k[l]){var l=h(l),E;for(E in l)k=l[E],"style"==E?b.push(k):a.push(E+'="'+k+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",n.join(" "),"' ",a.join(" "),b," >",d?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":
"",x,d?"</div></div></div>":"","</td>"].join("")}};c.setFrozenRip=function(g,m){if(g){for(var a;m--&&(a=g[m])&&a.pq_hidden;);this.frozenRip=m}};c.refreshRow=function(g,m){var a=this.that.pdata[g];this._generateRow(a,g,m,null,a.pq_detail&&a.pq_detail.show)};c._generateRow=function(g,m,a,b,e){var d=["pq-grid-row"];this.frozenRip===m&&d.push("pq-last-frozen-row");e&&d.push("pq-detail-master");var c=this.that,n=this.options,k=n.rowInit;e=n.numberCell;var q="",f="",l=c.rowIndxOffset,v=m+l;k&&(k=k.call(c,
{rowData:g,rowIndxPage:m,rowIndx:v}))&&(k.cls&&d.push(k.cls),q+=k.attr?" "+k.attr:"",f+=k.style?k.style:"");n.stripeRows&&this.odd[m]&&d.push("pq-grid-oddRow");g.pq_rowselect&&d.push(c.iRows.hclass);c=g.pq_rowcls;null!=c&&d.push(c);if(c=g.pq_rowattr){var c=h(c),x;for(x in c)q+=" "+x+'="'+c[x]+'"'}f=f?"style='"+f+"'":"";a.push("<tr pq-row-indx='",m,"' class='",d.join(" "),"' ",q," ",f," >");e.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",b?"&nbsp;":v+1,"</td>"].join(""));g={rowIndx:m+
l,rowIndxPage:m,other:b,rowData:g};m=this.colDef;b=0;for(d=m.length;b<d;b++)x=m[b],e=x.colIndx,g.column=x.column,g.colIndx=e,a.push(this.renderCell(g));a.push("</tr>");return a};c._generateDetailRow=function(g,m,a){var b=["pq-grid-row pq-detail-child"],e=this.that,d=e.options,c=d.numberCell;d.stripeRows&&this.odd[m]&&b.push("pq-grid-oddRow");g.pq_rowselect&&b.push(e.iRows.hclass);g=g.pq_rowcls;null!=g&&b.push(g);a.push("<tr pq-row-indx='"+m+"' class='"+b.join(" ")+"' >");c.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");
a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};c={widgetEventPrefix:"pqgrid",_create:function(){var g=this,m=this.options,b=m.dataModel,e=m.bootstrap,c=e.on,h=m.roundCorners&&!c,k=m.ui,f=m.sortModel;this.BS_on=c;m.collapsible||(m.collapsible={on:!1,collapsed:!1});m.flexHeight&&(m.height="flex");m.flexWidth&&(m.width="flex");if(b.sortIndx){f.on=m.sortable;f.type=b.sorting;var y=[],z=b.sortIndx,b=b.sortDir;if(l.isArray(z)){for(var A=0;A<z.length;A++){var p=
b&&b[A]?b[A]:"up";y.push({dataIndx:z[A],dir:p})}f.single=!1}else y.push({dataIndx:z,dir:b?b:"up"}),f.single=!0;f.sorter=y}!1===m.virtualXHeader&&(m.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new d(this);this.iRefresh=new a.cRefresh(this);this.iKeyNav=new q(this);this.iIsValid=new n(this);this.tables=[];this.$tbl=null;this.iColModel=new a.cColModel(this);this.iSort=new a.cSort(this);this.iHeader=new a.cHeader(this);this._initTypeColumns();f=this.element;f.on("scroll"+this.eventNamespace,
function(){this.scrollTop=this.scrollLeft=0});y=c?e.grid:k.grid;z=c?"":k.header_o;b=c?"":k.bottom;e=c?e.top:k.top;f.empty().addClass("pq-grid "+y+" "+(h?" ui-corner-all":"")).html(["<div class='pq-grid-top ",e," ",h?" ui-corner-top":"","'><div class='pq-grid-title",h?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",z,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",b," ",
h?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=l("div.pq-grid-bottom",f);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=l("div.pq-grid-top",f);m.showTop||this.$top.css("display","none");this.$title=l("div.pq-grid-title",f);m.showTitle||this.$title.css("display","none");h=this.$grid_center=l("div.pq-grid-center",f).on("scroll",function(){this.scrollTop=0});this.$header_o=l("div.pq-header-outer",this.$grid_center).on("scroll",
function(){this.scrollLeft=this.scrollTop=0});this.$footer=l("div.pq-grid-footer",f);this.$cont_o=l(".pq-grid-cont-outer",h);e=this.$cont=l("div.pq-grid-cont",h);l(window).bind("resize"+g.eventNamespace+" orientationchange"+g.eventNamespace,function(m,a){g.onWindowResize(m,a)});e.on("click",".pq-grid-cell,.pq-grid-number-cell",function(m){if(!0!==l.data(m.target,g.widgetName+".preventClickEvent")&&l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onClickCell(m)});e.on("click","tr.pq-grid-row",
function(m){if(!0!==l.data(m.target,g.widgetName+".preventClickEvent")&&l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onClickRow(m)});e.on("contextmenu","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickCell(m)});e.on("contextmenu","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onRightClickRow(m)});e.on("dblclick","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickCell(m)});
e.on("dblclick","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onDblClickRow(m)});e.on("blur",function(){g.onblur()});e.on("focus",function(){g.onfocus()});e.on("mousedown",function(m){if(1===m.which){var a=l(m.target);if(a.closest(".pq-grid")[0]==g.element[0]){var b;b=a.closest(".pq-grid-cell:not(.pq-detail-child)");if(b.length&&(m.currentTarget=b[0],b=g._onCellMouseDown(m),!1===b))return!1;if(!m.isPropagationStopped()){a=a.closest(".pq-grid-row");if(a.length&&
(m.currentTarget=a[0],b=g._onRowMouseDown(m),!1===b))return!1;if(!m.isPropagationStopped())return g._onContMouseDown(m)}}}});e.on("mouseenter","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseEnter(m,l(this))});e.on("mouseenter","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseEnter(m,l(this))});e.on("mouseleave","td.pq-grid-cell",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onCellMouseLeave(m,
l(this))});e.on("mouseleave","tr.pq-grid-row",function(m){if(l(m.target).closest(".pq-grid")[0]==g.element[0])return g._onRowMouseLeave(m,l(this))});e.on("keyup",function(m){l(m.target).closest(".pq-grid")[0]==g.element[0]&&g._trigger("keyUp",m,null)});h.bind("mousewheel DOMMouseScroll",function(m){return g._onMouseWheel(m)});this.$hvscroll=l("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(h);c=l("<div class='pq-vscroll'></div>").appendTo(h);this.prevVScroll=0;e=m.scrollModel;
void 0===e.lastColumn&&m.virtualX&&(e.lastColumn="auto");this.vscroll=pq.scrollbar(c,{pace:e.pace,theme:e.theme,bootstrap:m.bootstrap,steps:m.virtualY&&!e.smooth,direction:"vertical",cur_pos:0,pageRight:function(){g.iKeyNav.pageDown()},pageLeft:function(){g.iKeyNav.pageUp()},drag:function(m,a){g.iMouseSelection.syncViewWithScrollBarVert(a.ratio)},scroll:function(m,a){g.iRefresh.refreshVscroll(a)}});c=l("<div class='pq-hscroll'></div>").appendTo(h);"flex"===m.height&&c.css("position","relative");this.hscroll=
pq.scrollbar(c,{direction:"horizontal",pace:e.pace,bootstrap:m.bootstrap,theme:e.theme,steps:m.virtualX&&!e.smooth,cur_pos:0,drag:function(m,a){g.iMouseSelection.syncViewWithScrollBarHor(a.ratio)},scroll:function(){m.virtualX&&!m.scrollModel.smooth&&g.refresh()}});m.selectionModel["native"]||this.disableSelection();h.bind("keydown.pq-grid",function(m){l(m.target).closest(".pq-grid")[0]==g.element[0]&&g._onKeyPressDown(m)});this._refreshTitle();this.iRows=new a.cRows(this);this.iCells=new a.cCells(this);
this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new a.cResizeColumns(this);this._mouseInit()},_mouseDown:function(g){var m=this;if(l(g.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){m._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(g){return m._mousePQUp(g)},l(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(g)},destroy:function(){this._trigger("destroy");
this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var g in this)delete this[g];this.options=void 0;l.fragments={}},_setOption:function(g,m){var a=this.options,b=a.dataModel;if("height"===g)"flex"===m?(b=this.vscroll,m&&b&&b.widget().hasClass("pq-sb-vert")&&(a.virtualY?b.option("cur_pos",0):b.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===a.height&&this.hscroll.widget().css("position",""),
a[g]=m;else if("width"===g&&"flex"==m)a[g]=m,b=this.hscroll,m&&b&&b.widget().hasClass("pq-sb-horiz")&&(a.virtualX?b.option("cur_pos",0):b.option("ratio",0));else if("title"==g)a[g]=m,this._refreshTitle();else if("roundCorners"==g)(a[g]=m)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==
g)a[g]=m,this.hscroll.option("steps",m);else if("virtualY"==g)a[g]=m,this.vscroll.option("steps",m);else if("freezeCols"==g)m=parseInt(m),!isNaN(m)&&0<=m&&m<=this.colModel.length-2&&(a[g]=m);else if("freezeRows"==g)m=parseInt(m),!isNaN(m)&&0<=m&&(a[g]=m);else if("resizable"==g)a[g]=m,this._refreshResizable();else if("draggable"==g)a[g]=m,this._refreshDraggable();else if("scrollModel"==g)a[g]=m;else if("dataModel"==g)m.data!==b.data&&b.dataUF&&(b.dataUF.length=0),a[g]=m;else{if("groupModel"==g)throw"use groupOption() to set groupModel options.";
"pageModel"==g?a[g]=m:"selectionModel"===g?a[g]=m:"colModel"===g||"columnTemplate"==g?(a[g]=m,this.iColModel.init()):"disabled"===g?(this._super(g,m),!0===m?this._disable():this._enable()):"numberCell"===g?(a[g]=m,this.iRefresh.decidePanes()):"strLoading"===g?(a[g]=m,this._refreshLoadingString()):"showTop"===g?(a[g]=m,this.$top.css("display",m?"":"none")):"showTitle"===g?(a[g]=m,this.$title.css("display",m?"":"none")):"showToolbar"===g?(a[g]=m,this._toolbar.widget().css("display",m?"":"none")):"toolbar"==
g?a[g]=m:"collapsible"===g?(a[g]=m,this._createCollapse()):"showBottom"===g?(a[g]=m,this.$bottom.css("display",m?"":"none")):a[g]=m}return this}};c.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},
ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},
direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:l.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},groupModel:{on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,
menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],summaryEdit:!0,refreshOnChange:!0},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},
freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},
swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};l.extend(!0,c.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});
l.widget("paramquery._pqGrid",l.ui.mouse,c);c=a._pqGrid.prototype;c.readCell=function(g,m,a,b,e){m=m.dataIndx;return a&&!1===a.isRootCell(b,e,"o")?void 0:g[m]};c.saveCell=function(g,m,a){g[m.dataIndx]=a};c._destroyResizable=function(){var g=this.element,m=g.data();(m.resizable||m.uiResizable||m["ui-resizable"])&&g.resizable("destroy")};c._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};c._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};c._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);l(window).unbind(this.eventNamespace);l(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};c.collapse=function(g){var m=this,a=this.element,b=this.options.collapsible,
e=b.$collapse.children("span"),d=function(){a.css("overflow","hidden");e.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");a.hasClass("ui-resizable")&&a.resizable("destroy");m._toolbar&&m._toolbar.disable();b.collapsed=!0;b._collapsed=!0;b.animating=!1;m._trigger("collapse")};g=g?g:{};if(b._collapsed)return!1;b.htCapture=a.height();!1===g.animate?(a.height(23),d()):(b.animating=!0,a.animate({height:"23px"},function(){d()}))};c.expand=function(g){var m=this,a=this.element,
b=this.options.collapsible,e=b.htCapture,d=b.$collapse.children("span"),c=function(){a.css("overflow","");b._collapsed=!1;b.collapsed=!1;m._refreshResizable();b.refreshAfterExpand&&m.refresh();d.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");m._toolbar&&m._toolbar.enable();b.animating=!1;m._trigger("expand")};g=g?g:{};if(!1===b._collapsed)return!1;!1===g.animate?(a.height(e),c()):(b.animating=!0,a.animate({height:e},function(){c()}))};c._createCollapse=function(){var g=
this,m=this.$top,a=this.BS_on,b=this.options.collapsible;b.$stripe||(m=l("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(m),b.$stripe=m);b.on?b.$collapse||(b.$collapse=l(a?p("collapse-down"):f("circle-triangle-n")).appendTo(b.$stripe).click(function(m){b.collapsed?g.expand():g.collapse()})):b.$collapse&&(b.$collapse.remove(),delete b.$collapse);b.collapsed&&!b._collapsed?g.collapse({animate:!1}):!b.collapsed&&b._collapsed&&g.expand({animate:!1});b.toggle?b.$toggle||(b.$toggle=l(a?p("fullscreen"):
f("arrow-4-diag")).prependTo(b.$stripe).click(function(m){g.toggle()})):b.$toggle&&(b.$toggle.remove(),delete b.$toggle)};c.toggle=function(){var g=this.options,m=g.collapsible,a=this.element,b,e=this._maxim;b=e?"min":"max";var d=l(document.body);if(!1===this._trigger("beforeToggle",null,{state:b}))return!1;"min"==b?(g=e.eleObj,m=e.docObj,this.option({height:g.height,width:g.width,maxHeight:g.maxHeight,maxWidth:g.maxWidth}),a[0].style.cssText=g.cssText,d[0].style.cssText=m.cssText,l("html").css({overflow:"visible"}),
window.scrollTo(m.scrollLeft,m.scrollTop),this._maxim=null):(g={height:g.height,width:g.width,cssText:a[0].style.cssText,maxHeight:g.maxHeight,maxWidth:g.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),a.css(l.extend({position:"fixed",left:0,top:0,margin:0},m.css)),m={scrollLeft:l(window).scrollLeft(),scrollTop:l(window).scrollTop(),cssText:d[0].style.cssText},d.css({height:0,width:0,overflow:"hidden",position:"static"}),l("html").css({overflow:"hidden"}),window.scrollTo(0,
0),this._maxim={eleObj:g,docObj:m});this._trigger("toggle",null,{state:b});this._refreshResizable();this.refresh();l(window).trigger("resize",{$grid:a,state:b})};c._mouseCapture=function(g){var m=this.options;return m.virtualX&&m.virtualY&&!m.scrollModel.smooth||!g.target?!1:l(g.target).closest(".pq-grid")[0]==this.element[0]?(g=m.swipeModel,!1==g.on||"touch"==g.on&&!l.support.touch?!1:!0):!1};c._saveDims=function(){var g=this.$tbl,m=this.$tbl_header;if(g)for(var a=0;a<g.length;a++){var b=g[a],e=
l(b);e.data("offsetHeight",Math.round(b.offsetHeight)-1);e.data("scrollWidth",Math.round(b.scrollWidth))}if(m)for(a=0;a<m.length;a++)b=m[a],g=l(b).parent(),g.data("offsetHeight",Math.round(b.offsetHeight)),g.data("scrollWidth",Math.round(b.scrollWidth))};c._mousePQUp=function(g){l(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",g,null)};c._mouseStart=function(g){this.blurEditor({force:!0});return!0};c._mouseDrag=function(g){return!1==this._trigger("mouseDrag",
g,null)?!1:!0};c._mouseStop=function(g){return!1==this._trigger("mouseStop",g,null)?!1:!0};var b,e;c.onWindowResize=function(g,m){var a=this.options,d=this.element,c=d.parent();if(m){var h=m.$grid;if(h&&(h==d||0==d.closest(h).length))return}if(c.length&&(c[0]==document.body||"fixed"==d.css("position")?(d=window.innerHeight?window.innerHeight:l(window).height(),c=l(window).width()):(d=c.height(),c=c.width()),null==b||d!=b||c!=e)&&(b=d,e=c,!(l.support.touch&&a.editModel.indices&&l(document.activeElement).is(".pq-editor-focus")))){var n=
this,a=a.autoSizeInterval,a=void 0===a?0:a;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=window.setTimeout(function(){n._refreshAfterResize();delete n.autoResizeTimeout},a)}};c._onMouseWheel=function(g){this._saveDims();var m=this.options,a=0,b=!1;g=g.originalEvent;var e=g.wheelDeltaX,d=g.wheelDeltaY,c=g.wheelDelta;if(e&&Math.abs(e)>Math.abs(d)){if("flex"==m.width)return!0;b=!0;a=e/120}else if(c){if(!this.iRefresh.vscroll)return!0;
a=c/120}else if(g.detail){if(!this.iRefresh.vscroll)return!0;a=-1*g.detail/3}a*=3;g=b?this.hscroll:this.vscroll;d=parseInt(g.option("cur_pos"));e=parseInt(g.option("num_eles"));if(!m.scrollModel.smooth&&(b&&m.virtualX||!b&&m.virtualY)){a=0<a?Math[1>a?"ceil":"floor"](a):Math[-1>a?"ceil":"floor"](a);m=d-a;0>m?m=0:m>e-1&&(m=e-1);if(m==d)return!0;g.option("cur_pos",d-a);g.scroll()}else{m=g.option("ratio");a=m-a/(e-1);1<a?a=1:0>a&&(a=0);if(m==a)return!0;g.option("ratio",a);g.drag()}return!1};c._onDblClickCell=
function(g){var a=l(g.currentTarget),b=this.getCellIndices({$td:a}),e=b.rowIndxPage,d=e+this.rowIndxOffset,b=b.colIndx;if(null!=b){if(!1==this._trigger("cellDblClick",g,{$td:a,rowIndxPage:e,rowIndx:d,colIndx:b,column:this.colModel[b],rowData:this.pdata[e]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:b,rowIndx:d})&&this.editCell({rowIndxPage:e,colIndx:b})}};c._onClickCont=function(g){};c._onClickRow=function(g){var a=l(g.currentTarget),
b=parseInt(a.attr("pq-row-indx")),e=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowClick",g,{$tr:a,rowIndxPage:b,rowIndx:e,rowData:this.pdata[b]}))return!1};c._onRightClickRow=function(g){var a=l(g.currentTarget),b=parseInt(a.attr("pq-row-indx")),e=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowRightClick",g,{$tr:a,rowIndxPage:b,rowIndx:e,rowData:this.pdata[b]}))return!1};c._onDblClickRow=function(g){var a=l(g.currentTarget),b=parseInt(a.attr("pq-row-indx")),e=this.getRowIndxOffset();
if(!1==this._trigger("rowDblClick",g,{$tr:a,rowIndxPage:b,rowIndx:b+e,rowData:this.pdata[b]}))return!1};c.getValueFromDataType=function(g,a,b){if("date"==a)return a=Date.parse(g),isNaN(a)?"":b?a:g;if("object"==a)return g;if("integer"==a)a=parseInt(g);else if("float"==a)a=parseFloat(g);else return"bool"==a?(a=l.trim(g).toLowerCase(),0==a.length?null:"true"==a||"yes"==a||"1"==a?!0:"false"==a||"no"==a||"0"==a?!1:Boolean(a)):l.trim(g);return isNaN(a)||null==a?null==g?g:null:a};var n=function(g){this.that=
g},k=n.prototype;k._isValidCell=function(g){var a=this.that,b=g.column,e=b.validations;if(!e||!e.length)return{valid:!0};var d=g.value,c=b.dataType,h=function(g){return a.getValueFromDataType(g,c,!0)};g=g.rowData;if(!g)throw"rowData required.";for(var n=0;n<e.length;n++){var k=e[n],q=k.type,f=!1,l=k.msg,v=k.value;if(!1!==k.on&&(null==d&&"function"!=typeof q?f=!1:"minLen"==q?(d=h(d),v=h(v),d.length>=v&&(f=!0)):"nonEmpty"==q?null!=d&&""!==d&&(f=!0):"maxLen"==q?(d=h(d),v=h(v),d.length<=v&&(f=!0)):"gt"==
q?(d=h(d),v=h(v),d>v&&(f=!0)):"gte"==q?(d=h(d),v=h(v),d>=v&&(f=!0)):"lt"==q?(d=h(d),v=h(v),d<v&&(f=!0)):"lte"==q?(d=h(d),v=h(v),d<=v&&(f=!0)):"neq"==q?(d=h(d),v=h(v),d!==v&&(f=!0)):"regexp"==q?(new RegExp(v)).test(d)&&(f=!0):"function"==typeof q?(v={column:b,value:d,rowData:g,msg:l},!1==q.call(a,v)?(f=!1,v.msg!=l&&(l=v.msg)):f=!0):f=!0,!f))return{valid:!1,msg:l,column:b,warn:k.warn,dataIndx:b.dataIndx,validation:k}}return{valid:!0}};k.isValidCell=function(g){var a=this.that,b=g.rowData,e=g.rowIndx,
d=g.value,c=g.valueDef,h=g.column,n=g.focusInvalid,k=a.options,q=k.bootstrap,f=g.allowInvalid,p=h.dataIndx,v=k.validation,x=k.warning,D=k.editModel,E=D.invalidClass,F=D.warnClass,D=document.activeElement;if(g.checkEditable&&!1==a.isEditableCell({rowIndx:e,dataIndx:p}))return{valid:!0};g=this._isValidCell({column:h,value:d,rowData:b});var d=g.valid,h=g.warn,H=g.msg;if(d)a.data({rowData:b,dataIndx:p,data:"pq_valid"})&&(a.removeClass({rowData:b,rowIndx:e,dataIndx:p,cls:F+" "+E}),a.removeData({rowData:b,
dataIndx:p,data:"pq_valid"}));else var v=l.extend({},h?x:v,g.validation),J=v.css,N=v.cls,L=v.icon,P=v.style;if(f||h){if(d)return{valid:!0};a.addClass({rowData:b,rowIndx:e,dataIndx:p,cls:h?F:E});a.data({rowData:b,dataIndx:p,data:{pq_valid:{css:J,icon:L,style:P,msg:H,cls:N}}});return g}if(!d){if(null==e&&(b=a.getRowIndx({rowData:b,dataUF:!0}),e=b.rowIndx,null==e||b.uf))return g.uf=b.uf,g;if(n){var O;if(!c)a.goToPage({rowIndx:e}),e={rowIndx:e,dataIndx:p},e=a.normalize(e),O=a.getCell(e),a["cell"==k.selectionModel.type?
"setSelection":"scrollCell"](e),a.focus(e);else if(l(D).hasClass("pq-editor-focus")&&(c=k.editModel.indices)){k=c.rowIndx;c=c.dataIndx;if(null!=e&&e!=k)throw"incorrect usage of isValid rowIndx: "+e;if(p!=c)throw"incorrect usage of isValid dataIndx: "+p;a.editCell({rowIndx:k,dataIndx:p})}var K;if(O||(K=a.getEditCell())&&K.$cell){a=O||K.$cell;a.attr("title",H);O="tooltip";K="open";q.on&&q.tooltip&&(O=q.tooltip,K="show");try{a[O]("destroy")}catch(M){}a[O]({trigger:"manual",position:{my:"left center+5",
at:"right center"},content:function(){return(""==L?"":"<span class='ui-icon "+L+" pq-tooltip-icon'></span>")+H},open:function(g,a){var m=a.tooltip;N&&m.addClass(N);if(P){var b=m.attr("style");m.attr("style",b+";"+P)}J&&m.tooltip.css(J)}})[O](K)}}return g}if(c&&(K=a.getEditCell())&&K.$cell){a=K.$cell;a.removeAttr("title");try{a.tooltip("destroy")}catch(G){}}return{valid:!0}};c.isValid=function(g){return this.iIsValid.isValid(g)};k.isValid=function(g){g=g||{};var a=this.that,b=g.allowInvalid,e=g.focusInvalid,
d=g.checkEditable,b=null==b?!1:b,c=g.dataIndx;if(null!=c){var h=a.columns[c],n=g.rowData||a.getRowData(g),k=g.hasOwnProperty("value"),a=k?g.value:n[c],a=this.isValidCell({rowData:n,checkEditable:d,rowIndx:g.rowIndx,value:a,valueDef:k,column:h,allowInvalid:b,focusInvalid:e});return a.valid||a.warn?{valid:!0}:a}if(null!=g.rowIndx||null!=g.rowIndxPage||null!=g.rowData)for(var n=g.rowData||a.getRowData(g),q=a.colModel,k=[],f=0,l=q.length;f<l;f++){if(h=q[f],!h.hidden&&(c=h.dataIndx,a=n[c],a=this.isValidCell({rowData:n,
value:a,column:h,rowIndx:g.rowIndx,checkEditable:d,allowInvalid:b,focusInvalid:e}),!a.valid&&!a.warn))if(b)k.push({rowData:n,dataIndx:c,column:h});else return a}else{g=g.data?g.data:a.options.dataModel.data;k=[];if(!g)return null;f=0;for(l=g.length;f<l;f++){n=g[f];if(d&&(h=this.getRowIndx({rowData:n}).rowIndx,null==h||!1==a.isEditableRow({rowData:n,rowIndx:h})))continue;n=this.isValid({rowData:n,rowIndx:h,checkEditable:d,allowInvalid:b,focusInvalid:e});c=n.cells;if(!1===b){if(!n.valid)return n}else c&&
c.length&&(k=k.concat(c))}}return b&&k.length?{cells:k,valid:!1}:{valid:!0}};c.isValidChange=function(g){g=g||{};var a=this.getChanges(),a=a.updateList.concat(a.addList);g.data=a;return this.isValid(g)};c.isEditableRow=function(g){var a=this.options.editable;return null!=a?"function"==typeof a?a.call(this,this.normalize(g)):a:!0};c.isEditableCell=function(g){g=this.normalize(g);var a=g.column,b=a.editable;return g.checkVisible&&a.hidden?!1:null!=b?"function"==typeof b?b.call(this,g):b:!0};c._onContMouseDown=
function(g){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",g,null))return!1;var a=l(g.target);g=a.closest(".pq-grid-cell,.pq-grid-number-cell");a=a.closest(".pq-grid-row");g.length||a.length||(g=this.$cont[0],g.setAttribute("tabindex",0),g.focus());return!0};c._onCellMouseDown=function(g){var a=l(g.currentTarget),b=this.getCellIndices({$td:a});if(null!=b.rowIndx)return b=this.iMerge.getRootCell(b.rowIndx,b.colIndx,"o"),b=this.normalize(b),b.$td=a,!1==this._trigger("cellMouseDown",
g,b)?!1:!0};c._onRowMouseDown=function(g){var a=l(g.currentTarget),b=this.getRowIndx({$tr:a});b.$tr=a;return!1==this._trigger("rowMouseDown",g,b)?!1:!0};c._onCellMouseEnter=function(g,a){var b=this.options,e=this.getCellIndices({$td:a});if(null!=e.rowIndx&&null!=e.colIndx){if(!1===this._trigger("cellMouseEnter",g,e))return!1;"cell"==b.hoverMode&&this.highlightCell(a);return!0}};c._onRowMouseEnter=function(g,a){var b=this.options,e=this.getRowIndx({$tr:a}),d=e.rowIndxPage;if(!1===this._trigger("rowMouseEnter",
g,e))return!1;"row"==b.hoverMode&&this.highlightRow(d);return!0};c._onCellMouseLeave=function(g,a){"cell"==this.options.hoverMode&&this.unHighlightCell(a);return!0};c._onRowMouseLeave=function(g,a){var b=this.getRowIndx({$tr:a}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(b);return!0};c.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};c.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+
this.eventNamespace,function(g){if(g.target){var a=l(g.target);if(a.is("input,textarea,select")||a.closest(".pq-native-select").length)return!0;g.preventDefault()}})};c._onClickCell=function(g){var a=this.options.editModel,b=l(g.currentTarget),e=this.getCellIndices({$td:b}),e=this.iMerge.getRootCell(e.rowIndx,e.colIndx,"o"),e=this.normalize(e),d=e.rowIndx,c=e.colIndx;e.$td=b;e.evt=g;if(!1==this._trigger("cellClick",g,e))return!1;null==c||0>c||1==a.clicksToEdit&&this.isEditableRow({rowIndx:d})&&this.isEditableCell({colIndx:c,
rowIndx:d})&&this.editCell(e)};c._onRightClickCell=function(g){var a=l(g.currentTarget),b=this.getCellIndices({$td:a}),e=b.rowIndxPage,d=e+this.rowIndxOffset,b=b.colIndx,c=this.colModel;if(null!=b&&(c=c[b],!1==this._trigger("cellRightClick",g,{$td:a,rowIndxPage:e,rowIndx:d,colIndx:b,dataIndx:c.dataIndx,column:c,rowData:this.pdata[e]})))return!1};c.highlightCell=function(g){g.addClass("pq-grid-cell-hover ui-state-hover")};c.unHighlightCell=function(g){g.removeClass("pq-grid-cell-hover ui-state-hover")};
c.highlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.addClass("pq-grid-row-hover ui-state-hover")};c.unHighlightRow=function(g){isNaN(g)||(g=this.getRow({rowIndxPage:g}))&&g.removeClass("pq-grid-row-hover ui-state-hover")};c._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};c._findCellFromEvt=function(g){g=l(g.target).closest(".pq-grid-cell");if(null==g||0==g.length)return{rowIndxPage:null,colIndx:null,$td:null};
var a=this.getCellIndices({$td:g});a.$td=g;return a};c._initPager=function(){var g=this,a=g.options,b=a.pageModel;b.type&&(a={bootstrap:a.bootstrap,change:function(a,b){g.blurEditor({force:!0});var m=g.options.pageModel;void 0!=b.curPage&&(m.prevPage=m.curPage,m.curPage=b.curPage);void 0!=b.rPP&&(m.rPP=b.rPP);"remote"==m.type?g.remoteRequest({callback:function(){g._onDataAvailable({apply:!0,header:!1})}}):g.refreshView({header:!1,source:"pager"})},refresh:function(a){g.refreshDataAndView()}},a=l.extend(a,
b),this.pagerW=pq.pager(b.appendTo?b.appendTo:this.$footer,a))};c.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=l("<div class='pq-loading'></div>").appendTo(this.element);l(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};c._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};
c.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};c.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};c.refreshDataFromDataModel=function(g){g=g||{};var a=this.options,b=a.pageModel,e=a.dataModel.data,d,c=b.type;d=this._queueATriggers;for(var h in d){var n=d[h];delete d[h];this._trigger(h,n.evt,n.ui)}this._trigger("beforeRefreshData",null,{});this.rowIndxOffset=
0;"local"==c?(b.totalRecords=e.length,b.totalPages=a=Math.ceil(e.length/b.rPP),b.curPage>a&&(b.curPage=a),a&&!b.curPage&&(b.curPage=1),a=(b.curPage-1)*b.rPP,d=b.curPage*b.rPP,d>e.length&&(d=e.length),this.pdata=e.slice(a,d)):"remote"==c?(b.totalPages=a=Math.ceil(b.totalRecords/b.rPP),b.curPage>a&&(b.curPage=a),a&&!b.curPage&&(b.curPage=1),d=b.rPP,d>e.length&&(d=e.length),this.pdata=e.slice(0,d)):this.pdata=a.backwardCompat?e.slice(0):e;if("local"==c||"remote"==c)this.rowIndxOffset=b.rPP*(b.curPage-
1);this._trigger("dataReady",null,{source:g.source})};c.getQueryStringCRUD=function(){return""};c.remoteRequest=function(a){this.loading&&this.xhr.abort();a=a||{};var b=this,e="",d="",c=this.options,h=!1,n=this.colModel,k=c.dataModel,q=c.sortModel,f=c.filterModel,p=c.pageModel;if("function"==typeof k.getUrl)(c=k.getUrl.call(this,{colModel:n,dataModel:k,sortModel:q,groupModel:c.groupModel,pageModel:p,filterModel:f}))&&c.url&&(e=c.url),c&&c.data&&(d=c.data);else if("string"==typeof k.url){var e=k.url,
d={},c={},B={};"remote"==q.type&&(a.initBySort||this.sort({initByRemote:!0}),(q=this.iSort.getQueryStringSort())&&(d={pq_sort:q}));"remote"==p.type&&(B={pq_curpage:p.curPage,pq_rpp:p.rPP});"local"!=f.type&&(q=this.iFilterData.getQueryStringFilter())&&(h=!0,c={pq_filter:q});var q=k.postData,v=k.postDataOnce;q&&"function"==typeof q&&(q=q.call(this,{colModel:n,dataModel:k}));d=l.extend({pq_datatype:k.dataType},c,B,d,q,v)}e&&(this.loading=!0,this.showLoading(),this.xhr=l.ajax({url:e,dataType:k.dataType,
async:null==k.async?!0:k.async,cache:k.cache,contentType:k.contentType,type:k.method,data:d,beforeSend:function(a,g){if("function"==typeof k.beforeSend)return k.beforeSend.call(b,a,g)},success:function(e,d,c){"function"==typeof k.getData&&(e=k.getData.call(b,e,d,c));k.data=e.data;"remote"==p.type&&(e.curPage&&(p.curPage=e.curPage),e.totalRecords&&(p.totalRecords=e.totalRecords));b.hideLoading();b.loading=!1;b._trigger("load",null,{dataModel:k,colModel:n});a.callback&&a.callback();h&&(b._queueATriggers.filter=
{ui:{type:"remote",filterModel:f}})},error:function(a,g,e){b.hideLoading();b.loading=!1;if("function"==typeof k.error)k.error.call(b,a,g,e);else if("abort"!=e)throw"Error : "+e;}}))};c._refreshTitle=function(){this.$title.html(this.options.title)};c._destroyDraggable=function(){var a=this.element,b=a.parent(".pq-wrapper");b.length&&b.data("draggable")&&(b.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),a.unwrap(".pq-wrapper"))};c._refreshDraggable=function(){var a=this.element,
b=this.$title;this.options.draggable?(b.addClass("pq-draggable pq-no-capture"),a.parent(".pq-wrapper").length||a.wrap("<div class='pq-wrapper' />"),a.parent(".pq-wrapper").draggable({handle:b})):this._destroyDraggable()};c._refreshResizable=function(){var a=this,b=this.element,e=this.options,d=-1<(e.width+"").indexOf("%"),c=-1<(e.height+"").indexOf("%"),h="auto"==e.width,n="flex"==e.width,k="flex"==e.height;if(!e.resizable||(k||c)&&(n||d||h))this._destroyResizable();else{var q="e,s,se";if(k||c)q=
"e";else if(n||d||h)q="s";d=!0;b.hasClass("ui-resizable")&&(c=b.resizable("option","handles"),q==c?d=!1:this._destroyResizable());d&&b.resizable({helper:"ui-state-default",handles:q,minWidth:e.minWidth,minHeight:e.minHeight?e.minHeight:100,delay:0,start:function(a,g){l(g.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(a,g){},stop:function(b,m){var d=a.element,c=d[0],h=e.width,n=e.height,k=-1<(h+"").indexOf("%"),q=-1<(n+"").indexOf("%"),s=!1;c.style.width=
c.offsetWidth+3+"px";c.style.height=c.offsetHeight+3+"px";q||"flex"==n||(s=!0,e.height=c.offsetHeight);k||"auto"==h||"flex"==h||(s=!0,e.width=c.offsetWidth);a.refresh();d.css("position","relative");s&&l(window).trigger("resize")}})}};c._refreshAfterResize=function(){var a=this.options,b=a.width,e=a.height,a=-1!=(b+"").indexOf("%")?!0:!1,b="auto"===b,e=-1!=(e+"").indexOf("%")?!0:!1;(a||b||e)&&this.refresh()};c.refresh=function(a){this.iRefresh.refresh(a)};c.refreshView=function(a){null!=this.options.editModel.indices&&
this.blurEditor({force:!0});this.refreshDataFromDataModel(a);this.refresh(a)};c._refreshPager=function(){var a=this.options,b=a.pageModel,e=b.rPP,d=b.totalRecords;b.type?(b=a.pageModel,this.pagerW||this._initPager(),this.pagerW.option(b),d>e?this.$bottom.css("display",""):a.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),a.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};c.getInstance=function(){return{grid:this}};
c.refreshDataAndView=function(a){if("remote"==this.options.dataModel.location){var b=this;this.remoteRequest({callback:function(){b._onDataAvailable(a)}})}else this._onDataAvailable(a)};c.getColIndx=function(a){var b=a.dataIndx;a=a.column;var e;if(a)e=!0;else if(void 0===b)throw"dataIndx / column NA";var d=this.colModel,c=d.length;if(e)for(b=0;b<c;b++){if(d[b]==a)return b}else if(b=this.colIndxs[b],null!=b)return b;return-1};c.getColumn=function(a){if(null==a.dataIndx)throw"dataIndx N/A";return this.columns[a.dataIndx]};
c._generateCellRowOutline=function(){var a=this.options,b=a.editModel;if(this.$div_focus){if(a.debug)throw"this.$div_focus already present assert failed";}else a=this.element,b.inline&&(a=this.getCell(b.indices),a.css("padding",0).empty()),this.$div_focus=l("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(a),this.$div_focus.css("zIndex",a.zIndex()+5),b=l.extend({all:!0},b.indices),b=this.getCell(b),b.css("height",b[0].offsetHeight),b.empty(),this.refreshEditorPos()};
c._removeEditOutline=function(a){if(this.$div_focus){a=this.$div_focus.find(".pq-editor-focus");a.hasClass("hasDatepicker")&&a.datepicker("hide").datepicker("destroy");if(a[0]==document.activeElement){var b=this._blurEditMode;this._blurEditMode=!0;a.blur();this._blurEditMode=b}this.$div_focus.remove();delete this.$div_focus;a=this.options.editModel;b=l.extend({},a.indices);a.indices=null;b.rowData=void 0;this.refreshCell(b)}};c.refreshEditorPos=function(){var a=this.options.editModel,b=a.cellBorderWidth,
e=this.$div_focus,d=this.getCell(a.indices);if(!d||!d.length)return!1;var a=d[0].offsetWidth,c=d[0].offsetHeight,h=this.element.offset(),d=d.offset();e.css({height:c,width:a-1,borderWidth:b,left:d.left-h.left-1,top:d.top-h.top-1})};c.setEditorPosTimer=function(){var a=this,b=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){b.editModel.indices&&a.refreshEditorPos()},
200)};c.get$Tbl=function(a,b){var e=this.$tbl,d=[];if(e&&e.length){var c=this.pqpanes,h=this.options,n=h.freezeRows,h=h.freezeCols;c.h&&c.v?null==b?a>=n?d.push(e[2],e[3]):d.push(e[0],e[1]):d=b>=h&&a>=n?e[3]:b<h&&a>=n?e[2]:b>=h&&a<n?e[1]:e[0]:d=c.v?null==b?e:b>=h?e[1]:e[0]:c.h?a>=n?e[1]:e[0]:e[0];if(d)return l(d)}};c.scrollCell=function(a){this.scrollRow(a);this.scrollColumn(a)};c.scrollY=function(a){this.vscroll.option("cur_pos",a);this.vscroll.scroll()};c.scrollRow=function(a){var b=this.options;
a=this.normalize(a);var e=a.rowIndxPage,d=a.rowData;if(!this.pdata||e>=this.pdata.length||!d||d.pq_hidden)return!1;b.virtualY?this._scrollRowVirtual(a):this.iMouseSelection.scrollRowNonVirtual(a)};c._scrollRowVirtual=function(a){var b=this.options,e=a.rowIndxPage,d=this.iHierarchy?!0:!1,c=a.rowIndx;a=this.vscroll;var h=this.scrollCurPos,e=null==e?c-this.rowIndxOffset:e,c=parseInt(b.freezeRows);if(!(e<c)&&(b=this._calcCurPosFromRowIndxPage(e),null!=b)){b<h&&(a.option("cur_pos",b),a.scroll());var n=
this.get$Tbl(e);if(!n||!n.length)return null;var k=n.children("tbody").children("tr[pq-row-indx="+e+"]"),q=e=k.last();1<k.length&&(q=k.first());var f=e[0],k=parseInt(n.css("marginTop"));if(void 0==f)a.option("cur_pos",b),a.scroll();else{var f=f.offsetTop+f.offsetHeight,l=this.$cont[0].offsetHeight,p=this._getSBHeight(),q=q.prev("tr");if(!q.hasClass("pq-row-hidden")&&!q.hasClass("pq-last-frozen-row")&&f>l-p-k){q=f-(l-p-k);k=n.children().children("tr");f=n=0;c?(c=k.filter("tr.pq-last-frozen-row").last().next(),
0==c.length&&(c=k.filter("tr.pq-row-hidden").next())):c=k.filter("tr.pq-row-hidden").next();do{if(!c.length)break;n+=c[0].offsetHeight;if(c[0]==e[0])break;else if(d&&!1!=c.hasClass("pq-detail-child")||f++,n>=q)break;c=c.next()}while(1);d=h+f;d>b&&(d=b);h=a.option("num_eles");h<d+1&&(h=d+1);a.option({num_eles:h,cur_pos:d});a.scroll()}}}};c.blurEditor=function(a){if(this.$div_focus){var b=this.$div_focus.find(".pq-editor-focus");if(a&&a.blurIfFocus)document.activeElement==b[0]&&b.blur();else return b.triggerHandler("blur",
a)}};c._scrollColumnVirtual=function(a){var b=a.colIndx,e=this.hscroll,b=null==b?this.colIndxs[a.dataIndx]:b;a=this.options.freezeCols;var d=this._calcRightEdgeCol(b).width,c=this.iRefresh.getEContWd();if(d>c){for(var d=this.calcWidthCols(-1,b+1)-c,c=this.colModel,h=c.length,n=0,k=0,q=a;q<h;q++){var f=c[q];f.hidden||(n+=f.outerWidth);if(q==b){k=q-a-this._calcNumHiddenUnFrozens(q);break}else if(n>=d){k=q-a-this._calcNumHiddenUnFrozens(q)+1;break}}e.option("cur_pos",k);e.scroll();return!0}return b>=
a&&b<this.initH?(b=b-a-this._calcNumHiddenUnFrozens(b),e.option("cur_pos",b),e.scroll(),!0):!1};c.scrollColumn=function(a){var b=this.options;return"flex"!==b.width||b.maxWidth?b.virtualX?this._scrollColumnVirtual(a):this.iMouseSelection.scrollColumnNonVirtual(a):!1};c.selection=function(a){if(a){var b=a.method,e,d=a.type;"row"==d?e=this.iRows[b](a):"cell"==d&&(e=this.iCells[b](a));if("add"==b||"remove"==b||"removeAll"==b)this.iSelection.dirty=!0,this.iSelection._trigger();return e}a=this.iSelection;
a.isDirty()&&a.refresh();return a};c.goToPage=function(a){var b=this.options.pageModel;if("local"==b.type||"remote"==b.type){var e=a.rowIndx,d=b.rPP;a=null==a.page?Math.ceil((e+1)/d):a.page;a!=b.curPage&&(b.curPage=a,"local"==b.type?this.refreshView():this.refreshDataAndView())}};c.setSelection=function(a){if(null==a)return this.iSelection.removeAll(),!0;var b=this.pdata;if(!b||!b.length)return!1;a=this.normalize(a);var b=a.rowIndx,e=a.rowIndxPage,d=a.colIndx;a.rowData&&null==b&&(e=this.getRowIndx(a),
a.rowIndx=b=e.rowIndx,a.rowIndxPage=e.rowIndxPage);if(null==b||0>b||0>d||d>=this.colModel.length)return!1;this.goToPage(a);e=b-this.rowIndxOffset;this.scrollRow({rowIndxPage:e});null==d?this.range({r1:b}).select():(this.scrollColumn({colIndx:d}),this.range({r1:b,c1:d}).select());!1!==a.focus&&this.focus({rowIndxPage:e,colIndx:null==d?this.getFirstVisibleCI():d})};c.getColModel=function(){return this.colModel};c.saveEditCell=function(a){var b=this.options,e=b.editModel;if(!e.indices)return null;var d=
l.extend({},e.indices);a=a?a.evt:null;var c=d.rowIndxPage,e=c+this.rowIndxOffset,h=this.colModel[d.colIndx],d=h.dataIndx,n=this.pdata[c],k=b.dataModel,q;if(null==n)return null;if(null!=c){b=this.getEditCellData();if(l.isPlainObject(b)){q={};for(var f in b)q[f]=n[f]}else q=this.readCell(n,h);"<br>"==b&&(b="");null==q&&""===b&&(b=null);f={rowIndx:e,rowIndxPage:c,dataIndx:d,column:h,newVal:b,value:b,oldVal:q,rowData:n,dataModel:k};if(!1===this._trigger("cellBeforeSave",a,f))return!1;c={};h=!1;l.isPlainObject(b)?
(c=b,h=!0):c[d]=b;if(!1===this.updateRow({row:c,rowIndx:e,refresh:h,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",a,f);return!0}};c._addInvalid=function(a){};c._digestData=function(a){if(!1===this._trigger("beforeValidate",null,a))return!1;var b=this.options,e=b.editModel,d=b.dataModel,c=d.data,h=b.colModel,n=b.pageModel,k=b.historyModel,q=a.validate,q=null==q?e.validate:q,f="remote"==n.type,l=a.allowInvalid,l=null==l?e.allowInvalid:l,p=b.trackModel,e=a.track,e=null==
e?null==b.track?p.on:b.track:e,v=a.history,v=null==v?k.on:v,x=this.iHistory,k=this.iUCData,D=a.checkEditable,D=null==D?!0:D,E=a.checkEditableAdd,E=null==E?D:E,p=this.saveCell,F=this.columns,H=this.colIndxs,J=a.source,N=this.rowIndxOffset,L=this.getValueFromDataType,P=a.rowList,O=P.length;c||(c=b.dataModel.data=[]);for(var K=[],M=0;M<O;M++){var G=P[M],I=G.newRow,T=G.rowData,Q=G.type,W=G.checkEditable,R=G.rowIndx,X=G.oldRow;null==W&&("update"==Q?W=D:"add"==Q&&(W=E));if("update"==Q){if(!X)throw"oldRow required while update";
if(W&&!0!==b.editable&&!1===this.isEditableRow({rowIndx:R,rowData:T}))continue}else if("delete"==Q){K.push(G);continue}if("add"==Q)for(var U=0,Y=h.length;U<Y;U++){var V=h[U],S=V.dataIndx;I[S]=I[S]}for(S in I)if(V=F[S],U=H[S],V)if(W&&null!=V.editable&&!1===this.isEditableCell({rowIndx:R,colIndx:U,dataIndx:S}))delete I[S];else{var Z=V.dataType,U=L(I[S],Z),Y=X?X[S]:void 0,Y=void 0!==Y?L(Y,Z):void 0;I[S]=U;if(q&&V.validations)if("edit"==J&&!1===l){if(V=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:R,
value:U}),!1==V.valid&&!V.warn)return!1}else V=this.iIsValid.isValidCell({column:V,rowData:"add"==Q?I:T,allowInvalid:l,value:U}),!1===V.valid&&(!1!==l||V.warn||delete I[S]);"update"==Q&&U===Y&&(delete I[S],X&&delete X[S])}if(I)if("update"==Q)for(S in I){K.push(G);break}else K.push(G)}P=a.rowList=K;O=P.length;if(!O)return"edit"==J?null:!1;v&&(x.increment(),x.push({rowList:P}));for(M=0;M<O;M++)if(G=P[M],Q=G.type,I=G.newRow,R=G.rowIndx,b=G.rowIndxPage,T=G.rowData,"update"==Q)for(S in e&&k.update({rowData:T,
row:I,refresh:!1}),I)V=F[S],U=I[S],p(T,V,U);else if("add"==Q)e&&k.add({rowData:I}),null==R&&null==b?c.push(I):(b=R-N,b=f?b:R,c.splice(b,0,I)),f&&n.totalRecords++;else if("delete"==Q){b=this.getRowIndx({rowData:T,dataUF:!0});h=b.uf;R=b.rowIndx;if(e)k["delete"]({rowIndx:R,rowData:T});b=R-N;b=f?b:R;h?d.dataUF.splice(R,1):(b=c.splice(b,1))&&b.length&&f&&n.totalRecords--}this._trigger("change",null,a);return!0};c.refreshColumn=function(a){a=this.normalize(a);var b=this.initV,e=this.finalV,d=this.options.freezeRows,
c=a.colIndx,h=a.dataIndx,n=a.column;a.skip=!0;for(var k=0;k<=e;k++)k<b&&k>=d&&(k=b),a.rowIndxPage=k,this.refreshCell(a);this._trigger("refreshColumn",null,{column:n,colIndx:c,dataIndx:h});this.iRefresh.softRefresh()};c.refreshCell=function(a){a=this.normalize(a);if(this.pdata){var b=a.skip,e=a.rowIndx,d=a.rowIndxPage,c=a.colIndx,h=this.iMerge;if(a.rowData){var n=this.getCell({all:!0,rowIndxPage:d,colIndx:c});if(n&&0<n.length){var k=a;h.ismergedCell(e,c)&&(k=h.getRootCell(e,c,"a"));var e=this.iGenerateView.renderCell(k),
q;e&&(n.replaceWith(e),(q=this._focusElement)&&q.rowIndxPage==d&&this.focus(),b||(this._trigger("refreshCell",null,a),this.iRefresh.softRefresh()))}}}};c.refreshRow=function(a){a=this.normalize(a);if(this.pdata){var b=a.rowIndx,e=a.rowIndxPage,d=this.options,c=d.freezeRows,h=a.rowData;if(!h||h.pq_hidden||e>this.finalV||e<this.initV&&e>=c)return null;var n=this.getRow({all:!0,rowIndxPage:e}),k,q=[];this.iGenerateView.refreshRow(e,q);q=q.join("");if(n&&n.length)n.replaceWith(q);else if(d.virtualY)if(e==
this.finalV)this.$tbl.append(q);else if(e==this.initV)for(d=this.$tbl,n=0;n<d.length;n++)l(d[n]).children("tbody").children(c?".pq-last-frozen-row":"tr:first").after(q);else throw"refreshRow > rip not found";else return!1;(k=this._focusElement)&&k.rowIndxPage==e&&this.focus();this._trigger("refreshRow",null,{rowData:h,rowIndx:b,rowIndxPage:e});!1!==a.refresh&&this.iRefresh.softRefresh();return!0}};c.quitEditMode=function(a){if(!this._quitEditMode){var b=!1,e=!1,d=!1,c=this.options.editModel,h=c.indices,
n=void 0;this._quitEditMode=!0;a&&(b=a.old,e=a.silent,d=a.fireOnly,n=a.evt);h&&(e||b||this._trigger("editorEnd",n,h),d||(this._removeEditOutline(a),c.indices=null));this._quitEditMode=null}};c.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};c.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};c.getRowIndxOffset=function(){return this.rowIndxOffset};c.getEditCell=function(){var a=this.options.editModel;if(a.indices){var a=
this.getCell(a.indices),b=this.$div_focus.children(".pq-editor-inner"),e=b.find(".pq-editor-focus");return{$td:a,$cell:b,$editor:e}}return{}};c.editCell=function(a){a=this.normalize(a);var b=this.iMerge,e=a.rowIndx,d=a.colIndx;if(b.ismergedCell(e,d)&&(b=b.getRootCell(e,d,"o"),b.rowIndx!=a.rowIndx||b.colIndx!=a.colIndx))return!1;this.scrollRow(a);this.scrollColumn(a);if((b=this.getCell(a))&&b.length)return this._editCell(a)};c.getFirstEditableColIndx=function(a){if(null==a.rowIndx)throw"rowIndx NA";
if(!this.isEditableRow(a))return-1;for(var b=this.colModel,e=0;e<b.length;e++)if(a.colIndx=e,this.isEditableCell(a)&&!b[e].hidden)return e;return-1};c.editFirstCellInRow=function(a){var b=this.rowIndxOffset,e=a.rowIndx;a=a.rowIndxPage;e=null==e?a+b:e;a=null==a?e-b:a;b=this.getFirstEditableColIndx({rowIndx:e});-1!=b&&this.editCell({rowIndxPage:a,colIndx:b})};c._editCell=function(b){var e=this.normalize(b),d=this;b=e.evt;var c=e.rowIndxPage,h=e.colIndx,n=d.pdata;if(!n||c>=n.length)return!1;var k=this.options,
q=k.editModel,n=n[c],f=e.rowIndx,p=this.colModel[h],A=p.dataIndx,B=d.readCell(n,p),v={rowIndx:f,rowIndxPage:c,cellData:B,rowData:n,dataIndx:A,colIndx:h,column:p},x=p.editor,x="function"==typeof x?x.call(this,v):x;void 0===x&&"function"==typeof k.geditor&&(x=k.geditor.call(this,v));if(!1!==x){x&&x.getData&&(q._getData=x.getData);var D=k.editor,E=x?l.extend({},D,x):D,k=!1;if(q.indices){x=q.indices;if(x.rowIndxPage==c&&x.colIndx==h){this.refreshEditorPos();var F=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){F.focus()},0);return!1}if(!1===this.blurEditor({evt:b}))return!1;this.quitEditMode({evt:b})}q.indices={rowIndxPage:c,rowIndx:f,colIndx:h,column:p,dataIndx:A};this._generateCellRowOutline();x=this.$div_focus.children(".pq-editor-inner");"right"==p.align?x.addClass("pq-align-right"):"center"==p.align?x.addClass("pq-align-center"):x.addClass("pq-align-left");v.$cell=x;var H,J=E.type,e=null==e.select?E.select:e.select,N=E.init,L=E.valueIndx,P=E.dataMap,O=E.mapIndices,O=O?
O:{},K=E.cls||"",K="function"===typeof K?K.call(this,v):K;H="pq-editor-focus "+K;var K=H+" pq-cell-editor ",M=E.attr||"",M="function"===typeof M?M.call(this,v):M,G=E.style||"",G=(G="function"===typeof G?G.call(this,v):G)?"style='"+G+"'":"";v.cls=H;v.attr=M;"function"==typeof J&&(H=J.call(this,v))&&(J=H);D._type=J;"checkbox"==J?(E=E.subtype,x.html("<input "+(B?"checked='checked'":"")+" class='"+K+"' "+M+" "+G+" type=checkbox name='"+A+"' />"),D=x.children("input"),"triple"==E&&(D.pqval({val:B}),x.click(function(a){l(this).children("input").pqval({incr:!0})}))):
"textarea"==J||"select"==J||"textbox"==J?("textarea"==J?H="<textarea class='"+K+"' "+M+" "+G+" name='"+A+"' ></textarea>":"select"==J?(D=E.options||[],"function"===typeof D&&(D=D.call(this,v)),K=[M," class='",K,"' ",G," name='",A,"'"].join(""),H=a.select({options:D,attr:K,prepend:E.prepend,labelIndx:E.labelIndx,valueIndx:L,groupIndx:E.groupIndx,dataMap:P})):H="<input class='"+K+"' "+M+" "+G+" type=text name='"+A+"' />",l(H).appendTo(x).val("select"==J&&null!=L&&(O[L]||this.columns[L])?O[L]?n[O[L]]:
n[L]:B)):J&&"contenteditable"!=J||(x.html("<div contenteditable='true' tabindx='0' "+G+" "+M+" class='"+K+"'></div>"),x.children().html(B),k=!0);"function"==typeof N&&N.call(this,v);var d=this,F=x.children(".pq-editor-focus"),I=q.filterKeys;(B=p.editModel)&&void 0!==B.filterKeys&&(I=B.filterKeys);var T={$cell:x,$editor:F,dataIndx:A,column:p,colIndx:h,rowIndx:f,rowIndxPage:c,rowData:n};q.indices=T;F.data({FK:I}).on("click",function(a){l(this).focus()}).on("keydown",function(a){d.iKeyNav._keyDownInEdit(a)}).on("keypress",
function(a){return d.iKeyNav._keyPressInEdit(a,{FK:I})}).on("keyup",function(a){return d.iKeyNav._keyUpInEdit(a,{FK:I})}).on("blur",function(a,b){var g=d.options.editModel,e=g.onBlur,m="save"==e,c="validate"==e,h=g.cancelBlurCls,n=b?b.force:!1;if(!d._quitEditMode&&!d._blurEditMode&&g.indices){g=l(a.target);if(!n){if(!1===d._trigger("editorBlur",a,T)||!e||h&&g.hasClass(h))return;if(g.hasClass("hasDatepicker")){if(g.datepicker("widget").is(":visible"))return!1}else if(g.hasClass("ui-autocomplete-input")){if(g.autocomplete("widget").is(":visible"))return}else if(g.hasClass("ui-multiselect")){if(l(".ui-multiselect-menu").is(":visible")||
l(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(g.hasClass("pq-select-button")&&(l(".pq-select-menu").is(":visible")||l(document.activeElement).closest(".pq-select-menu").length))return}d._blurEditMode=!0;if(!d.saveEditCell({evt:a,silent:n||m||!c})&&!n&&c)return d._deleteBlurEditMode(),!1;d.quitEditMode({evt:a});d._deleteBlurEditMode()}}).on("focus",function(a){d._trigger("editorFocus",a,T)});d._trigger("editorBegin",b,T);F.focus();window.setTimeout(function(){!1===
l(document.activeElement).hasClass("pq-editor-focus")&&(d.element?d.element.find(".pq-editor-focus"):l()).focus()},0);if(e)if(k)try{var Q=F[0],W=document.createRange();W.selectNodeContents(Q);var R=window.getSelection();R.removeAllRanges();R.addRange(W)}catch(X){}else F.select()}};c._deleteBlurEditMode=function(a){var b=this;a=a?a:{};b._blurEditMode&&(a.timer?window.setTimeout(function(){delete b._blurEditMode},0):delete b._blurEditMode)};c.getRow=function(a){var b=this.normalize(a);a=b.rowIndxPage;
var b=b.all?this.$tbl:this.get$Tbl(a),e=l();if(b&&b.length){var d=b.children("tbody");null!=a&&(e=d.children("tr[pq-row-indx="+a+"]"),e.length>b.length&&(e=e.filter(".pq-detail-master")))}return e};c.getCell=function(a){var b=a.all,e=this.options,d=this.normalize(a);a=d.rowIndxPage;var c=d.rowIndx,h=d.colIndx,n=this.iMerge;if(n.ismergedCell(c,h)){e=n.getRootCell(c,h,"a");c=n.getRootCell(c,h,"o");if(!(a===c.rowIndxPage&&h===c.colIndx||a===e.rowIndxPage&&h===e.colIndx))return l();a=e.rowIndxPage;h=
c.colIndx}else if(a>=e.freezeRows&&(a<this.initV||a>this.finalV)||h>=e.freezeCols&&(h<this.initH||h>this.finalH)||!d.rowData||!d.column||d.rowData.pq_hidden||d.column.hidden)return l();return(b=b?this.$tbl:this.get$Tbl(a,h))&&b.length?b.children().children("tr[pq-row-indx="+a+"]").children("[pq-col-indx="+h+"]"):l()};c.getCellHeader=function(a){var b=a.colIndx;a=a.dataIndx;b=null==b?this.colIndxs[a]:b;a=this.$tbl_header;var e=this.options.freezeCols;return a?(1<a.length&&(a=b>=e?l(a[1]):l(a[0])),
b=a.find("[pq-col-indx="+b+"].pq-grid-col-leaf")):l()};c.getEditorIndices=function(){var a=this.options.editModel.indices;return a?l.extend({},a):null};c.getEditCellData=function(){var a=this.options,b=a.editModel,e=b.indices;if(!e)return null;var d=e.colIndx,c=e.rowIndxPage,h=e.rowIndx,n=this.colModel[d],k=n.editor,q=a.editor,a=k?l.extend({},q,k):q,f=a.valueIndx,p=a.labelIndx,k=(k=a.mapIndices)?k:{},B=n.dataIndx,v=this.$div_focus.children(".pq-editor-inner"),x,D=b._getData||a.getData;b._getData=
void 0;if("function"==typeof D)x=D.call(this,{$cell:v,rowData:e.rowData,dataIndx:B,rowIndx:h,rowIndxPage:c,column:n,colIndx:d});else if(b=q._type,"checkbox"==b)x=v.children(),x="triple"==a.subtype?x.pqval():x.is(":checked")?!0:!1;else if("contenteditable"==b)x=v.children().html();else if((e=v.find('*[name="'+B+'"]'))&&e.length)if("select"==b&&null!=f)if(k[f]||this.columns[f]){if(x={},x[k[f]?k[f]:f]=e.val(),x[k[p]?k[p]:p]=e.find("option:selected").text(),a=a.dataMap)if(b=e.find("option:selected").data("map"))for(e=
0;e<a.length;e++)d=a[e],x[k[d]?k[d]:d]=b[d]}else x=e.val();else x=e.val();else(e=v.find(".pq-editor-focus"))&&e.length&&(x=e.val());return x};c.getCellIndices=function(a){a=a.$td;if(null==a||0==a.length||a.closest(".pq-grid")[0]!=this.element[0])return{};var b=a.parent("tr").attr("pq-row-indx"),e;null!=b&&(b=parseInt(b),e=b+this.rowIndxOffset);a=a.attr("pq-col-indx");null!=a&&(a=parseInt(a));return this.iMerge.getRootCell(e,a,"o")};c.getRowsByClass=function(a){var b=this.options,e="remote"==b.pageModel.type,
d=this.rowIndxOffset,b=b.dataModel.data,c=[];if(null==b)return c;for(var h=0,n=b.length;h<n;h++){var k=b[h];if(k.pq_rowcls&&(a.rowData=k,this.hasClass(a))){var k={rowData:k},q=e?h+d:h,f=q-d;k.rowIndx=q;k.rowIndxPage=f;c.push(k)}}return c};c.getCellsByClass=function(a){var b=this.options,e="remote"==b.pageModel.type,d=this.rowIndxOffset,b=b.dataModel.data,c=[];if(null==b)return c;for(var h=0,n=b.length;h<n;h++){var k=b[h],q=e?h+d:h,f=k.pq_cellcls;if(f)for(var l in f)f={rowData:k,rowIndx:q,dataIndx:l,
cls:a.cls},this.hasClass(f)&&(f=this.normalize(f),c.push(f))}return c};c.data=function(a){var b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,e=a.data,d=null==e||"string"==typeof e?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};if(null==b){b=a.pq_rowdata;if(d){var c;null!=b&&(c=null==e?b:b[e]);return{data:c}}e=l.extend(!0,a.pq_rowdata,e);a.pq_rowdata=e}else{var h=a.pq_celldata;if(d)return null!=h&&(b=h[b],c=null==e||null==b?b:b[e]),{data:c};h||(a.pq_celldata={});e=l.extend(!0,
a.pq_celldata[b],e);a.pq_celldata[b]=e}};c.attr=function(a){var b=a.rowIndx,e=a.dataIndx,d=a.colIndx,e=null!=d?this.colModel[d].dataIndx:e,d=a.attr,c=null==d||"string"==typeof d?!0:!1,n=this.rowIndxOffset,k=a.refresh;a=a.rowData||this.getRowData(a);if(!a)return{attr:null};c||!1===k||null!=b||(b=this.getRowIndx({rowData:a}).rowIndx);if(null==e){e=a.pq_rowattr;if(c){var q;null!=e&&(q=null==d?e:e[d]);return{attr:q}}d=l.extend(!0,a.pq_rowattr,d);a.pq_rowattr=d;!1!==k&&null!=b&&(b=this.getRow({rowIndxPage:b-
n}))&&(e=h(d),b.attr(e))}else{var f=a.pq_cellattr;if(c)return null!=f&&(b=f[e],q=null==d||null==b?b:b[d]),{attr:q};f||(a.pq_cellattr={});d=l.extend(!0,a.pq_cellattr[e],d);a.pq_cellattr[e]=d;!1!==k&&null!=b&&(b=this.getCell({rowIndxPage:b-n,dataIndx:e}))&&(e=h(d),b.attr(e))}};var h=function(a){var b={},e;for(e in a){var d=a[e];if(d)if("title"==e)d=d.replace(/\"/g,"&quot;"),b[e]=d;else if("style"==e&&"object"==typeof d){var c=[],h,n;for(n in d)(h=d[n])&&c.push(n+":"+h);(d=c.join(";")+(c.length?";":
""))&&(b[e]=d)}else"object"==typeof d&&(d=JSON.stringify(d)),b[e]=d}return b};c.removeData=function(a){var b=a.dataIndx,e=a.colIndx,b=null!=e?this.colModel[e].dataIndx:b,e=a.data,e=null==e?[]:e,e="string"==typeof e?e.split(" "):e,d=e.length,c=a.rowData||this.getRowData(a);if(c)if(null==b){if(b=c.pq_rowdata){if(d)for(a=0;a<d;a++){var h=e[a];delete b[h]}d&&!l.isEmptyObject(b)||delete c.pq_rowdata}}else if((c=c.pq_celldata)&&c[b]){var n=c[b];if(d)for(a=0;a<d;a++)h=e[a],delete n[h];d&&!l.isEmptyObject(n)||
delete c[b]}};c.removeAttr=function(a){var b=a.rowIndx,e=a.dataIndx,d=a.colIndx,e=null!=d?this.colModel[d].dataIndx:e,c=a.attr,c=null==c?[]:c,c="string"==typeof c?c.split(" "):c,h=c.length,d=b-this.rowIndxOffset,n=a.refresh,k=a.rowData||this.getRowData(a);if(k)if(!1!==n&&null==b&&(b=this.getRowIndx({rowData:k}).rowIndx),null==e){if(e=k.pq_rowattr){if(h)for(a=0;a<h;a++){var q=c[a];delete e[q]}else for(q in e)c.push(q);h&&!l.isEmptyObject(e)||delete k.pq_rowattr}!1!==n&&null!=b&&c.length&&(c=c.join(" "),
(b=this.getRow({rowIndxPage:d}))&&b.removeAttr(c))}else{if((k=k.pq_cellattr)&&k[e]){var f=k[e];if(h)for(a=0;a<h;a++)q=c[a],delete f[q];else for(q in f)c.push(q);h&&!l.isEmptyObject(f)||delete k[e]}!1!==n&&null!=b&&c.length&&(c=c.join(" "),(b=this.getCell({rowIndxPage:d,dataIndx:e}))&&b.removeAttr(c))}};c.normalize=function(a){var b={},e;for(e in a)b[e]=a[e];var d=b.rowIndx,c=b.rowIndxPage;a=b.dataIndx;e=b.colIndx;if(null!=c||null!=d){var h=this.rowIndxOffset,d=null==d?parseInt(c,10)+h:d,c=null==c?
parseInt(d,10)-h:c;b.rowIndx=d;b.rowIndxPage=c;b.rowData=b.rowData||this.getRowData(b)}if(null!=e||null!=a)d=this.colModel,a=null==a?d[e]?d[e].dataIndx:void 0:a,e=null==e?this.colIndxs[a]:e,b.column=d[e],b.colIndx=e,b.dataIndx=a;return b};c.addClass=function(a){var b=this.normalize(a),e=b.rowIndxPage,d=b.dataIndx,c=pq.arrayUnique;a=b.cls;var h=b.refresh,n=b.rowData;if(n)if(!1!==h&&null==e&&(e=this.getRowIndx({rowData:n}).rowIndxPage),null==d){var d=n.pq_rowcls,k;k=c((d?d+" "+a:a).split(/\s+/)).join(" ");
n.pq_rowcls=k;!1!==h&&null!=e&&(e=this.getRow({rowIndxPage:e}))&&e.addClass(a)}else{b=[];"function"!=typeof d.push?b.push(d):b=d;var q=n.pq_cellcls;q||(q=n.pq_cellcls={});for(var n=0,f=b.length;n<f;n++)d=b[n],k=(k=q[d])?k+" "+a:a,k=c(k.split(/\s+/)).join(" "),q[d]=k,!1!==h&&null!=e&&(d=this.getCell({rowIndxPage:e,dataIndx:d}))&&d.addClass(a)}};c.removeClass=function(a){var b=this.normalize(a),e=b.rowIndx,d=b.rowData,c=b.dataIndx;a=b.cls;b=b.refresh;if(d){var h=d.pq_cellcls,n=d.pq_rowcls;!1!==b&&null==
e&&(e=this.getRowIndx({rowData:d}).rowIndx);if(null==c)n&&(d.pq_rowcls=this._removeClass(n,a),null!=e&&!1!==b&&(e=this.getRow({rowIndx:e}))&&e.removeClass(a));else if(h){n=[];"function"!=typeof c.push?n.push(c):n=c;for(var k=0,q=n.length;k<q;k++){var c=n[k],f=h[c];f&&(d.pq_cellcls[c]=this._removeClass(f,a),null!=e&&!1!==b&&(c=this.getCell({rowIndx:e,dataIndx:c}))&&c.removeClass(a))}}}};c.hasClass=function(a){var b=a.dataIndx,e=a.cls;a=this.getRowData(a);e=new RegExp("\\b"+e+"\\b");return a?null==
b?(b=a.pq_rowcls)&&e.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&e.test(a[b])?!0:!1:null};c._removeClass=function(a,b){if(a&&b){for(var e=a.split(/\s+/),d=b.split(/\s+/),c=[],h=0,n=e.length;h<n;h++){for(var k=e[h],q=!1,f=0,l=d.length;f<l;f++)if(k===d[f]){q=!0;break}q||c.push(k)}return 1<c.length?c.join(" "):1===c.length?c[0]:null}};c.getRowIndx=function(a){var b=a.$tr,e=a.rowData,d=this.rowIndxOffset;if(e){var c=this.options.dataModel,b=this.get_p_data(),h=!1;a=a.dataUF?c.dataUF:null;c=!1;if(b)for(var n=
0,k=b.length;n<k;n++)if(b[n]==e){c=!0;break}if(!c&&a)for(h=!0,n=0,k=a.length;n<k;n++)if(a[n]==e){c=!0;break}return c?{rowIndxPage:h?void 0:n-d,uf:h,rowIndx:n,rowData:e}:{}}if(null==b||0==b.length)return{};e=b.attr("pq-row-indx");if(null==e)return{};e=parseInt(e);return{rowIndxPage:e,rowIndx:e+d}};c.search=function(a){var b=this.options,e=a.row;a=a.first;for(var d=[],c=this.rowIndxOffset,h="remote"==b.pageModel.type,b=b.dataModel.data,n=0,k=b.length;n<k;n++){var q=b[n],f=!0,l;for(l in e)e[l]!==q[l]&&
(f=!1);if(f&&(q=this.normalize({rowIndx:h?n+c:n}),d.push(q),a))break}return d};var q=function(a){this.options=a.options;this.that=a},k=q.prototype;k._incrRowIndx=function(a,b){var e=this.that,d=a;b=1;for(var e=e.pdata,c=0,h=a+1,n=e.length;h<n&&(e[h].pq_hidden||(c++,d=h,c!=b));h++);return d};k._decrRowIndx=function(a,b){var e=a,d=this.that.pdata;b=1;for(var c=0,h=a-1;0<=h&&(d[h].pq_hidden||(c++,e=h,c!=b));h--);return e};k._decrRowIndx2=function(a,b){var e=this.that,d=a+e.rowIndxOffset,c=e.iMerge,e=
e.pdata;if(c.ismergedCell(d,b)){var h=c.getRootCell(d,b,"a"),d=c.getData(d,b,"proxy_cell");b=h.colIndx;b=d?d.colIndx:b}for(d=a-1;0<=d;d--)if(!e[d].pq_hidden){a=d;break}return{rowIndxPage:a,colIndx:b}};k._incrRowIndx2=function(a,b){var e=this.that,d=a+e.rowIndxOffset,c=e.iMerge,h,e=e.pdata;if(h=c.ismergedCell(d,b)){var n=c.getRootCell(d,b,"a"),d=c.getData(d,b,"proxy_cell");b=n.colIndx;a=h.rowspan?a+h.rowspan-1:0;b=d?d.colIndx:b}d=a+1;for(c=e.length;d<c;d++)if(!e[d].pq_hidden){a=d;break}return{rowIndxPage:a,
colIndx:b}};c.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],e=!1!==a.history,d=this.options.colModel,c=0;c<b.length;c++){var h=b[c].colIndx,n=b[c].column;void 0==n.dataIndx&&(n.dataIndx=Math.random());null==h&&(h=b.colIndx=d.length);d.splice(h,0,n)}this.iColModel.init();e&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};c.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],e=!1!==a.history,d=this.options.colModel,c=b.length-1;0<=c;c--){var h=b[c],n=d.splice(h.colIndx,1)[0];h.column=n}this.iColModel.init();e&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};k._incrIndx=function(a,b,e){var d=this.that,c=d.iMerge,h,n,k,q,f=d.pdata,l=d.rowIndxOffset,p=d[e?"getLastVisibleRIP":"getFirstVisibleRIP"](),v=d.colModel,x=v.length;if(null==b){if(a==
p)return null;a=this[e?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{n=a+l;if(d=c.ismergedCell(n,b))!q&&(h=c.getData(n,b,"proxy_cell"))&&(k=h.rowIndx-l,f[k].pq_hidden||(a=k)),f[a].pq_hidden&&(a=c.getRootCell(n,b).rowIndxPage),!q&&e&&(b+=d&&d.colspan?d.colspan-1:0);b=e?b+1:b-1;if(e&&b>=x||!e&&0>b){if(a==p)return null;a=this[e?"_incrRowIndx":"_decrRowIndx"](a);b=e?0:x-1}q=v[b]}while(q&&q.hidden);return{rowIndxPage:a,colIndx:b}};k._incrEditIndx=function(a,b,e){var d=this.that,c=d.colModel,
h=c.length,n=d.iMerge,k,q=d.rowIndxOffset,f=d[e?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var l=a+q;if(k=n.ismergedCell(l,b)){if(l=n.getData(l,b,"proxy_edit_cell"))l=l.rowIndx,a=l-q;b=e?b+k.colspan:b-1}else b=e?b+1:b-1;if(e&&b>=h||!e&&0>b){if(a==f)return null;do if(a=this[e?"_incrRowIndx":"_decrRowIndx"](a),b=d.isEditableRow({rowIndxPage:a}),a==f&&!1==b)return null;while(!1==b);b=e?0:h-1}l=a+q;if(k=n.ismergedCell(l,b))a=n.getRootCell(l,b,"o"),n.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:l,
colIndx:b}}),l=a.rowIndx,b=a.colIndx;k=c[b];var p=d.isEditableCell({rowIndx:l,colIndx:b,checkVisible:!0}),v=k.editor,v="function"==typeof v?v.call(d,d.normalize({rowIndx:l,colIndx:b})):v;a=l-q}while(k&&(k.hidden||!1==p||!1===v));return{rowIndxPage:a,colIndx:b}};k.getMergeCell=function(a,b){var e=this.that,d=e.options,c=e.iMerge,h,n;c.ismergedCell(a,b)&&(n=c.getRootCell(a,b,"o"),c.setData(n.rowIndx,n.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),d.virtualY&&(h=c.getRootCell(a,b,"a")));h||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),h=e.normalize({rowIndx:a,colIndx:b}));return h};k.getVisibleRowIndx=function(a){for(var b=this.that,e=b.pdata.length,d=a-b.rowIndxOffset,c=b.getRowData({rowIndx:a});c.pq_hidden&&d<e-1;)d++,a++,c=b.getRowData({rowIndx:a});return a};k.getVisibleColIndx=function(a){for(var b=this.that.colModel,e=b.length,d=b[a];d.hidden&&a<e-1;)a++,d=b[a];return a};c._onKeyPressDown=function(a){if(0<l(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};k._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var e=this.that,d=a.rowIndxPage,c=a.colIndx;e._blurEditMode=!0;if(!1===e.saveEditCell({evt:b})||!e.pdata)return e.pdata||e.quitEditMode(b),e._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;e.quitEditMode(b);if(a.incr)var h=this[a.edit?"_incrEditIndx":"_incrIndx"](d,c,!b.shiftKey),d=h?h.rowIndxPage:
d,c=h?h.colIndx:c;e.scrollRow({rowIndxPage:d});e.scrollColumn({colIndx:c});this.select({rowIndx:d+e.rowIndxOffset,colIndx:c,evt:b});a.edit&&e._editCell({rowIndxPage:d,colIndx:c});e._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};k._keyPressInEdit=function(a,b){var e=this.that,d=e.options.editModel.indices;b=b?b:{};var c=b.FK,h="Backspace Left Right Up Down Del Home End".split(" "),n=d.column.dataType;return a.key&&-1!==l.inArray(a.key,h)?!0:!1===e._trigger("editorKeyPress",
a,l.extend({},d))||c&&("float"==n||"integer"==n)&&(e="float"==n?"0123456789.-":"0123456789-",d=(d=a.charCode)?d:a.keyCode,(d=String.fromCharCode(d))&&-1==e.indexOf(d))?!1:!0};k.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=l.inArray(a,["input","textarea","select"])&&(b="val");return b};k._keyUpInEdit=function(a,b){var e=this.that,d=e.options;b=b?b:{};var c=b.FK,d=d.editModel,h=d.indices;e._trigger("editorKeyUp",a,l.extend({},h));e=h.column.dataType;if(c&&("float"==e||"integer"==
e)){var c=l(a.target),h="integer"==e?d.reInt:d.reFloat,d=this.getValText(c),n=c.data("oldVal"),k=c[d]();if(!1==h.test(k))if(h.test(n))c[d](n);else if(e="float"==e?parseFloat(n):parseInt(n),isNaN(e))c[d](0);else c[d](e)}};k._keyDownInEdit=function(a){var b=this.that,e=b.options,d=e.editModel.indices;if(d){var c=l(a.target),h=l.ui.keyCode,n=e.editModel,k=l.extend({},d),d=k.rowIndxPage,e=k.colIndx,q=k.column.editModel,n=q?l.extend({},n,q):n,q=this.getValText(c);c.data("oldVal",c[q]());if(!1==b._trigger("editorKeyDown",
a,k))return!1;if(a.keyCode==h.TAB||a.keyCode==n.saveKey)return b=a.keyCode==h.TAB?n.onTab:n.onSave,k={rowIndxPage:d,colIndx:e,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(k,a);if(a.keyCode==h.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:d,colIndx:e}),a.preventDefault(),!1;if(a.keyCode==h.PAGE_UP||a.keyCode==h.PAGE_DOWN)return a.preventDefault(),!1;if(n.keyUpDown&&!a.altKey){if(a.keyCode==h.DOWN)return k=this._incrRowIndx2(d,e),this._saveAndMove(k,a);if(a.keyCode==h.UP)return k=
this._decrRowIndx2(d,e),this._saveAndMove(k,a)}}};k.select=function(a){var b=this.that,e=this,d=a.rowIndx,c=a.colIndx,h=a.evt;a=this.getMergeCell(d,c);var d=a.rowIndx,c=a.colIndx,n=a.rowIndxPage;a=b.options;var k=b.iSelection,q=a.selectionModel,f=q.type,p="row"==f,B="cell"==f;(a.realFocus?function(a){clearTimeout(e.timeoutID);e.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:d,colIndx:c});var a=k.address();if(h.shiftKey&&h.keyCode!==l.ui.keyCode.TAB&&q.type&&
"single"!=q.mode&&a.length){var e=a[a.length-1],g=e.firstR,f=e.firstC,C=e.type,z=!1;"column"==C?(e.c1=f,e.c2=c,e.r1=e.r2=e.type=void 0):"row"==C?(e.r1=g,e.r2=d,e.c1=e.c2=e.type=void 0):(a={r1:g,r2:d,c1:f,c2:c,firstR:g,firstC:f},z=!0);b.range(a,z).select()}else p?b.range({r1:d,firstR:d},!1).select():B&&b.range({r1:d,c1:c,firstR:d,firstC:c}).select();b.focus({rowIndxPage:n,colIndx:c})})};k._bodyKeyPressDown=function(a){var b=this.that,e=b.rowIndxOffset,d,c,h;h=this.options;var n=b.iMerge,k=b._focusElement,
q=h.selectionModel,f=h.editModel,p=a.ctrlKey||a.metaKey,B=l.ui.keyCode,v=a.keyCode;if(f.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(k){if(h=document.activeElement,"pq-grid-cont"!=h.className&&"TD"!=h.nodeName.toUpperCase()&&"pq-grid-excel"!=h.id)return}else{k=l(a.target);if(!k.hasClass("pq-grid-cell"))return;k=b.getCellIndices({$td:k})}var x=b.normalize(k);c=x.rowIndxPage;d=x.rowIndx;h=x.colIndx;var D=b.pdata,E=x,k=!0;if(null!=d&&null!=h&&null!=x.rowData){n.ismergedCell(d,h)&&(x=E=
n.getRootCell(d,h,"o"),c=x.rowIndxPage,d=x.rowIndx,h=x.colIndx,v==B.PAGE_UP||v==B.PAGE_DOWN||v==B.SPACE||v==B.HOME||v==B.END)&&(n=n.getData(d,h,"proxy_cell"))&&(n=n.rowIndx-e,D[n].pq_hidden||(c=n,d=c+e));if(!1==b._trigger("cellKeyDown",a,E))return!1;if(v==B.LEFT||v==B.RIGHT||v==B.UP||v==B.DOWN||q.onTab&&v==B.TAB)b=null,v==B.LEFT||v==B.TAB&&a.shiftKey?b=this._incrIndx(c,h,!1):v==B.RIGHT||v==B.TAB&&!a.shiftKey?b=this._incrIndx(c,h,!0):v==B.UP?b=this._decrRowIndx2(c,h):v==B.DOWN&&(b=this._incrRowIndx2(c,
h)),b&&(d=b.rowIndxPage+e,this.select({rowIndx:d,colIndx:b.colIndx,evt:a}));else if(v==B.PAGE_DOWN||v==B.SPACE||v==B.PAGE_UP){if(b=this[v==B.PAGE_UP?"pageUp":"pageDown"](c))c=b.rowIndxPage,null!=c&&this.select({rowIndx:c+e,colIndx:h,evt:a})}else v==B.HOME?(p?d=b.getFirstVisibleRIP()+e:h=b.getFirstVisibleCI(),this.select({rowIndx:d,colIndx:h,evt:a})):v==B.END?(p?d=b.getLastVisibleRIP()+e:h=b.getLastVisibleCI(),this.select({rowIndx:d,colIndx:h,evt:a})):v==B.ENTER?(c=E.rowIndxPage,h=E.colIndx,(q=b.getCell({rowIndxPage:c,
colIndx:h}))&&0<q.length&&(d=c+e,e=b.isEditableRow({rowIndx:d}),B=b.isEditableCell({rowIndx:d,colIndx:h}),e&&B?b.editCell({rowIndxPage:c,colIndx:h}):(b=q.find("button"),b.length&&l(b[0]).click()))):p&&"65"==v?(b=b.iSelection,"row"==q.type&&"single"!=q.mode?b.selectAll({type:"row",all:q.all}):"cell"==q.type&&"single"!=q.mode&&b.selectAll({type:"cell",all:q.all})):f.pressToEdit&&(32<=v&&127>=v||189==v)&&!p?46==v?b.clear():(c=E.rowIndxPage,h=E.colIndx,(q=b.getCell({rowIndxPage:c,colIndx:h}))&&0<q.length&&
(d=c+e,e=b.isEditableRow({rowIndx:d}),B=b.isEditableCell({rowIndx:d,colIndx:h}),e&&B&&b.editCell({rowIndxPage:c,colIndx:h,select:!0})),k=!1):k=!1;k&&a.preventDefault()}}};k.incrPageSize=function(){for(var a=this.that,b=a.$tbl,e=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,d=e.length-1;0<=d;d--){var c=e[d];if(c.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:l(c)}).rowIndxPage}};k.pageNonVirtual=function(a,b){var e=this.that,d=e.$cont[0].offsetHeight-
e._getSBHeight(),c=e.getRow({rowIndxPage:a}),h=0,n=0,k=l(c[0])[b]("tr.pq-grid-row"),q=k.length;if(0<q){do{c=k[n];h+=c.offsetHeight;if(h>=d)break;n++}while(n<q);n=0<n?n-1:n;do if(c=l(k[n]),a=e.getRowIndx({$tr:c}).rowIndxPage,null!=a)break;else n--;while(0<=n)}return a};k.pageDown=function(a){var b=this.that,e=b.options,d=b.vscroll,c=d.option("cur_pos"),h=d.option("num_eles"),n=d.option("ratio");if(e.virtualY){if(c<h-1){a=this.incrPageSize().rowIndxPage;var k=b._calcCurPosFromRowIndxPage(a);if(null==
k)return;d.option("cur_pos",k);d.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>n&&(e=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*e),b.syncScrollBarVert());return{rowIndxPage:a,curPos:k}};k.pageUp=function(a){var b=this.that,e=b.vscroll;if(b.options.virtualY){if(0<e.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var d=b._calcCurPosFromRowIndxPage(a);if(null==d)return;e.option("cur_pos",d);e.scroll()}}else e=e.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<e&&(e=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(e),b.syncScrollBarVert());return{rowIndxPage:a,curPos:d}};k.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),e=a.options.freezeRows,d=a.pdata,c,h=0;if(b.length){var n;e?(n=b.filter("tr.pq-last-frozen-row"),n.length&&(n=n.next())):2<=b.length&&(n=l(b[1]));if(n&&n.length)for(c=h=a.getRowIndx({$tr:n}).rowIndxPage,b=0,a=a.pageSize-3;0<=h&&(d[h].pq_hidden||(b++,c=h,!(b>=a)));h--);}return{rowIndxPage:c}};
c._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,e=0;e<b;e++)this.colModel[e].hidden&&a++;return a};c._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var e=this.options.freezeCols;e<a;e++)this.colModel[e].hidden&&b++;return b};c._getSBHeight=function(){return this.iRefresh.getSBHeight()};c._getSBWidth=function(){return this.iRefresh.getSBWidth()};c.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var e=b.length;a<e;a++)if(!b[a].pq_hidden)return a};
c.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};c.getFirstVisibleCI=function(a){var b=this.colModel,e=b.length;for(a=a?this.initH:0;a<e;a++)if(!b[a].hidden)return a;return null};c.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};c.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,e=0,d=0;d<b;d++)a[d].hidden||e++;return e};c._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,e=this.options.freezeRows;if(a<e)return 0;for(var d=0,c=e,h=b.length;e<h;e++){var n=b[e];if(c==a)break;c++;n.pq_hidden||d++}return d>=h?null:d};c._calcCurPosFromColIndx=function(a){var b=this.colModel,e=this.options.freezeCols;if(a<e)return 0;for(var d=0,c=e,h=b.length;e<h;e++){var n=b[e];if(c==a)break;c++;n.hidden||d++}return d>=h?null:d};c.calcWidthCols=function(a,b,e){var d=0,c=this.options.numberCell,h=this.colModel;-1==a&&(c.show&&(d=e?d+1*c.width:d+c.outerWidth),
a=0);if(e)for(;a<b;a++){if((e=h[a])&&!e.hidden){if(!e._width)throw"assert failed";d+=e._width+0}}else for(;a<b;a++)(e=h[a])&&!e.hidden&&(d+=e.outerWidth);return d};c.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=l(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};c._calcRightEdgeCol=function(a){var b=0,e=0,d=this.colModel,c=this.initH,h=this.options,n=h.freezeCols,h=h.numberCell;h.show&&(b+=h.outerWidth,e++);for(h=0;h<=a;h++){h<c&&
h>=n&&(h=c);var k=d[h];k.hidden||(b+=k.outerWidth,e++)}return{width:b,cols:e}};c._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};c.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(l){function p(a){this.that=a}function f(a,b,d){for(var c=0;b<d;b++)!0!==a[b].hidden&&c++;return c}function c(a){if(a.length)var b=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return b||l()}function a(a,b,d){for(var c,q;d;){c=a[d][b];q=a[d-1][b];if(c!=q)break;d--}return d}var d=l.paramquery,b=d._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");
var d,c,q,g;null!=b&&null!=a&&(b*=1,a*=1,c=this.headerCells[a][b])&&(g=c.colModel,q=c.leftPos);g&&g.length&&(d=!0);return{col:c,ci:b,o_ci:q,ri:a,isParent:d}};b.flex=function(a){this.iResizeColumns.flex(a)};d.cHeader=p;b=p.prototype;b.createHeader=function(){var a=this.that,b=this,d=a.options,c=d.bootstrap,q=(c.on?c.thead:"")+" pq-grid-header-table ",g=d.ui,m=c.on?"":g.header,f=d.hwrap,c=a.pqpanes,s=parseInt(d.freezeCols),r=d.numberCell,g=a.colModel,t=d.sortModel,w=a.depth,u=d.virtualX,p=a.iGenerateView.colDef,
z=a.initH,A=a.finalH,B=a.headerCells,v=a.$header_o;v.empty();if(null!=A)if(!1===d.showHeader)v.css("display","none");else{v.css("display","");d=["<table class='"+(f?q+"pq-wrap ":q+"pq-no-wrap ")+"' >"];if(1<=w){d.push("<tr class='pq-row-hidden'>");r.show&&d.push("<td style='width:"+r.width+"px;' ></td>");for(var f=0,x=p.length;f<x;f++){var D=p[f],q=D.colIndx;d.push("<td style='width:"+D.column.outerWidth+"px;' pq-col-indx="+q+"></td>")}d.push("</tr>")}for(p=0;p<w;p++){d.push("<tr class='pq-grid-title-row'>");
0==p&&r.show&&d.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",w,"'><div class='pq-td-div'>",r.title?r.title:"&nbsp;","</div></th>"].join(""));for(q=0;q<=A;q++){if(q<z&&q>=s&&u&&(q=z,q>A))throw"initH>finalH";b.createHeaderCell(p,q,B,d,"pq-grid-col ",s,z,w,t)}d.push("</tr>")}a.ovCreateHeader(d,"pq-grid-col ");d.push("</table>");s=d.join("");v[0].innerHTML=c.vH?["<span class='pq-grid-header pq-grid-header-left ",m,"'><div class='pq-grid-header-inner'>",s,"</div></span><span class='pq-grid-header ",
m,"'><div class='pq-grid-header-inner'>",s,"</div></span>"].join(""):["<span class='pq-grid-header ",m,"'><div class='pq-grid-header-inner'>",s,"</div></span>"].join("");m=a.$header=v.children(".pq-grid-header");v=m.children(".pq-grid-header-inner");a.$tbl_header=v.children("table");a.$header_left=l(m[0]);a.$header_left_inner=l(v[0]);c.vH&&(a.$header_right=l(m[1]),a.$header_right_inner=l(v[1]));m.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(z,A,g);a._trigger("refreshHeader",
null,null)}};b._onHeaderClick=function(a){var b=this.that,d;d=b.iDragColumns;if(!d||"stop"==d.status){d=l(a.target);if(d.is("input,label"))return!0;d=d.closest(".pq-grid-col");if(d.length&&(d=b.getHeadCell(d),(b=d.col)&&!d.isParent))return this._onHeaderCellClick(b,d.ci,a)}};b.createHeaderCell=function(a,b,c,h,q,g,m,l,s){var r=this.that,t=r.options.sheet,w=c[a][b],u=r.colModel,p=w.colSpan;if(!(w.hidden||0===p||0<a&&w==c[a-1][b])){if(0<b&&w==c[a][b-1]){if(b>m)return;a:{c=c[a];for(var z=0;z<c.length;z++)if(c[z]==
w){c=z;break a}c=void 0}if(c<g)return;p-=f(u,c,b)}else g&&b<g&&b+p>g&&(p-=f(u,g,m),u=f(u,b,g),p=Math.max(p,u));u=w.halign||w.align;c=w.cls;q=[q];var z=w.title,A=w.type,z="function"==typeof z?z.call(r,{column:w,colIndx:b,dataIndx:w.dataIndx}):z,z=t?d.toLetter(b):z,z=null!=z?z:"checkbox"==A&&w.cb.header?"<input type='checkbox'/>":w.dataIndx;w.pqtitle=z;u&&q.push("pq-align-"+u);b==g-1&&1==l&&q.push("pq-last-frozen-col");b<=g-1?q.push("pq-left-col"):b>=m&&q.push("pq-right-col");c&&q.push(c);null!=w.colModel&&
0!=w.colModel.length||q.push("pq-grid-col-leaf");g=s.space?"pq-space":"";h.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",q.join(" "),"' rowspan=",w.rowSpan," colspan=",p,"><div class='pq-td-div'>",z,"<span class='pq-col-sort-icon ",g,"'></span>",s.number?"<span class='pq-col-sort-count "+g+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,d){var c=this.that,q=c.options,g=q.sortModel,m=a.dataIndx;!1!==c._trigger("headerCellClick",d,{column:a,colIndx:b,dataIndx:m})&&
(q.selectionModel.column&&-1==d.target.className.indexOf("pq-td-div")?(q={c1:b,firstC:b},a=c.iSelection.address(),d.shiftKey&&((d=a.length)&&"column"==a[d-1].type&&(d=a[d-1],d.c1=d.firstC,d.c2=b,d.r1=d.r2=d.type=void 0),q=a),c.range(q,!1).select(),c.focus({rowIndxPage:c.getFirstVisibleRIP(!0),colIndx:b})):g.on&&!1!=a.sortable&&(g.multiKey&&(g.single=!d[g.multiKey]),c.sort({sorter:[{dataIndx:m}],addon:!0,evt:d})))};b._refreshResizeColumn=function(a,b,d){a=this.that;d=a.options;b=d.filterModel.ficon?
!0:!1;var c=d.numberCell;d=parseInt(d.freezeCols);var q=[],g=[],m=a.pqpanes.vH,f=0,l=0;c.show&&(f=c.outerWidth,c.resizable&&q.push("<div pq-col-indx='-1' style='left:",f-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var c=a.iGenerateView.colDef,r=0,t=c.length;r<t;r++){var l=c[r],w=l.colIndx,l=l.column,p=l.ficon,y=p||null==p&&b,p=q,f=f+l.outerWidth;if(!1!==l.resizable||y)m&&w>=d&&(p=g),l=f-5,p.push("<div pq-col-indx='",w,"' style='left:",l,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}g.length&&
a.$header_right_inner.append(g.join(""));a.$header_left_inner.append(q.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,d=b.bootstrap,b=b.ui,c=a.$header;if(c){var q=a.iSort.getSorter(),g=q.length,m=!1;a.options.sortModel.number&&1<g&&(m=!0);for(var f=0;f<g;f++){var l=q[f],r=a.getColIndx({dataIndx:l.dataIndx}),t=l.dir,l=d.on?d.header_active:b.header_active+" pq-col-sort-"+("up"==t?"asc":"desc"),t=d.on?" glyphicon glyphicon-arrow-"+t:"ui-icon ui-icon-triangle-1-"+("up"==t?
"n":"s"),r=c.find(".pq-grid-col-leaf[pq-col-indx="+r+"]");r.addClass(l);r.find(".pq-col-sort-icon").addClass(t);m&&r.find(".pq-col-sort-count").html(f+1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var e=l(a.target);b.setDraggables(a);a.pq_composed=!0;a=l.Event("mousedown",a);e.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var d=a.options.flex;if(d.on&&d.one)a.one("ready",function(){b.flex()})};d.cResizeColumns=
b;b=b.prototype=new d.cClass;b.doubleClick=function(a){var b=this.that.options,d=b.flex;a=l(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||d.on&&this.flex(d.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b.flex=function(a){a=a||{};var b=this.that,d=b.element,h=b.options.numberCell,q=a.colIndx,g,m=a.dataIndx;a=null==a.refresh?!0:a.refresh;var f=!1,s=b.$tbl,r=b.$tbl_header,t=s&&s.length?l(s[0]).clone():l(),w=b.tables&&b.tables.length?b.tables[0].$tbl:null,w=w?l(w[0]).clone():l(),p=r&&r.length?
l(r[0]).clone():l();t.find(".pq-merge-cell").each(function(a,b){b.innerHTML=l(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=m)for(q=[],r=0,s=m.length;r<s;r++){var y=b.colIndxs[m[r]];null!=y&&q.push(y)}null!=q&&(q.sort(function(a,b){return a-b}),g=q.length);p.find("tr.pq-grid-header-search-row").remove();var m=c(t),y=c(w),z=c(p),t=l("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(p).append(w).append(t);t.addClass(d.attr("class"));
d.parent().append(t);d=h.show?0:-1;h=b.iGenerateView.colDef;r=0;for(s=h.length;r<s;r++){w=h[r];p=w.colIndx;w=w.column;d++;if(q)if(q.length)if(q[0]===p)q.splice(0,1);else continue;else break;var p=m[d],A=z[d],B=y[d],p=Math.max(p?p.offsetWidth:0,B?B.offsetWidth:0,A?A.offsetWidth:0)-0+1;w._width!==p&&(f=!0,w.width=p,1===g&&(w._resized=!0))}t.remove();f&&a&&b.refresh({source:"flex"})};b.setDraggables=function(a){var b=this,d,c,q;l(a.target).draggable({axis:"x",helper:function(a,e){var d=l(a.target),c=
parseInt(d.attr("pq-col-indx"));b._setDragLimits(c);b._getDragHelper(a,e);return d},start:function(a,e){d=e.position.left;q=parseInt(b.$cl[0].style.left)},drag:function(a,e){c=e.position.left;b.$cl[0].style.left=q+(c-d)+"px"},stop:function(a,e){return b.resizeStop(a,e,d)}})};b._getDragHelper=function(a){var b=this.that,d=parseInt(b.options.freezeCols);a=l(a.target);var c=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var q=c.outerHeight();this.$cl=l("<div class='pq-grid-drag-bar'></div>").appendTo(c);
this.$clleft=l("<div class='pq-grid-drag-bar'></div>").appendTo(c);this.$cl.height(q);this.$clleft.height(q);c=l("[pq-col-indx="+a+"]",b.$header)[0];q=c.offsetLeft;b.pqpanes.vH?a>=d&&(q-=b.$header[1].scrollLeft):(q+=b.$header[0].offsetLeft,q-=b.$header[0].scrollLeft);this.$clleft.css({left:q});q+=c.offsetWidth;this.$cl.css({left:q})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,d=b.colModel[a],c=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(c=b.$header_right);b=c.find("th[pq-col-indx='"+
a+"']").offset().left+d._minWidth;d=b+d._maxWidth-d._minWidth;c.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option","containment",[b,0,d,0])}};b.resizeStop=function(a,b,d){var c=this.that,q=c.colModel,g=c.options.numberCell;this.$clleft.remove();this.$cl.remove();d=b.position.left-d;b=l(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var q=null,m=parseInt(g.width);g.width=m+d}else q=q[b],m=parseInt(q.width),q.width=m+d,q._resized=!0;c.refresh();c._trigger("columnResize",
a,{colIndx:b,column:q,dataIndx:q?q.dataIndx:null,oldWidth:m,newWidth:q?q.width:g.width})};b=function(a){this.that=a;this.$drag_helper=null;var b=a.options.dragColumns,d=b.topIcon,c=b.bottomIcon;this.status="stop";this.$arrowTop=l("<div class='pq-arrow-down ui-icon "+d+"'></div>").appendTo(a.element);this.$arrowBottom=l("<div class='pq-arrow-up ui-icon "+c+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};d.cDragColumns=
b;b=b.prototype;b.onColMouseDown=function(a,b){return function(d){var c,q,g;c=l(this);d.pq_composed||l(d.target).is("input,select,textarea")||(c=b.getHeadCell(c),g=(q=c.col)?q.parent:null,!q||q.nodrag||q._nodrag||g&&1==g.colSpan||!a.setDraggable(d,q,c)||(d.pq_composed=!0,c=l.Event("mousedown",d),l(d.target).trigger(c)))}};b.showFeedback=function(a,b){var d=this.that,c=a[0],q=d.$grid_center[0].offsetTop,g=c.offsetLeft-c.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:c.offsetWidth)-8,d=q+d.$header[0].offsetHeight;
this.$arrowTop.css({left:g,top:q+c.offsetTop-16,display:""});this.$arrowBottom.css({left:g,top:d,display:""})};b.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,d=b.acceptIcon,b=b.rejectIcon,c=this.$drag_helper;c&&(a?(c.children("span.pq-drag-icon").addClass(d).removeClass(b),c.removeClass("ui-state-error")):(c.children("span.pq-drag-icon").removeClass(d).addClass(b),
c.addClass("ui-state-error")))};b.setDraggable=function(a,b,d){a=l(a.currentTarget);var c=this,q=c.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:q.element,revert:"invalid",helper:c.dragHelper(c,q,b),start:c.onStart(c,q,b,d),drag:c.onDrag(c,q),stop:function(){c.status="stop";q.$header.find(".pq-grid-col-resize-handle").show();c.hideArrows()}}),!0};b.onStart=function(a,b,d,c){return function(q){if(!1===b._trigger("columnDrag",
q.originalEvent,{column:d}))return!1;a.setDroppables(c)}};b.onDrag=function(a,b){return function(d,c){a.status="drag";var q=l(".pq-drop-hover",b.$header);if(0<q.length){a.showArrows();a.updateDragHelper(!0);var g=q.width();d.clientX-q.offset().left+l(document).scrollLeft()<g/2?(a.leftDrop=!0,a.showFeedback(q,!0)):(a.leftDrop=!1,a.showFeedback(q,!1))}else a.hideArrows(),l(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,d){var c=b.options.dragColumns.rejectIcon;
return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();var q=l("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+c+" glyphicon glyphicon-remove'></span>"+d.pqtitle+"</div>");a.$drag_helper=q;return q[0]}};b._columnIndexOf=function(a,b){for(var d=0,c=a.length;d<c;d++)if(a[d]==b)return d;return-1};b.setDroppables=function(a){var b=this.that,d=a.col,c=a.ri;a=a.o_ci;var q=a+d.o_colspan,g,m,f,s,r;m=
b.$header_left;var t,w={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},p=m.find(".pq-left-col");m=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):m.find(".pq-right-col");p=p.add(m);for(t=p.length;t--;)s=l(p[t]),r=s.hasClass("ui-droppable"),g=b.getHeadCell(s),f=g.col,m=g.ri,g=g.ci,f==d||f.nodrop||f._nodrop||c<m&&g>=a&&g<q?r&&s.droppable("destroy"):r||s.droppable(w)};b.onDrop=function(){var a=this,b=this.that;return function(d,
c){if(!a.dropPending){var q=1*c.draggable.attr("pq-col-indx"),g=1*c.draggable.attr("pq-row-indx"),m=l(this),f=1*m.attr("pq-col-indx"),m=1*m.attr("pq-row-indx"),s=a.moveColumn(q,f,a.leftDrop,g,m);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:s.dataIndx,column:s,oldcolIndx:q,colIndx:b.getColIndx({column:s})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(b,d,c,h,q){var g=this.that,m=g.options.colModel,f=g.headerCells,g=g.depth-
1;h=null==h?a(f,b,g):h;q=null==q?a(f,d,g):q;var g=f[q][d],l=h?f[h-1][b].colModel:m;d=q?f[q-1][d].colModel:m;b=this._columnIndexOf(l,f[h][b]);c=c?1:0;b=l.splice(b,1)[0];c=this._columnIndexOf(d,g)+1-c;d.splice(c,0,b);return b}})(jQuery);
(function(l){function p(c,a){this.that=c;var d=this,b=c.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;c.on("cellClick",function(a,b){return d.toggle(a,b)}).on("cellKeyDown",function(a,b){if(a.keyCode==l.ui.keyCode.ENTER)return d.toggle(a,b)}).on("refresh",function(a,b){return d.aftertable()}).on("beforeTableView",function(a,b){return d.beforeTableView(a,b)}).on("tableWidthChange",function(a,b){return d.tableWidthChange(a,b)});a._render=function(a){var d=b.detailModel,c=a.cellData;
a=a.rowData;if(!a.pq_gsummary&&!a.pq_gtitle)return d=c&&c.show?d.expandIcon:d.collapseIcon,"<div class='ui-icon "+d+"'></div>"}}l.paramquery.cHierarchy=p;var f=p.prototype=new l.paramquery.cClass;f.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var c=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),a=0,d=c.length;a<d;a++)for(var b=l(c[a]).find(".pq-grid"),e=0,n=b.length;e<n;e++){var k=l(b[e]);k.is(":visible")&&k.pqGrid("onWindowResize")}this.refreshComplete=
!0}};f.aftertable=function(c){var a=this.that,d=a.options.detailModel.init,b=a.pdata;if(this.refreshComplete){this.refreshComplete=!1;c=c?c:a.$tbl.children("tbody").children("tr.pq-detail-child");for(var e=0,n=c.length;e<n;e++){var k=l(c[e]),h=k.attr("pq-row-indx"),q=b[h],h=!1,g=q.pq_detail.child;g||"function"!=typeof d||(h=!0,g=d.call(a.element[0],{rowData:q}),q.pq_detail.child=g,q.pq_detail.height=25);k=k.children("td.pq-detail-child");k.append(g);k=k.find(".pq-grid");g=0;for(q=k.length;g<q;g++){var m=
l(k[g]);h?m.hasClass("pq-pending-refresh")&&m.is(":visible")&&(m.removeClass("pq-pending-refresh"),m.pqGrid("refresh")):m.is(":visible")&&m.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};f.beforeTableView=function(c,a){this.detachView||(this.detachInitView(),this.detachView=!0)};f.detachInitView=function(c){var a=this.that.$tbl;if(a&&a.length)for(c=c?c:a.children("tbody").children("tr.pq-detail-child"),a=0;a<c.length;a++)l(c[a]).children("td.pq-detail-child").children().detach()};
f.toggle=function(c,a){var d=this.that,b=a.column,e=a.rowData,n=a.rowIndx,k=this.type;e.pq_gtitle||e.pq_gsummary||!b||b.type!==k||(b={rowIndx:n,focus:!0},null==e.pq_detail?d.rowExpand(b):!1===e.pq_detail.show?d.rowExpand(b):this.rowCollapse(b))};f.rowExpand=function(c){this.normalize(c);var a=this.that,d=c.rowData,b=c.rowIndx,e=c.rowIndxPage,n=a.options.detailModel;if(null!=d){if(!1===a._trigger("beforeRowExpand",null,c))return!1;null==d.pq_detail?d.pq_detail={show:!0}:!1===d.pq_detail.show&&(d.pq_detail.show=
!0);n.cache||this.rowInvalidate(c);a.refreshRow({rowIndx:b});n=[];a.iGenerateView._generateDetailRow(d,e,n);d=a.getRow({rowIndxPage:e});d.after(n.join(""));this.aftertable(d.next());c.focus&&a.getCell({rowIndx:b,dataIndx:"pq_detail"}).attr("tabindex","0").focus();c.scrollRow&&this.scrollRow({rowIndx:b})}};f.rowInvalidate=function(c){c=this.that.getRowData(c);var a=c.pq_detail;if(a=a?a.child:null)a.remove(),c.pq_detail.child=null,c.pq_detail.height=0};f.normalize=function(c){var a=this.that,d=c.rowIndx,
b=c.rowIndxPage,e=a.rowIndxOffset;c.rowIndx=null==d?b+e:d;c.rowIndxPage=null==b?d-e:b;c.rowData=a.getRowData(c)};f.rowCollapse=function(c){this.normalize(c);var a=this.that,d=a.options,b=c.rowData,e=c.rowIndx,n=c.rowIndxPage,k=d.detailModel;null!=b&&null!=b.pq_detail&&!0===b.pq_detail.show&&(k.cache||this.rowInvalidate(c),b.pq_detail.show=!1,d.virtualY?a.refresh():(d=a.getRow({rowIndxPage:n}).next("tr.pq-detail-child"),d.length&&(this.detachInitView(d),d.remove(),a.refreshRow({rowIndx:e})),c.focus&&
a.getCell({rowIndx:e,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),c.scrollRow&&(e=c.rowIndx,this.scrollRow({rowIndx:e})))}})(jQuery);
(function(l){var p=function(f){var c=this;c.that=f;f.on("dataReadyDone",function(){c.calcVisibleV()}).on("CMInit",function(){c.calcVisibleH()}).on("refresh",function(){c.summaryTable()})};l.paramquery.cRefresh=p;p=p.prototype;p._computeOuterWidths=function(){for(var f=this.that,c=f.options.numberCell,f=f.colModel,a=f.length,d=0;d<a;d++){var b=f[d];b.outerWidth=b._width+0}c.show&&(c.outerWidth=c.width)};p.autoFit=function(){var f=this.that,c=f.colModel,a=c.length,f=f.calcWidthCols(-1,a,!0),d=this.contWd-
this.getSBWidth();if(f!==d){for(var f=f-d,b,d=[],e=0;e<a;e++){var n=c[e],k=n._percent,h=n._resized;n.hidden||k||h||(0>f?(k=n._maxWidth-n._width)&&d.push({availWd:-1*k,colIndx:e}):(k=n._width-n._minWidth)&&d.push({availWd:k,colIndx:e}));h&&(b=n,delete n._resized)}d.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});e=0;for(a=d.length;e<a;e++){var n=d[e],k=n.availWd,n=n.colIndx,h=Math.round(f/(a-e)),n=c[n],q;q=n._width;Math.abs(k)>Math.abs(h)?(q-=h,f-=h):(q-=k,f-=k);n.width=
n._width=q}0!=f&&b&&(q=b._width-f,q>b._maxWidth?q=b._maxWidth:q<b._minWidth&&(q=b._minWidth),b.width=b._width=q)}};p.autoLastColumn=function(){var f=this.that,c=f.colModel,a=c.length,d=f.options.freezeCols,b=this.contWd-this.getSBWidth(),e=f.calcWidthCols(-1,d,!0),b=b-e,e=!1,f=f.getLastVisibleCI();if(null!=f&&(f=c[f],!f._percent)){for(var n=f._width,k,h=f._minWidth,q=f._maxWidth,a=a-1;a>=d;a--){var g=c[a];if(!g.hidden&&(g=g._width+0,b-=g,0>b)){e=!0;k=n+b>=h?n+b:n+g+b;break}}e||(k=n+b);k>q?k=q:k<h&&
(k=h);f.width=f._width=k}};p.numericVal=function(f,c){var a;a=-1<(f+"").indexOf("%")?parseInt(f)*c/100:parseInt(f);return Math.round(a)};p.refreshColumnWidths=function(f){f=f||{};var c=this.that,a=c.options,d=a.numberCell,b="flex"===a.width,e=c.colModel,n=a.scrollModel,k=n.lastColumn,n=n.autoFit,h=this.contWd,q=e.length,g=this.getSBWidth(),m=a._minColWidth,l=a._maxColWidth,s=0;d.show&&(d.width<d.minWidth&&(d.width=d.minWidth),s=d.outerWidth=d.width);d=b?null:h-g-s;m=Math.floor(this.numericVal(m,d));
l=Math.ceil(this.numericVal(l,d));h=0;if(!b&&5>d||isNaN(d)){if(a.debug)throw"availWidth N/A";}else{delete c.percentColumn;for(g=0;g<q;g++)if(s=e[g],!s.hidden){var r=s.width,t=-1<(r+"").indexOf("%")?!0:null,p=s.minWidth,u=s.maxWidth,p=p?this.numericVal(p,d):m,u=u?this.numericVal(u,d):l;u<p&&(u=p);if(void 0!=r){var y=0;!b&&t?(c.percentColumn=!0,s.resizable=!1,s._percent=!0,r=this.numericVal(r,d)-0,y=Math.floor(r),h+=r-y,1<=h&&(y+=1,h-=1)):r&&(y=parseInt(r));y<p?y=p:!b&&y>u&&(y=u);s._width=y}else s._width=
p;t||(s.width=s._width);s._minWidth=p;s._maxWidth=b?1E3:u}!1===b&&!1!==f.refreshWidth&&(n&&this.autoFit(),"auto"===k&&a.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};p.estRowsInViewPort=function(){var f=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=f};p._refreshFrozenLine=function(){var f=this.that,c=f.options,a=c.numberCell,d=f.$cont_o,b=c.freezeBorders,e=c.freezeCols,c=c.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
b&&(e&&(b=f.calcWidthCols(-1,e),isNaN(b)||0===b||0<b&&a.show&&b===a.width||(this.$freezeLine=l(["<div class='pqg-vert-frozen-line'  style = 'left:",b-1,"px;' ></div>"].join("")).appendTo(d))),c&&(f=f.$tbl))&&(f=f.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=l("<div class='pqg-horiz-frozen-line' style='top:"+(f.offsetTop+f.offsetHeight-1-1)+"px;' ></div>").appendTo(d))};p.setScrollVNumEles=function(f){var c=this.that;f=c.vscroll;var a=c.options;if(!a.maxHeight&&"flex"===
a.height)return f.option("num_eles",0),0;var a=c.iHierarchy?!0:!1,d=parseInt(f.option("num_eles")),b=parseInt(f.option("cur_pos")),d=this.getEContHt(),e=c.pdata?c.totalVisibleRows:0,n,k=0;c.$tbl&&0<c.$tbl.length&&(n=c.$tbl[c.$tbl.length-1],k=n.scrollHeight,n=l(n));if(0<k){n=n.children().children("tr");b=c=0;for(k=1;k<n.length;k++){var h=n[k],c=c+h.offsetHeight;if(c>=d){a&&l(h).hasClass("pq-detail-child")&&(b=1<b?b-1:1);break}else a?!1===l(h).hasClass("pq-detail-child")&&b++:b++}d=e-b+1}else d=b+1;
d>e&&(d=e);f.option("num_eles",d);return d};p._setScrollVLength=function(f){f=this.that;var c=f.options;if("flex"!==c.height||c.maxHeight){var c=this.getSBHeight(),a=this.contHt-c+this.headerHt-2;f.vscroll.widget().css("bottom",c);f.vscroll.option("length",a)}};p.setHeaderHeight=function(){var f=this.that,c=f.$header,a,d,b;if(c&&c.length){if(1<c.length){if(a=c[0].scrollHeight,d=c[1].scrollHeight,b=Math.max(a,d),a!==d){var e=l(c[0]).find(".pq-grid-header-search-row"),n=l(c[1]).find(".pq-grid-header-search-row");
e.length&&(e.css("height",""),n.css("height",""),a=c[0].scrollHeight,d=c[1].scrollHeight,b=Math.max(a,d),a<b?e.height(n[0].scrollHeight):n.height(e[0].scrollHeight))}}else b=a=c[0].scrollHeight;f.$header_o.height(b-3);this.headerHt=b-1}else f.$header_o.height(0),this.headerHt=0};p.initContHeight=function(){var f=this.that,c=f.options;if("flex"!=c.height||c.maxHeight)this.contHt=this.height-(c.showHeader?this.rowHt:0)-(c.showTop?f.$top[0].offsetHeight:0)-(c.showBottom?f.$bottom[0].offsetHeight:0)};
p.initContWidth=function(){this.contWd=this.width};p.setContHeight=function(f){f=this.that;var c=f.$top,a=this.height-f.$header_o[0].offsetHeight,d;if(f.options.showTop){d=c[0].offsetHeight;var b=parseInt;c=c[0];window.getComputedStyle?c=getComputedStyle(c).marginTop:(c=c.currentStyle.marginTop,c="auto"==c?0:c);d+=b(c)}else d=0;a=a-d-f.$bottom[0].offsetHeight+1;a=0<=a?a:"";f.$cont.height(a);this.contHt=a};p.setContAndGridHeightForFlex=function(){var f=this.that,c=f.hscroll.widget();if(this.vscroll)c.css("position",
"");else{c.css("position","relative");var c=f.$cont,a=f.options.cls,d=c.children("."+a.cont_inner_b);c.height("");d.length||(d=c.children("."+a.cont_inner));d.height("");f.element.height("");f.$grid_center.height("")}};p.setContAndGridWidthForFlex=function(){var f=this.that,c=f.options.maxWidth,a=this.maxWidthPixel,d=f.calcWidthCols(-1,f.colModel.length),f=f.element,b=this.getSBWidth(),d=d+b;c&&d>=a&&(d=a);this.contWd=d;f.width(d+"px")};p.getTotalVisibleRows=function(f,c,a){var d=this.that,b=this.vrows,
e=this.estRowsInViewPort(),n=0,k=a?a.length:0,h=c,q=0,g=0,m=null,l=d.iHierarchy?!0:!1,d=d.options.detailModel.offset,s=0,r=this.rowHt,t=l?this.contHt:void 0;if(null==a||0==k)return{initV:null,finalV:null,tvRows:n,lastFrozenRow:null};for(var p=0,u=k>c?c:k;p<u;p++){var y=a[p],z=y.pq_hidden;z||(m=p,n++,l&&((y=y.pq_detail)&&y.show?(y=y.height||0,y>d&&(y=d),s+=y+r):s+=r))}if(k<c)return{initV:m,finalV:m,tvRows:n,lastFrozenRow:m};e-=n;h=q=b[f];g=0;p=h;for(u=k;p<u;p++){y=a[p];if(z=y.pq_hidden)q++;else if(g===
e)break;else q++,g++;if(l&&!z&&((y=y.pq_detail)&&y.show?(y=y.height||0,y>d&&(y=d),s+=y+r):s+=r,s>t))break}n+=b.length;h=h>=k?k-1:h;q=q>=k?k-1:q;return{initV:h,finalV:q<h?h:q,tvRows:n,lastFrozenRow:m}};p.setInitH=function(f,c){var a=this.that;a.initH=f;a.finalH=c};p.setInitV=function(f,c){var a=this.that,d;(null==f||null==c)&&(d=this.vrows)&&d.length&&(f=c=d[d.length-1]);a.initV=f;a.finalV=c};p.calcVisibleV=function(){for(var f=this.that,c=f.pdata||[],a=c.length,d=[],b=0,f=f.options.freezeRows;f<a;f++)c[f].pq_hidden||
(d[b++]=f);this.vrows=d};p.calcVisibleH=function(){for(var f=this.that,c=[],a=0,d=f.colModel,f=f.options.freezeCols,b=d.length;f<b;f++)d[f].hidden||(c[a++]=f);this.vcols=c};p.calcInitFinal=function(){var f=this.that,c=f.options,a=c.virtualY,d=c.freezeRows,b="flex"===c.height,e=f.pdata;if(null==e||0===e.length)d=this.getTotalVisibleRows(n,d,e),f.totalVisibleRows=d.tvRows,a=d.initV,c=d.finalV,f.lastFrozenRow=d.lastFrozenRow;else if(a){var n=parseInt(f.vscroll.option("cur_pos"));if(isNaN(n)||0>n)throw"cur_pos NA";
f.scrollCurPos=n;d=this.getTotalVisibleRows(n,d,e);f.totalVisibleRows=d.tvRows;a=d.initV;f.lastFrozenRow=d.lastFrozenRow;c=b&&!c.maxHeight?e.length-1:d.finalV}else d=this.getTotalVisibleRows(0,d,e),f.lastFrozenRow=d.lastFrozenRow,f.totalVisibleRows=d.tvRows,a=0,c=e.length-1;this.setInitV(a,c)};p.calcInitFinalH=function(){var f=this.that,c=f.options,a,d=f.colModel,b=d.length;if(c.virtualX){a=parseInt(f.hscroll.option("cur_pos"));var e=parseInt(c.freezeCols),n="flex"===c.width,k=this.vcols;k||(this.calcVisibleH(),
k=this.vcols);a=k[a];a>b-1&&(a=b-1);0>a&&(a=0);if(n&&!c.maxWidth)c=b-1;else{f=f.calcWidthCols(-1,e);e=this.getEContWd();for(n=a;n<b;n++)if(k=d[n],!k.hidden){k=k.outerWidth;if(!k&&c.debug)throw"outerwidth N/A";f+=k;if(f>e)break}c=n;c>b-1&&(c=b-1)}}else a=0,c=b-1;this.setInitH(a,c)};p._calcOffset=function(f){return(f=/(-|\+)([0-9]+)/.exec(f))&&3===f.length?parseInt(f[1]+f[2]):0};p.setMax=function(f){var c=this.that,a=c.element;(c=c.options[f])?(c==parseInt(c)&&(c+="px"),a.css(f,c)):a.css(f,"")};p.refreshGridWidthAndHeight=
function(){var f=this.that,c=f.options,a,d,b=-1<(c.width+"").indexOf("%")?!0:!1,e=-1<(c.height+"").indexOf("%")?!0:!1,n=-1<(c.maxHeight+"").indexOf("%")?!0:!1,k="flex"==c.height,h=n&&k,q=-1<(c.maxWidth+"").indexOf("%")?!0:!1,g="flex"==c.width,m=q&&g,f=f.element;if(b||e||h||m){var C=f.parent();if(!C.length)return;var s;C[0]==document.body||"fixed"==f.css("position")?(s=l(window).width(),C=window.innerHeight?window.innerHeight:l(window).height()):(s=C.width(),C=C.height());var r=this._calcOffset,t=
b?r(c.width):0,r=e?r(c.height):0;m?a=parseInt(c.maxWidth)*s/100:b&&(a=parseInt(c.width)*s/100+t);h?d=parseInt(c.maxHeight)*C/100:e&&(d=parseInt(c.height)*C/100+r)}a||(g&&c.maxWidth?q||(a=c.maxWidth):b||(a=c.width));c.maxWidth&&(this.maxWidthPixel=a);d||(k&&c.maxHeight?n||(d=c.maxHeight):e||(d=c.height));parseFloat(a)==a?(a=a<c.minWidth?c.minWidth:a,f.css("width",a)):"auto"===a&&f.width(a);parseFloat(d)==d&&(d=d<c.minHeight?c.minHeight:d,f.css("height",d));this.width=Math.round(f.width());this.height=
Math.round(f.height())};p.decidePanes=function(){var f=this.that,c=f.pqpanes={v:!1,h:!1,vH:!1},a=f.options,f=a.virtualX,d=a.virtualY,b="flex"==a.height&&!a.maxHeight,e="flex"==a.width&&!a.maxWidth,n=a.numberCell,k=a.freezeRows,a=a.freezeCols;!k||b||!a&&!n.show||e?k&&!b?d||(c.h=!0):!a&&!n.show||e||f||(c.v=!0,c.vH=!0):(d||(c.h=!0),f||(c.v=!0,c.vH=!0))};p._storeColumnWidths=function(f){for(var c=this.that,a=c.options,d=c.colModel,b=a.virtualX,a=a.freezeCols,e=c.initH,c=f?d.length-1:c.finalH,n=[],k=0;k<=
c;k++)!f&&b&&k<e&&k>=a&&(k=e),n[k]={outerWidth:d[k].outerWidth};return n};p._isColumnWidthChanged=function(f){for(var c=this.that,a=c.colModel,c=c.iGenerateView.colDef,d=0,b=c.length;d<b;d++){var e=c[d].colIndx;if(a[e].outerWidth!==f[e].outerWidth)return!0}return!1};p.softRefresh=function(){var f=this.that,c=f.options;this.refreshScrollbars();f.iGenerateView.setPanes();f._saveDims();f.iMouseSelection.syncScrollBarVert();"flex"==c.height&&this.setContAndGridHeightForFlex();"flex"==c.width&&this.setContAndGridWidthForFlex();
this._refreshFrozenLine()};p.refreshScrollbars=function(f){f=f||{};var c=this.that,a=c.options,d=c.iGenerateView,b,e="flex"===a.height;b="flex"===a.width;if((e||this.contHt)&&(b||this.contWd)&&null!==c.totalVisibleRows){c=this.setScrollVNumEles(f);c=1<c?!0:!1;if((!e||a.maxHeight)&&c!==this.vscroll)if(this.vscroll=c,a.scrollModel.autoFit||a.virtualX||b){if(a=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(a)||b)this.ignoreTResize=!0,this._refreshTableWidths(a,{table:!0,
header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),d.setPanes(),c=this.setScrollVNumEles(!0),this.vscroll=1<c?!0:!1}else d.setPanes();c=this.setScrollHNumEles();b=1<c?!0:!1;this.hscroll!=b&&(this.hscroll=b,d.setPanes());this._setScrollHLength();this._setScrollVLength(f);this._setScrollHVLength()}};p._setScrollHVLength=function(){var f=this.that;this.vscroll&&this.hscroll||f.$hvscroll.css("visibility","hidden")};p._setScrollHLength=function(){var f=this.that,c=f.hscroll.widget(),
a=f.$hvscroll;if(f.options.scrollModel.horizontal){c.css("visibility","");a.css("visibility","");var a=this.contWd,d=this.getSBWidth();c.css("right",0===d?0:"");f.hscroll.option("length",a-d)}else c.css("visibility","hidden"),a.css("visibility","hidden")};p.estVscroll=function(){var f=this.that,c=!0;null==f.totalVisibleRows||null==this.contHt?c=!1:f.totalVisibleRows*this.rowHt<this.contHt&&(c=!1);this.vscroll=c};p.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:
0};p.estHscroll=function(){var f=this.that;if(null==this.contWd)throw"failed";var c=!1;1<this.calcColsOutsideCont(f.colModel)+1&&(c=!0);this.hscroll=c};p.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};p.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};p.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};p.calcColsOutsideCont=function(f){var c=this.that.options,
a=c.numberCell,c=c.freezeCols,d=this.contWd-this.getSBWidth(),b=0;a.show&&(b+=a.outerWidth);for(a=0;a<f.length;a++){var e=f[a];e.hidden||(b+=e.outerWidth)}var n=0,k=0,e=Math.round(b);e>d&&k++;for(a=c;a<f.length;a++)if(e=f[a],!e.hidden)if(n+=e.outerWidth,e=b-n,e>d)k++;else break;return k};p.setScrollHNumEles=function(){var f=this.that,c=f.options,a=f.colModel,d=c.scrollModel,b=0;if("flex"!==c.width||c.maxWidth)b="fullScroll"===d.lastColumn?a.length-c.freezeCols-f._calcNumHiddenUnFrozens():this.calcColsOutsideCont(a)+
1;f.hscroll.option("num_eles",b);return b};p.init=function(){var f=this.that,c=f.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;f.initH=f.initV=f.finalH=f.finalV=null;f.totalVisibleRows=f.lastFrozenRow=null;this.rowHt=c.rowHeight;this.headerHt=0;this.height=null};p.refresh=function(f){f=f||{};var c=this.that,a=f.header,d=f.table,b=f.pager,e,n=c.iGenerateView;e=c.element;if(e[0].offsetWidth){f.toolbar&&c.refreshToolbar();c.iMouseSelection.resetMargins();this.init();e=c.options;this.decidePanes();
e.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===a||!1===d)var k=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();n.createColDefs();!1!==a?c._createHeader():this._isColumnWidthChanged(k)&&this._refreshTableWidths(k,{header:!0});c._refreshHeaderSortIcons();!1!==b&&c._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==d?n.generateView({source:f.source}):
(this._refreshTableWidths(k,{table:!0}),n.setPanes());c._saveDims();n.scrollView();this.refreshScrollbars();"flex"==e.height&&this.setContAndGridHeightForFlex();"flex"==e.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();c._createCollapse();e.dataModel.postDataOnce=void 0}else e.addClass("pq-pending-refresh")};p.summaryTable=function(){var f=this.$summary,c=this.that,a=c.options.summaryData;a?(f||(f=this.$summary=l("<div class='pq-grid-summary'></div>").prependTo(c.$bottom)),f={data:a,
$cont:f},c.createTable(f)):f&&f[0].innerHTML&&f.empty()};p.refreshVscroll=function(f){f=this.that;var c=f.iGenerateView,a=f.options;if(a.virtualY&&!a.scrollModel.smooth){var d=f.initV,b=f.finalV;this.calcInitFinal();var e=d-f.initV,n=b-f.finalV;a.fullrefreshOnScroll||a.detailModel.init||f._mergeCells||1!=Math.abs(e)||1!=Math.abs(n)?d==f.initV&&b==f.finalV||c.generateView():-1==e?(c.removeTopRow(1),c.appendRow(f.finalV-b)):1==e&&(c.prependRow(),c.removeBottomRow(b-f.finalV));f._saveDims();c.scrollView();
1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};p._refreshTableWidths=function(f,c){var a=this.that,d=a.$tbl_header,b=c.header&&d,e=a.$tbl,n=c.table&&e,d=b?d.children().children(".pq-row-hidden"):null,k=b?a.$header.find(".pq-grid-col-resize-handle"):null,e=n&&e?e.children().children(".pq-row-hidden"):null,h,q=!1,g=0;n&&a.tables.length&&(n=a.tables[0].$tbl.children().children(".pq-row-hidden"),e=e?e.add(n):n);for(var n=a.iGenerateView.colDef,m=0,l=n.length;m<l;m++){var s=n[m],r=s.colIndx,t=
f[r].outerWidth,s=s.column.outerWidth;s!==t&&(b&&(h=d.find("td[pq-col-indx="+r+"]"),h.width(s)),e&&(h=e.find("td[pq-col-indx="+r+"]"),h.length&&(q=!0,h.width(s))));g+=s-t;b&&0!==g&&(r=k.filter("[pq-col-indx="+r+"]"),t=parseInt(r.css("left")),r.css("left",t+g))}q&&a._trigger("tableWidthChange");a._saveDims()}})(jQuery);
(function(l){function p(a,b,d){for(var e=0,c=a.length;e<c;e++){for(var n=a[e],k={},f=0,l=b.length;f<l;f++){var p=b[f];k[p]=n[p]}d.push(k)}}function f(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,d){b._onchange(d)}).on("dataReady changeDone",function(){b.summaryData()})}var c=l.paramquery,a=c.cClass,d={options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",
collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",
mode:"AND",header:!1}},_create:function(){var a=this,b=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new c.cHistory(a);a.iGroupView=new c.cGroupView(a);c.cMerge&&(a.iMerge=new c.cMerge(a));a.iFilterData=new c.cFilterData(a);a.iSelection=new e.Selection(a);a.iHeaderSearch=new n(a);a.iUCData=new c.cUCData(a);a.iMouseSelection=new c.cMouseSelection(a);a._super();new f(a);a.iDragColumns=new c.cDragColumns(a);a.refreshToolbar();"remote"===b.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",
function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.__init();a.refreshDataAndView({header:!0})}},b;d.__init=function(){b||(b=l("<div style='position:fixed;bottom:0;right:20px;padding:0 2px;margin:0;opacity:0.5;z-index:10000;border:1px solid lightgray;border-radius:5px;'><a style='font-size:10px;text-decoration:none;' href='http://paramquery.com/pro'>ParamQuery Pro Eval</a></div>").appendTo(document.body))};l.widget("paramquery.pqGrid",
c._pqGrid,d);l.widget.extend=function(){var a=Array.prototype.shift,b=l.isPlainObject,d=l.isArray,e=l.widget.extend,c=a.apply(arguments),n;"boolean"==typeof c&&(n=c,c=a.apply(arguments));var k=arguments,f=0,p=k.length,u,y,z;for(null==n&&(n=1<p?!0:!1);f<p;f++)for(y in u=k[f],u)z=u[y],void 0!==z&&(a=0<f?!1:!0,b(z)?(c[y]=c[y]||{},e(a,c[y],z)):d(z)?c[y]=n&&a?z.slice():z:c[y]=z);return c};var e=window.pq=window.pq||{};e.grid=function(a,b){var d=l(a).pqGrid(b);return d.data("paramqueryPqGrid")||d.data("paramquery-pqGrid")};
c.pqGrid.regional={};d=c.pqGrid.prototype;c.pqGrid.defaults=d.options;d.focus=function(a){a=a||{};var b=a.$td,d=a.rowIndxPage;a=a.colIndx;if(b){if(null==d||null==a)a=this.getCellIndices({$td:b}),d=a.rowIndxPage,a=a.colIndx}else{if(null==d||null==a){if((d=document.activeElement)&&d!=document.body&&"pq-grid-excel"!=d.id&&"pq-grid-cont"!=d.className||!(b=this._focusElement))return;d=b.rowIndxPage,a=b.colIndx}var b=this.iMerge,e=d+this.rowIndxOffset;b.ismergedCell(e,a)&&(b=b.getRootCell(e,a,"o"),d=b.rowIndxPage,
a=b.colIndx);b=this.getCell({rowIndxPage:d,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:b,rowIndxPage:d,colIndx:a};var c;b[0]&&(c=b[0])&&"TD"==c.nodeName.toUpperCase()?(c.setAttribute("tabindex",0),c.focus()):(d=this.options.dataModel.data)&&d.length||this.$cont.focus()}else{if(c=this._focusElement)this.removeClass({rowIndxPage:c.rowIndxPage,colIndx:c.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:d,colIndx:a,
cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:d,colIndx:a});d=this.$cont;document.activeElement!=d[0]&&d[0].focus()}};d.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};d.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};d.range=function(a,b){return new e.Range(this,a,"range",b)};d.rowExpand=
function(a){this.iHierarchy.rowExpand(a)};d.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};d.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};d.saveState=function(a){a=a||{};var b=this.element,d=l.extend,e=this.options,c=d(!0,{},{sorter:e.sortModel.sorter}),n=e.pageModel,n={rPP:n.rPP,curPage:n.curPage},k=this.colModel,f=[],p,u,y=0,z=k.length;u=e.groupModel;d=d(!0,{},{dataIndx:u.dataIndx,dir:u.dir,collapsed:u.collapsed,merge:u.merge,grandSummary:u.grandSummary});for(b=b[0].id;y<
z;y++){p=k[y];u={width:p.width,dataIndx:p.dataIndx};if(p=p.filter)u.filter={value:p.value,value2:p.value2,on:p.on};f[y]=u}e={colModel:f,height:e.height,datestamp:Date.now(),width:e.width,groupModel:d,pageModel:n,sortModel:c,freezeRows:e.freezeRows,freezeCols:e.freezeCols};!1!==a.stringify&&(e=JSON.stringify(e),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),e));return e};d.loadState=function(a){a=a||{};var b;b=l.widget.extend;var d=l.extend,e=this.element[0].id;
if(e=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(e?e:""))))"string"==typeof e&&(e=JSON.parse(e));else return!1;for(var c=e.colModel,n,k,f=[],p=[],u=[],y=this.options,z=1<this.depth,A=z?this.colModel:y.colModel,B=0,v=c.length;B<v;B++)n=c[B],k=n.dataIndx,p[k]=B,f[k]=n.width,u[k]=n.filter;z||A.sort(function(a,b){return p[a.dataIndx]-p[b.dataIndx]});B=0;for(v=A.length;B<v;B++)c=A[B],k=c.dataIndx,c.width=f[k]||c.width,c.filter=d(c.filter,u[k]);this.iColModel.init();b(y.sortModel,
e.sortModel);b(y.pageModel,e.pageModel);b=e.groupModel;b.refresh=!1;this.groupOption(b);b={freezeRows:e.freezeRows,freezeCols:e.freezeCols};isNaN(1*y.height)||isNaN(1*e.height)||(b.height=e.height);isNaN(1*y.width)||isNaN(1*e.width)||(b.width=e.width);this.option(b);!1!==a.refresh&&this.refreshDataAndView();return!0};var n=function(a){function b(d,e,c){a.filter({data:[{dataIndx:d,value:e,value2:c}]})}this.that=a;var d=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var e=l(a.originalEvent.target);
return e.hasClass("pq-grid-hd-search-field")?d.onKeyDown(a,b,e):!0});a.on("createHeader",function(a,b){return d._onCreateHeader()});this.changeListener={change:function(a,d){b(d.dataIndx,d.value,d.value2)}};this.keyupListener={keyup:function(a,d){b(d.dataIndx,d.value,d.value2)}};this.clickListener={click:function(a,d){b(d.dataIndx,d.value)}}},a=n.prototype=new a;a.get$Ele=function(a,b){var d=this.that,e=d.options.freezeCols,c=l(d.$tbl_header[0]),n=".pq-grid-hd-search-field[name='"+b+"']",d=l(d.$tbl_header[2==
d.$tbl_header.length?1:0]);return a>=e?d.find(n):c.find(n)};a.onKeyDown=function(a,b,d){b=this.that;if(a.keyCode===l.ui.keyCode.TAB){var e=d.attr("name"),c=b.getColIndx({dataIndx:e}),n=b.colModel,k,f=a.shiftKey,p=n[c];if("between"==p.filter.condition&&(b.scrollColumn({colIndx:c}),e=this.get$Ele(c,e),e[0]==d[0]?f||(k=e[1]):f&&(k=e[0]),k))return k.focus(),a.preventDefault(),!1;do{f?c--:c++;if(0>c||c>=n.length)break;p=n[c];d=p.filter;if(!p.hidden&&d){b.scrollColumn({colIndx:c});e=p.dataIndx;k=this.get$Ele(c,
e);"between"==d.condition&&(k=f?l(k[1]):l(k[0]));if(k)return k.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};a._bindFocus=function(){function a(e){e=l(e.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:e})){var c=b.getColIndx({dataIndx:e});d.get$Ele(c,e).focus()}}for(var b=this.that,d=this,e=b.$header.find(".pq-grid-header-search-row"),c=0;c<e.length;c++)l(e[c]).on("focusin",a)};a._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();
var d=a.colModel,b=b.freezeCols,e=a.$tbl_header,c=l(e[0]),n=l(e[1]),k="input,select";if(1<e.length){c.find(k).css("visibility","hidden");for(var f=0;f<b;f++){var p=d[f],k="*[name='"+p.dataIndx+"']";c.find(k).css("visibility","visible");n.find(k).css("visibility","hidden")}}d=a.iGenerateView.colDef;f=0;for(k=d.length;f<k;f++){var u=d[f],y=u.colIndx,p=u.column,z=p.filter;if(z){var u=p.dataIndx,A=c;y>=b&&1<e.length&&(A=n);y=A.find("*[name='"+u+"']");if(0!=y.length){var A=z.type,B=z.value,v=z.value2;
"checkbox"==A&&"triple"==z.subtype?y.pqval({val:B}):"select"==A&&null!=B&&y.val(B);(A=z.init)&&A.call(y,{dataIndx:u,column:p});if(p=z.listeners)for(z=0;z<p.length;z++){A=p[z];"string"==typeof A&&(A=this[A+"Listener"]);for(var x in A)(function(b,d,e){b.bind(x,function(c){var g=a.getColumn({dataIndx:e}),n=g.filter;"checkbox"==n.type?B="triple"==n.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==n.condition?(B=l(b[0]).val(),v=l(b[1]).val()):B=b.val();return d.call(this,c,{column:g,dataIndx:e,
value:B,value2:v})})})(y,A[x],u)}}}}}};var k=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};a.createDOM=function(a,b){var d=this.that,e=d.options,n=e.bootstrap.on?" ":" ui-corner-all",e=e.numberCell;a.push("<tr class='pq-grid-header-search-row'>");e.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var e=d.iGenerateView.colDef,f=0,
l=e.length;f<l;f++){var p=e[f].column,w=b,u=p.halign;u||(u=p.align);"right"==u?w+=" pq-align-right":"center"==u&&(w+=" pq-align-center");(u=p.cls)&&(w=w+" "+u);if(u=p.filter){var y=p.dataIndx,z=u.type,A=u.value,B=u.condition,v=u.cls,v="pq-grid-hd-search-field "+(v?v:""),x=u.style,x=x?x:"",D=u.attr,D=D?D:"",E="";if("between"==B)var F=u.value2,F=null!=F?F:"";"textbox"===z?(A=A?A:"",v=v+" pq-search-txt"+n,E="between"==B?k(this._input(y,A,v+" pq-from",x,D),this._input(y,F,v+" pq-to",x,D)):this._input(y,
A,v,x,D)):"textarea"===z?(A=A?A:"",v=v+" pq-search-txt"+n,E="between"==B?k(this._textarea(y,A,v+" pq-from",x,D),this._textarea(y,F,v+" pq-to",x,D)):this._textarea(y,A,v,x,D)):"select"===z?u.cache?E=u.cache:(z=u.options,"function"===typeof z&&(z=z.call(d,{column:p,value:A,dataIndx:y,cls:v,style:x,attr:D})),v+=n,p=["name='",y,"' class='",v,"' style='",x,"' ",D].join(""),E=c.select({options:z,attr:p,prepend:u.prepend,valueIndx:u.valueIndx,labelIndx:u.labelIndx,groupIndx:u.groupIndx}),u.cache=E):"checkbox"==
z?E=["<input ",null==A||!1==A?"":"checked=checked"," name='",y,"' type=checkbox class='"+v+"' style='"+x+"' "+D+"/>"].join(""):"string"==typeof z?E=z:"function"==typeof z&&(E=z.call(d,{width:p.outerWidth,value:A,value2:F,column:p,dataIndx:y,cls:v,attr:D,style:x}));a.push(["<td class='",w,"'><div class='pq-td-div' >",E,"</div></td>"].join(""))}else a.push(["<td class='",w,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};a._input=function(a,b,d,e,c){return['<input value="',
b,"\" name='",a,"' type=text style='"+e+"' class='"+d+"' "+c+" />"].join("")};a._textarea=function(a,b,d,e,c){return["<textarea name='",a,"' style='"+e+"' class='"+d+"' "+c+" >",b,"</textarea>"].join("")};d.refreshToolbar=function(){var a=this.options,b=a.toolbar,d;this._toolbar&&(d=this._toolbar,d.destroy());if(b){var c=b.cls,n=b.style,k=b.attr,b=b.items,c=l("<div class='"+(c?c:"")+"' style='"+(n?n:"")+"' "+(k?k:"")+" ></div>");d?d.widget().replaceWith(c):this.$top.append(c);d=e.toolbar(c,{items:b,
gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||c.css("display","none");this._toolbar=d}};d.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};d.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,b)};d.filter=function(a){var b=this,d=this.options,e=void 0===a.apply?!0:a.apply,c=void 0===a.sort?!0:a.sort,n=d.dataModel,d=d.filterModel;if(void 0!=a){var k="replace"==a.oper?!0:!1;a=a.data;for(var f=this.colModel,f=e?f:l.extend(!0,[],f),
p=0,u=f.length,y=a.length,z=0;z<u;z++){for(var A=f[z],B=!1,v=0;v<y&&p!=y;v++){var x=a[v];if(x.dataIndx==A.dataIndx){B=!0;p++;var v=A.filter,D=x.condition,E=x.value;v?v.on=!0:v=A.filter={on:!0};D&&(v.condition=D);D=v.condition;v.value=E;if("between"==D)v.value2=x.value2;else if("range"==D){x=[];if(E)if("string"==typeof E){var D=v.options,F=E.indexOf('"'),H=E.lastIndexOf('"'),E=E.substr(F,H+1),E=JSON.parse("["+E+"]");if(D)for(F=0,H=D.length;F<H;F++){var J=D[F];-1!=l.inArray(J,E)&&x.push(J)}else x=E.split(",s*")}else"function"==
typeof E.push&&(x=E);v.value=x}break}}k&&!B&&A.filter&&(A.filter.on=!1)}}var N={header:!1,apply:e,sort:c,CM:f};if("remote"==n.location&&"local"!=d.type)this.remoteRequest({apply:e,CM:f,callback:function(){return b._onDataAvailable(N)}});else return N.source="filter",N.trigger=!1,b._onDataAvailable(N)};d._initTypeColumns=function(){for(var a=this.colModel,b=0,d=a.length;b<d;b++){var e=a[b],n=e.type;"checkBoxSelection"===n||"checkbox"==n?(e.type="checkbox",new c.cCheckBoxColumn(this,e)):"detail"===
n&&(e.dataIndx="pq_detail",this.iHierarchy=new c.cHierarchy(this,e))}};d.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};d._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};d.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);};d.bringCellToView=function(a){this._bringCellToView(a)};d._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};d.pageData=function(){return this.pdata};
d.getData=function(a){a=a||{};var b=a.dataIndx,d=b?b.length:0,e=a.data;a=this.options.dataModel;var c=a.data,n=a.dataUF;a=[];if(d)e?p(e,b,a):(c&&p(c,b,a),n&&p(n,b,a));else return c.concat(n?n:[]);e=[];for(c=0;c<d;c++){var n=b[c],k=this.getColumn({dataIndx:n});e.push({dataIndx:n,dir:"up",dataType:k.dataType,sortType:k.sortType})}a=this.iSort._sortLocalData(e,a);b=[];d=void 0;e=0;for(c=a.length;e<c;e++)n=a[e],k=JSON.stringify(n),k!==d&&(b.push(n),d=k);return b};d.get_p_data=function(){var a=this.options,
b="remote"==a.pageModel.type,d=a.dataModel.data,e=this.pdata,c=this.rowIndxOffset,a=a.groupModel,n=c&&b?Array(c):[];return a.on&&a.dataIndx.length?c?(b||(n=d.slice(0,c)),n.concat(e)):e:c&&b?n.concat(e):d};d._onDataAvailable=function(a){a=a||{};var b=this.options,d=null==a.apply?!0:a.apply,e=a.source,c=a.sort,n=[],n=b.filterModel,k=b.dataModel,b=b.sortModel,f=k.location;!1!==d&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:e});n=n&&n.on&&("local"==f&&"remote"!=n.type||"remote"==f&&"local"==
n.type)?this.iFilterData.filterLocalData(a).data:k.data;"local"==b.type&&!1!==c&&(d?this.sort({refresh:!1}):n=this.iSort.sortLocalData(n));if(!1===d)return n;k.data=n;this.refreshView(a)};d.sort=function(a){a=a||{};var b=this,d=this.options,e=d.dataModel.data,c=d.sortModel.type;if(e&&e.length||"local"!=c){var n=d.editModel,d=this.iSort,k=d.getSorter(),f,l=a.evt,p=null==a.single?d.readSingle():a.single;f=d.readCancel();a.sorter?a.addon?(a.single=p,a.cancel=f,f=d.refreshSorter(a)):f=a.sorter:f=d.readSorter();
if(f.length||k.length)n.indices&&b.blurEditor({force:!0}),n={dataIndx:f.length?f[0].dataIndx:null,oldSorter:k,sorter:f,source:a.source,single:p},!1===b._trigger("beforeSort",l,n)?d.cancelSort():(d.resumeSort(),"local"==c&&d.saveOrder(),d.setSorter(f),d.setSingle(p),d.writeSorter(f),d.writeSingle(p),"local"==c?(d.sortLocalData(e),this._queueATriggers.sort={evt:l,ui:n},!1!==a.refresh&&this.refreshView()):"remote"==c&&(this._queueATriggers.sort={evt:l,ui:n},a.initByRemote||this.remoteRequest({initBySort:!0,
callback:function(){b._onDataAvailable()}})))}};d.reset=function(a){a=a||{};var b=a.sort,d,e=0,c;d=this.options;c=l.extend;var n,k=a.filter,f=a.group;if(b||k||f){b&&(n=!0===b?{sorter:[]}:b,c(d.sortModel,n));if(k)for(d=this.getColModel(),c=d.length;e<c;e++)if(n=d[e].filter)n.value=null,n.value2=null,n.cache=null;f&&(e=!0===f?{dataIndx:[]}:f,e.refresh=!1,this.groupOption(e));!1!==a.refresh&&(k?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};d._trigger=
c._trigger;d.on=c.on;d.one=c.one;d.off=c.off;d.pager=function(){return this.pagerW};d.vscrollbar=function(){return this.vscroll};d.hscrollbar=function(){return this.hscroll};d.toolbar=function(){return this._toolbar.element};a=f.prototype;a.callRow=function(a,b,d){if(a)for(;d--;){var e=b[d],c=e.column;a[c.dataIndx]=e.formula.call(this.that,{rowData:a,column:c})}};a._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,d=b.length,e=this.formulas;d--;)this.callRow(b[d],
e,a)};a.summaryData=function(){var a=this.formulas,b=a.length,d,e;if(b)for(d=this.that.options.summaryData||[],e=d.length;e--;)this.callRow(d[e],a,b)};a._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var d=this.formulas,e=a.length;e--;)this.callRow(a[e].rowData,d,b)}};a.findformulas=function(){for(var a=this.that.colModel,b,d,e=[],c=a.length;c--;)b=a[c],(d=b.formula)&&e.push({formula:d,column:b});this.formulas=e};a=c.cColModel=a=function(a){this.that=a;this.init()};a=a.prototype;
a.extend=function(a,b){for(var d,e,c=l.extend,n=a.length;n--;){var k=a[n];for(d in b)void 0===k[d]&&(e=b[d],k[d]=e&&"object"==typeof e?c(!0,{},e):e)}};a.init=function(){var a=this.that,b=a.options,d=b.columnTemplate,e;e=b.colModel;e||(this._autoGenColumns(),e=b.colModel);b=this.nestedCols(e);a.depth=b.depth;b=a.colModel=b.colModel;e=b.length;d&&this.extend(b,d);this.getHeadersCells();this.alignColumns(b,e);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};a.alignColumns=function(a,
b){for(var d=0;d<b;d++){var e=a[d];if(!e.align){var c=e.dataType;!c||"integer"!=c&&"float"!=c||(e.align="right")}}};a.nestedCols=function(a,b,d,e){var c=a.length,n=[];null==b&&(b=1);for(var k=b,f=0,l=0,p=0,y=0;y<c;y++){var z=a[y];z.parent=e?e:void 0;!0===d&&(z.hidden=d);var A=z.colModel;A&&A.length?(A=this.nestedCols(A,b+1,z.hidden,z),n=n.concat(A.colModel),0<A.colSpan?(A.depth>k&&(k=A.depth),z.colSpan=A.colSpan,f+=A.colSpan):z.colSpan=0,p+=A.o_colspan,z.o_colspan=A.o_colspan,z.childCount=A.childCount,
l+=A.childCount):(z.hidden?z.colSpan=0:(z.colSpan=1,f++),p++,z.o_colspan=1,z.childCount=0,l++,n.push(z))}return{depth:k,colModel:n,colSpan:f,width:0,childCount:l,o_colspan:p}};a.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,d=a.colModel.length,e=a.depth,c=[],n=0;n<e;n++){c[n]=[];for(var k=0,f=0,l=0;l<d;l++){var p;if(0==n)p=b[k];else{var y=c[n-1][l];if((p=y.colModel)&&0!=p.length){for(var y=l-y.leftPos,z=0,A=0,B=0;B<p.length;B++)if(z+=0<p[B].childCount?p[B].childCount:1,y<z){A=
B;break}p=p[A]}else p=y}y=p.childCount?p.childCount:1;l==f?(p.leftPos=l,c[n][l]=p,f+=y,b[k+1]&&k++):c[n][l]=c[n][l-1]}}return a.headerCells=c};a.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};a.assignRowSpan=function(){for(var a=this.that,b=a.colModel.length,d=a.headerCells,a=a.depth,e=0;e<b;e++)for(var c=0;c<a;c++){var n=d[c][e];if(!(0<e&&n==d[c][e-1]||0<c&&n==d[c-1][e])){for(var k=1,f=c+1;f<a;f++)n==d[f][e]&&k++;n.rowSpan=k}}return d};
a._autoGenColumns=function(){var a=this.that.options,b=a.columnTemplate||{},d=b.dataType,c=b.title,n=b.width,b=a.dataModel.data,k=e.validation,f=[];b&&b.length&&l.each(b[0],function(a,b){var e="string";k.isInteger(b)?e=-1<b+-1?"float":"integer":k.isDate(b)?e="date":k.isFloat(b)&&(e="float");f.push({dataType:d?d:e,dataIndx:a,title:c?c:a,width:n?n:100})});a.colModel=f};a._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,d={},e={},c={},n=a.colModel,k=n.length,f=0;f<
k;f++){var l=n[f],p=l.dataIndx;null==p&&(p="detail"==l.type?"pq_detail":b?"dataIndx_"+f:f,"pq_detail"==p&&(l.dataType="object"),l.dataIndx=p);d[p]=l;e[p]=f;l.validations&&(c[p]=c)}a.columns=d;a.colIndxs=e;a.validations=c}})(jQuery);
(function(l){var p=l.paramquery,f=p._pqGrid.prototype;f.exportExcel=function(a){a=a||{};a.format="xlsx";return this.exportData(a)};f.exportCsv=function(a){a=a||{};a.format="csv";return this.exportData(a)};f.exportData=function(a){return(new c(this,a)).Export(a)};var c=p.cExport=function(a,d){this.that=a;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:";>wlk udqrhnm<!0-/! dmbnchmf<!TSE,7! rs`mc`knmd<!xdr!>=;vnqjannj wlkmr<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.roqd`crgddslk.1//5.l`hm! wlkmr9q<!gsso9..rbgdl`r-nodmwlkenql`sr-nqf.neehbdCnbtldms.1//5.qdk`shnmrghor!=;rgddsr=;rgdds m`ld<!O`q`lPtdqx Oqn Du`k! rgddsHc<!0! q9hc<!qHc0!.=;.rgddsr=;.vnqjannj=".replace(/[^\s]/g,function(a){return String.fromCharCode(a.charCodeAt(0)+1)}),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
f=c.prototype;f.getTitle=function(a,d){var b=a.title;b?"function"==typeof b&&(b=b.call(this.that,{colIndx:d,column:a,dataIndx:a.dataIndx,Export:!0})):b="";return b};f.getRenderVal=function(a,d,b){var e=a.column,c=e.exportRender;return(d&&!1!==c||c)&&(e.render||e._render||e.format)?b.renderCell(a):a.rowData[a.dataIndx]};f.getXlsMergeCells=function(a,d,b,e){a=a.concat(b.getMergeCells(d,this.curPage,e));d=[];b=p.toLetter;e=a.length;d.push('<mergeCells count="'+e+'">');for(var c=0;c<e;c++){var k=a[c],
k=b(k.c1)+(k.r1+1)+":"+b(k.c2)+(k.r2+1);d.push('<mergeCell ref="',k,'"/>')}d.push("</mergeCells>");return e?d.join(""):""};f.getXlsCols=function(a,d){var b=[];b.push("<cols>");for(var e=0;e<d;e++){var c=a[e],k=e+1,h=c.hidden?"1":"0",f=c._width;f||(f=parseInt(c.width))||(f=100);b.push('<col min="',k,'" max="',k,'" hidden="',h,'" customWidth="1" width="',f/7,'"/>')}b.push("</cols>");return b.join("")};f.getXlsHeader=function(a,d,b){for(var e=[],c=0;c<d;c++){var k=a[c];e.push("<row>");for(var h=0,f=
k.length;h<f;h++){var g=k[h];if(!1!==g.copy){var m=g.o_colspan,l=g.rowSpan,p=this.getTitle(g,h);0<c&&g==a[c-1][h]?p="":0<h&&g==a[c][h-1]?p="":(1<m||1<l)&&b.push({r1:c,c1:h,r2:c+l-1,c2:h+m-1});e.push('<c t="inlineStr"><is><t><![CDATA['+p+"]]\x3e</t></is></c>")}}e.push("</row>")}return e.join("")};f.getXlsBody=function(a,d,b,e,c,k,h,f,g){var m=[],l,p,r,t,w,u,y={integer:"Number","float":"Number",bool:"bool"};for(l=0;l<e;l++){w=b[l];p=w.pq_hidden?'hidden="1"':"";u=c?l+k:l;r=u-k;w={rowIndx:u,rowIndxPage:r,
rowData:w,Export:!0};m.push("<row "+p+">");for(p=0;p<d;p++)t=a[p],!1!==t.copy&&(r=void 0,h.ismergedCell(u,p)&&(h.isRootCell(u,p,"o")||(r=null)),void 0===r&&(w.colIndx=p,w.column=t,w.dataIndx=t.dataIndx,r=this.getRenderVal(w,f,g)),t=(t=null==r?null:y[t.dataType])?t:"String","Number"==t&&(isNaN(1*r)?t="String":r*=1),r=null==r?"":r,"String"==t?m.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>"):"Number"==t?m.push("<c><v>"+r+"</v></c>"):"bool"==t?(r=r?"1":"0",m.push('<c t="b"><v>'+r+"</v></c>")):
m.push("<c><v>"+r+"</v></c>"));m.push("</row>")}return m.join("\n")};f.getXlsContent=function(a,d,b,e,c,k,h,f,g,m,l,p){var r='<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',t=this.getXlsCols(a,d),w=[],u=p?e:0,r=r.replace("<%=a%>",u),r=r.replace("<%=b%>",u+1);b=p?this.getXlsHeader(b,e,w):"";a=this.getXlsBody(a,d,c,k,h,f,g,m,l);return[r,t,"<sheetData>",b,a,"</sheetData>",this.getXlsMergeCells(w,
p?e:0,g,k)].join("")};f.getHtmlHeader=function(a,d){for(var b=[],e,c,k,h,f=0;f<d;f++){var g=a[f],m=null;b.push("<tr>");for(var l=0,p=g.length;l<p;l++)e=g[l],c=e.colSpan,!e.hidden&&c&&!1!==e.copy&&(k=e.rowSpan,0<f&&e==a[f-1][l]||m&&0<l&&e==m||(h=this.getTitle(e,l),m=e,e=(e=e.halign||e.align)?"align="+e:"",b.push("<th colspan=",c," rowspan=",k," ",e,">",h,"</th>")));b.push("</tr>")}return b.join("")};f.getHtmlBody=function(a,d,b,e,c,k,h,f,g){var m=[],l,p,r,t,w,u,y;for(l=0;l<e;l++)if(p=b[l],!p.pq_hidden){y=
c?l+k:l;u=y-k;u={rowIndx:y,rowIndxPage:u,rowData:p,Export:!0};m.push("<tr>");for(p=0;p<d;p++)if(r=a[p],!r.hidden&&!1!==r.copy){w="";if(h.ismergedCell(y,p)){if(w=h.isRootCell(y,p))t=h.getRootCell(y,p,"o"),t.Export=!0,t=this.getRenderVal(t,f,g);else continue;w="rowspan="+w.rowspan+" colspan="+w.colspan+" "}else u.colIndx=p,u.column=r,u.dataIndx=r.dataIndx,t=this.getRenderVal(u,f,g);r=r.align;w+=r?"align="+r:"";t=null==t?"":t;m.push("<td ",w,">",t,"</td>")}m.push("</tr>")}return m.join("")};f.getHtmlContent=
function(a,d,b,e,c,k,h,f,g,m,l,p,r){var t=a.cssRules||"",w=this.that.element.find(".pq-grid-table"),u=w.css("font-family"),w=w.css("font-size"),y=[];y.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",a.title?a.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+u+";font-size:"+w+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",t,"</style>","<table>");y.push(r?this.getHtmlHeader(e,c,d):"");y.push(this.getHtmlBody(d,
b,k,h,f,g,m,l,p));y.push("</table></body></html>");return y.join("")};f.getCsvHeader=function(a,d,b,e){for(var c=[],k=[],h,f,g=0;g<d;g++){for(var m=a[g],l=null,p=0,r=m.length;p<r;p++)h=b[p],h.hidden||!1===h.copy||(h=m[p],0<g&&h==a[g-1][p]?c.push(""):l&&0<p&&h==l?c.push(""):(f=(f=this.getTitle(h,p))?f.replace(/\"/g,'""'):"",l=h,c.push('"'+f+'"')));k.push(c.join(e));c=[]}return k};f.getCSVContent=function(a,d,b,e,c,k,h,f,g,m,l,p,r){var t,w;a=a.separator||",";var u,y=[];r=r?this.getCsvHeader(e,c,d,a):
[];for(e=0;e<h;e++)if(w=k[e],!w.pq_hidden){c=f?e+g:e;u=c-g;u={rowIndx:c,rowIndxPage:u,rowData:w,Export:!0};for(w=0;w<b;w++)t=d[w],t.hidden||!1===t.copy||(m.ismergedCell(c,w)?m.isRootCell(c,w)?(t=m.getRootCell(c,w,"o"),t.Export=!0,t=this.getRenderVal(t,l,p)):t="":(u.colIndx=w,u.column=t,u.dataIndx=t.dataIndx,t=this.getRenderVal(u,l,p)),t=(null==t?"":t)+"",t=t.replace(/\"/g,'""'),y.push('"'+t+'"'));r.push(y.join(a));y=[]}return r.join("\n")};f.getJsonContent=function(a,d){function b(a,b){return 0===
(a+"").indexOf("pq_")?void 0:b}return a.nostringify?d:JSON.stringify(d,a.nopqdata?b:null,a.nopretty?null:2)};f.postRequest=function(a){var d=a.format,b,e=a.url,c=a.filename||"pqGrid";a.zip&&"xlsx"!=d?(d=new JSZip,d.file(c+"."+a.format,a.data),a=d.generate({type:"base64",compression:"DEFLATE"}),b=!0,d="zip"):(b=a.decodeBase?!0:!1,a=a.data);e&&l.ajax({url:e,type:"POST",cache:!1,data:{pq_ext:d,pq_data:a,pq_decode:b,pq_filename:c},success:function(a){e+=(0<e.indexOf("?")?"&":"?")+"pq_filename="+a;l(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+
e+'"></iframe>')}});return a};f.Export=function(a){var d=this.that,b=d.options,e,c,k,h=this.templates,f=b.groupModel;c="remote"==b.pageModel.type;e=d.rowIndxOffset;var g=d.iGenerateView,m=d.iMerge,l=d.colModel,p=l.length,r=d.headerCells,t=r.length,f=(this.curPage=f.on&&f.dataIndx.length||c)?d.pdata:b.dataModel.data,f=b.summaryData?f.concat(b.summaryData):f,w=f.length,b=a.url,u=a.render,y=!a.noheader,z=a.format;d._trigger("beforeExport",null,a);"xlsx"==z?(e=this.getXlsContent(l,p,r,t,f,w,c,e,m,u,g,
y),c=new JSZip,c.file("[Content_Types].xml",h.content_types),c.file("workbook.xml",h.workbook),c.file("worksheet.xml",h.worksheet.replace("<%=content%>",e)),e=c.folder("_rels"),e.file(".rels",h.rels),e.file("workbook.xml.rels",h.workbook_rels),b?(a.data=c.generate({type:"base64",compression:"DEFLATE"}),a.decodeBase=!0):k=c.generate({type:"blob",compression:"DEFLATE"})):a.data="json"==z?this.getJsonContent(a,f):"csv"==z?this.getCSVContent(a,l,p,r,t,f,w,c,e,m,u,g,y):this.getHtmlContent(a,l,p,r,t,f,
w,c,e,m,u,g,y);k=k?k:this.postRequest(a);d._trigger("exportData",null,a);return k}})(jQuery);
(function(l){var p=l.paramquery,f={options:{items:[],gridInstance:null}};l.widget("paramquery.pqToolbar",f);f=p.pqToolbar.prototype;f.refresh=function(){this.element.empty();this._create()};f._create=function(){var c=this.options,a=c.gridInstance,d={button:"click",select:"change",checkbox:"change",textbox:"change"},b,e,n=c.bootstrap,k=n.on,h=a.colModel,c=c.items,f=this.element;f.addClass("pq-toolbar");for(var g=0,m=c.length;g<m;g++){var C=c[g],s=C.type,r=C.value,t=C.icon,w=C.options||{},u=C.label,
y=(e=C.listener)?[e]:C.listeners,y=y||[function(){}];e=(e=C.cls)?e:"";e=(e=k&&"button"==s?n.btn+" "+e:e)?"class='"+e+"'":"";var z=C.style,z=z?"style='"+z+"'":"",A=C.attr,B=A?A:"",A=u&&"button"!=s?[e,B]:[e,B,z],A=A.join(" "),v;C.options=w;"textbox"==s?v=l([u?"<label "+z+">"+u:"","<input type='text' "+A+">",u?"</label>":""].join("")):"textarea"==s?v=l([u?"<label "+z+">"+u:"","<textarea "+A+"></textarea>",u?"</label>":""].join("")):"checkbox"==s?v=l([u?"<label "+z+">":"","<input type='checkbox' ",r?
"checked='checked' ":"",A,">",u?u+"</label>":""].join("")):"separator"==s?v=l("<span class='pq-separator' "+[B,z].join(" ")+"></span>"):"button"==s?(v="",k&&(v=t?"<span class='glyphicon "+t+"'></span>":""),v=l("<button type='button' "+A+">"+v+u+"</button>"),l.extend(w,{label:u?u:!1,icons:{primary:k?"":t}}),v.button(w)):"select"==s?("function"===typeof w&&(w=w.call(a,{colModel:h})),w=w||[],v=p.select({options:w,attr:A,prepend:C.prepend,groupIndx:C.groupIndx,valueIndx:C.valueIndx,labelIndx:C.labelIndx}),
v=l([u?"<label "+z+">"+u:"",v,u?"</label>":""].join(""))):"string"==typeof s?v=l(s):"function"==typeof s&&(v=s.call(a,{colModel:h,cls:e}),v=l(v));v.appendTo(f);"checkbox"!==s&&void 0!==r&&(u?l(v[0].children[0]).val(r):v.val(r));r=0;for(u=y.length;r<u;r++)for(b in e=y[r],t={},"function"==typeof e?t[d[s]]=e:t=e,t)v.on(b,this._onEvent(a,t[b],C))}};f._onEvent=function(c,a,d){return function(b){d.value="checkbox"==d.type?l(b.target).prop("checked"):l(b.target).val();a.call(c,b)}};f._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
f._disable=function(){null==this.$disable&&(this.$disable=l("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};f._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};f._setOption=function(c,a){"disabled"==c&&(!0==a?this._disable():this._enable())};pq.toolbar=function(c,a){var d=l(c).pqToolbar(a);return d.data("paramqueryPqToolbar")||d.data("paramquery-pqToolbar")}})(jQuery);
(function(l){var p=l.paramquery,f=p.pqGrid.prototype.options,c={on:!1,dirtyClass:"pq-cell-dirty"};f.trackModel=f.trackModel||c;f=(p.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var d=this;a.on("dataAvailable",function(a,e){"filter"!=e.source&&(d.udata=[],d.ddata=[],d.adata=[])})}).prototype=new p.cClass;f.add=function(a){var d=this.that,b=this.adata,e=this.ddata;a=a.rowData;for(var c=this.options.trackModel.dirtyClass,k=d.getRecId({rowData:a}),h=
0,f=b.length;h<f;h++){var g=b[h];if(null!=k&&g.recId==k)throw"primary key violation";if(g.rowData==a)throw"same data can't be added twice.";}h=0;for(f=e.length;h<f;h++)if(a==e[h].rowData){e.splice(h,1);return}var e=[],m;for(m in a)e.push(m);d.removeClass({rowData:a,dataIndx:e,cls:c});a={recId:k,rowData:a};b.push(a)};f.update=function(a){var d=this.that,b=this.options.trackModel.dirtyClass,e=a.rowData||d.getRowData(a),c=d.getRecId({rowData:e}),k=a.dataIndx,h=a.refresh,f=d.columns,g=d.getValueFromDataType;
a=a.row;var m=this.udata,p=m.slice(0),s=!1;if(null!=c){for(var r=0,t=m.length;r<t;r++){var w=m[r],u=w.oldRow;if(w.rowData==e){s=!0;for(k in a)m=f[k].dataType,t=a[k],t=g(t,m),w=u[k],w=g(w,m),u.hasOwnProperty(k)&&w===t?(m={rowData:e,dataIndx:k,refresh:h,cls:b},d.removeClass(m),delete u[k]):(m={rowData:e,dataIndx:k,refresh:h,cls:b},d.addClass(m),u.hasOwnProperty(k)||(u[k]=e[k]));l.isEmptyObject(u)&&p.splice(r,1);break}}if(!s){u={};for(k in a)u[k]=e[k],m={rowData:e,dataIndx:k,refresh:h,cls:b},d.addClass(m);
m={rowData:e,recId:c,oldRow:u};p.push(m)}this.udata=p}};f["delete"]=function(a){var d=this.that,b=a.rowIndx,e=a.rowIndxPage,c=d.rowIndxOffset,b=null==b?e+c:b,e="remote"==d.options.pageModel.type?null==e?b-c:e:b,c=this.adata,k=this.ddata;a=d.getRowData(a);for(var d=0,h=c.length;d<h;d++)if(c[d].rowData==a){c.splice(d,1);return}k.push({indx:e,rowData:a,rowIndx:b})};f.isDirty=function(a){var d=this.udata,b=this.adata,e=this.ddata,c=!1;if(a=this.that.getRowData(a))for(b=0;b<d.length;b++){if(a==d[b].rowData){c=
!0;break}}else if(d.length||b.length||e.length)c=!0;return c};f.getChangesValue=function(a){a=a||{};var d=this.that;a=a.all;for(var b=this.udata,e=this.adata,c=this.ddata,k=[],h=[],f=[],g=[],m=[],p=[],s=0,r=c.length;s<r;s++){var t=c[s],w=t.rowData,u={};m.push(w);for(var y in w)0!=y.indexOf("pq_")&&(u[y]=w[y]);p.push(u)}s=0;for(r=b.length;s<r;s++)if(t=b[s],c=t.oldRow,w=t.rowData,-1==l.inArray(w,m)&&-1==l.inArray(w,k)){u={};if(!1!==a)for(y in w)0!=y.indexOf("pq_")&&(u[y]=w[y]);else{for(y in c)u[y]=
w[y];u[d.options.dataModel.recIndx]=t.recId}k.push(w);h.push(u);f.push(c)}s=0;for(r=e.length;s<r;s++){t=e[s];w=t.rowData;u={};for(y in w)0!=y.indexOf("pq_")&&(u[y]=w[y]);g.push(u)}return{updateList:h,addList:g,deleteList:p,oldList:f}};f.getChanges=function(){for(var a=this.udata,d=this.adata,b=this.ddata,e=l.inArray,c=[],k=[],h=[],f=[],g=0,m=b.length;g<m;g++){var p=b[g],p=p.rowData;f.push(p)}g=0;for(m=a.length;g<m;g++)p=a[g],b=p.oldRow,p=p.rowData,-1==e(p,f)&&-1==e(p,c)&&(c.push(p),k.push(b));g=0;
for(m=d.length;g<m;g++)p=d[g],p=p.rowData,h.push(p);return{updateList:c,addList:h,deleteList:f,oldList:k}};f.getChangesRaw=function(){var a=this.adata,d=this.ddata,b={updateList:[],addList:[],deleteList:[]};b.updateList=this.udata;b.addList=a;b.deleteList=d;return b};f.commitAdd=function(a,d){for(var b=this.that,e=b.colModel,c=e.length,k=this.adata,h=l.inArray,f=k.length,g=b.getValueFromDataType,b=[],m=a.length,p=[],s=0;s<m;s++)for(var r=a[s],t=0;t<f;t++){var w=k[t].rowData,u=!0;if(-1==h(w,p)){for(var y=
0;y<c;y++){var z=e[y],A=z.dataType,B=z.dataIndx;if(!z.hidden&&B!=d&&(z=w[B],z=g(z,A),B=r[B],B=g(B,A),z!==B)){u=!1;break}}if(u){t={};u={};t[d]=r[d];u[d]=w[d];b.push({type:"update",rowData:w,oldRow:u,newRow:t});p.push(w);break}}}e=[];for(t=0;t<f;t++)w=k[t].rowData,-1==h(w,p)&&e.push(k[t]);this.adata=e;return b};f.commitUpdate=function(a,d){for(var b=this.that,e=this.options.trackModel.dirtyClass,c=this.udata,k=c.length,h=a.length,f=[],g=0;g<k;g++){var m=c[g],p=m.rowData,m=m.oldRow;if(-1==l.inArray(p,
f))for(var s=0;s<h;s++)if(p[d]==a[s][d]){f.push(p);for(var r in m)b.removeClass({rowData:p,dataIndx:r,cls:e})}}b=[];for(g=0;g<k;g++)p=c[g].rowData,-1==l.inArray(p,f)&&b.push(c[g]);this.udata=b;return[]};f.commitDelete=function(a,d){for(var b=this.ddata,e=b.length,c=this.udata,k,h,f;e--;){k=b[e].rowData;h=k[d];f=a.length;if(!f)break;for(;f--;)if(h==a[f][d]){a.splice(f,1);b.splice(e,1);for(h=c.length;h--;)c[h].rowData==k&&c.splice(h,1);break}}};f.commitUpdateAll=function(){for(var a=this.that,d=this.options.trackModel.dirtyClass,
b=this.udata,e=0,c=b.length;e<c;e++){var k=b[e],h=k.oldRow,k=k.rowData,f;for(f in h)a.removeClass({rowData:k,dataIndx:f,cls:d})}this.udata=[]};f.commitAddAll=function(){this.adata=[]};f.commitDeleteAll=function(){for(var a=this.ddata,d=this.udata,b=d.length,e,c=a.length,k=0;0<b&&k<c;k++){for(e=a[k].rowData;b--;)d[b].rowData==e&&d.splice(b,1);b=d.length}a.length=0};f.commit=function(a){var d=this.that,b=a?a.history:null,b=null==b?!1:b,e=[],e=[],c=[],k=d.options.dataModel.recIndx;if(null==a)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var h=a.type;a=a.rows;"add"==h?a?e=this.commitAdd(a,k):this.commitAddAll():"update"==h?a?c=this.commitUpdate(a,k):this.commitUpdateAll():"delete"==h&&(a?this.commitDelete(a,k):this.commitDeleteAll())}e=e.concat(c);e.length&&(d._digestData({source:"commit",checkEditable:!1,track:!1,history:b,rowList:e}),d.refreshView())};f.rollbackAdd=function(a,d){for(var b=this.adata,e=[],c=0,k=b.length;c<k;c++)e.push({type:"delete",rowData:b[c].rowData});this.adata=
[];return e};f.rollbackDelete=function(a,d){for(var b=this.ddata,e=[],c=b.length-1;0<=c;c--){var k=b[c];e.push({type:"add",rowIndx:k.rowIndx,newRow:k.rowData})}this.ddata=[];return e};f.rollbackUpdate=function(a,d){for(var b=this.that,e=this.options.trackModel.dirtyClass,c=this.udata,k=[],h=0,f=c.length;h<f;h++){var g=c[h],m=g.rowData,l={},p=g.oldRow;if(null!=g.recId){var g=[],r;for(r in p)l[r]=m[r],g.push(r);b.removeClass({rowData:m,dataIndx:g,cls:e,refresh:!1});k.push({type:"update",rowData:m,newRow:p,
oldRow:l})}}this.udata=[];return k};f.rollback=function(a){var d=this.that,b=d.options.pageModel,e=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var c=[],c=[],k=[],h=[],f=d.options.dataModel.data;if(null==a||"update"==a)k=this.rollbackUpdate(b,f);if(null==a||"delete"==a)c=this.rollbackDelete(b,f);if(null==a||"add"==a)h=this.rollbackAdd(b,f);c=c.concat(h,k);d._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:c});e&&d.refreshView()};p=p.pqGrid.prototype;
p.getChanges=function(a){this.blurEditor({force:!0});if(a){var d=a.format;if(d){if("byVal"==d)return this.iUCData.getChangesValue(a);if("raw"==d)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};p.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};p.isDirty=function(a){return this.iUCData.isDirty(a)};p.commit=function(a){this.iUCData.commit(a)};p.updateRow=function(a){for(var d=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],
b=[],e=0,c=d.length;e<c;e++){var k=this.normalize(d[e]),h=k.newRow,f=k.rowData,g={};if(f){for(var m in h)g[m]=f[m];k.oldRow=g;k.type="update";b.push(k)}}if(!b.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,rowList:b}))return!1;!1!==a.refresh&&(1<b.length?this.refresh():this.refreshRow({rowIndx:b[0].rowIndx}))};p.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==
a?null:a};p.getCellData=function(a){var d=a.rowData||this.getRowData(a);a=a.dataIndx;return d?d[a]:null};p.getRowData=function(a){if(!a)return null;var d=a.rowData;if(null!=d)return d;d=a.recId;if(null==d){var d=a.rowIndx,d=null!=d?d:a.rowIndxPage+this.rowIndxOffset,b=this.get_p_data()[d];return b}b=this.options.dataModel;a=b.recIndx;for(var e=b.data,c=0,k=e.length;c<k;c++)if(b=e[c],b[a]==d)return b;return null};p.deleteRow=function(a){for(var d=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],
b=[],e=0,c=d.length;e<c;e++){var k=this.normalize(d[e]);k.oldRow=k.rowData;k.type="delete";b.push(k)}if(!b.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:b});!1!==a.refresh&&this.refreshView()};p.addRow=function(a){var d=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],b=[],e=this.options.dataModel,c=e.data;null==c&&(e.data=[],c=e.data);for(var e=0,k=d.length;e<k;e++){var h=this.normalize(d[e]);h.type="add";
b.push(h)}if(!b.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:b}))return!1;!1!==a.refresh&&this.refreshView();a=b[0].rowIndx;return null==a?c.length-1:a}})(jQuery);
(function(l){var p=function(a){this.focusSelection=null};p.prototype.inViewRow=function(a){var d=this.that,b=d.finalV;return a<d.options.freezeRows?!0:a>=d.initV&&a<=b};var f=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cRows=f;var c=function(a){var d=a.options;this.that=a;this.selection=[];this.hclass="pq-state-select "+(d.bootstrap.on?"":"ui-state-highlight")};l.paramquery.cCells=c;c=c.prototype=
new p;p=f.prototype=new p;p.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};p.selectRange=function(a){var d=a.range,b=d.r1,d=d.r2;a=a.evt;var e=[];if(b>d)var c=b,b=d,d=c;for(;b<=d;b++)e.push({rowIndx:b});this.add({rows:e,evt:a})};c.removeAll=function(a){var d=this.that;a=d.get_p_data();var b=this.hclass;if(a&&a.length)for(d.$tbl&&d.$tbl.children().children().children().removeClass(b),d=0,b=a.length;d<b;d++){var e=a[d];e&&delete e.pq_cellselect}};p.removeAll=
function(a){a=a||{};var d=this.that,b=a.all,e=this.hclass,c=d.get_p_data();if(c&&c.length)for(a.refresh&&d.$tbl&&d.$tbl.children().children().removeClass(e),c=b?c:d.pdata,a=0,d=c.length;a<d;a++)(b=c[a])&&delete b.pq_rowselect};c.isSelected=function(a){var d=this.that,b=a.rowData||d.getRowData(a),e=a.dataIndx;a=a.colIndx;if(null==a&&null==e||null==b)return null;e=null==e?d.colModel[a].dataIndx:e;return!0==(b.pq_cellselect&&b.pq_cellselect[e])};p.getSelection=function(){for(var a=this.that,d=a.selection().address(),
b=[],e=0,c=d.length;e<c;e++){var k=d[e];if("row"==k.type)for(var h=k.r2,k=k.r1;k<=h;k++){var f=a.getRowData({rowIndx:k});b.push({rowIndx:k,rowData:f})}}return b};c.getSelection=function(){for(var a=this.that,d=a.selection(),b=a.colModel,d=d.address(),e=[],c=0,k=d.length;c<k;c++){var h=d[c],f=h.type;if("block"==f||"cell"==f||"column"==f)for(var f=h.r2,g=h.c1,m=h.c2,h=h.r1;h<=f;h++)for(var l=a.getRowData({rowIndx:h}),p=g;p<=m;p++)e.push({rowIndx:h,rowData:l,colIndx:p,dataIndx:b[p].dataIndx})}return e};
c.inViewCell=function(a,d){var b=this.that,e=b.options.freezeCols;return this.inViewRow(a)?d<e||d>=b.initH&&d<=b.finalH:!1};c._add=function(a){var d=this.that;a=d.normalize(a);var b=a.rowIndxPage,e=a.rowData,c,k=a.colIndx,h=a.dataIndx,f=this.isSelected({rowData:e,dataIndx:h});if(null==f)return!1;var g=d.iMerge.ismergedCell(a.rowIndx,k)||this.inViewCell(b,k);!1===f&&(g&&(d=d.getCell({rowIndxPage:b,colIndx:k}))&&d.addClass(this.hclass),c=(e.pq_cellselect=e.pq_cellselect||{})[h]=!0);if(c)return a};p._add=
function(a){var d=this.that,b=d.normalize(a),e=b.rowIndxPage;a=b.rowData;var c=this.isSelected({rowData:a});b.rowIndxPage=e;if(null==c)return!1;b=this.inViewRow(e);!1===c&&(!a.pq_hidden&&b&&(d=d.getRow({rowIndxPage:e}),d.length&&d.addClass(this.hclass)),a.pq_rowselect=!0)};c.add=function(a){this._add(a)};p.add=function(a){var d=a.rows;if(d&&"function"==typeof d.push){a=0;for(var b=d.length;a<b;a++){var e=d[a];e.trigger=!1;this._add(e)}}else this._add(a)};p._remove=function(a){var d=this.that,b=d.normalize(a);
a=b.rowIndx;var e=b.rowIndxPage,c=b.rowData,b=b.$tr;if(this.isSelected({rowData:c}))return this.inViewRow(e)&&(b=d.getRow({rowIndxPage:e}))&&(b.removeClass(this.hclass),b.removeAttr("tabindex")),c.pq_rowselect=!1,{rowIndx:a,rowData:c}};p.remove=function(a){var d=a.rows;if(d&&"function"==typeof d.push){a=0;for(var b=d.length;a<b;a++){var e=d[a];e.trigger=!1;this._remove(e)}}else this._remove(a)};c.selectBlock=function(a){var d=this.that,b=this.hclass,e=a.range,c=e.r1,k=e.c1,h=e.r2,e=e.c2,f=d.initH,
g=d.finalH,m=d.options.freezeCols,p=[],s=d.colModel,r=[];a=a.remove?!0:!1;for(var t=k;t<=e;t++)p[t]=s[t].dataIndx;for(;c<=h;c++)if(s=d.normalize({rowIndx:c}),t=s.rowData,s=s.rowIndxPage,t){var w=t.pq_cellselect=t.pq_cellselect||{};if(this.inViewRow(s))for(t=k;t<=e;t++){var u=p[t];if(a&&w[u]||!a&&!w[u]){if(t<m||t>=f&&t<=g){var y=d.getCell({rowIndxPage:s,colIndx:t});y.length&&r.push(y[0])}w[u]=a?void 0:!0}}else for(t=k;t<=e;t++)u=p[t],w[u]=a?void 0:!0}if(r.length)l(r)[a?"removeClass":"addClass"](b)}})(jQuery);
(function(l){var p=!0;l(function(){var c=l("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);c[0].indeterminate=!0;c.on("change",function(){p=!1});c.click();c.remove()});var f=(l.paramquery.cCheckBoxColumn=function(c,a){var d=this;this.that=c;this.options=c.options;this.column=a;a.cb=l.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},a.cb);a._render=function(b){var d=b.rowData;if(!d.pq_gtitle&&!d.pq_gsummary)return"<input type='checkbox' "+
(a.cb.check===b.cellData?"checked":"")+" />"};this.dataIndx=a.dataIndx;var b=c.element,e=c.eventNamespace;c.on("dataAvailable",function(){c.one("dataReady",function(){return d._onDataReady()})}).on("dataReady",function(){d.setValCBox()});b.on("change"+e,function(a){var b=a.target;if("checkbox"==b.type&&l(b).closest(".pq-grid")[0]==this)return d.onCheckBoxChange(a)});c.on("cellKeyDown",function(a,b){return d.onCellKeyDown(a,b)});c.on("refreshHeader",function(a,b){return d.refreshHeader(a,b)})}).prototype=
new l.paramquery.cClass;f.hasHeaderChkBox=function(){return this.column.cb.header};f.setValCBox=function(){if(this.hasHeaderChkBox()){var c=this.that,a=this.options,d=this.dataIndx,b=this.column.cb,e=b.all,n=c.rowIndxOffset,n="remote"!=a.pageModel.type&&e?0:n,a=e?a.dataModel.data:c.pdata,e=null,k=0,h=0;if(a){for(var f=0,g=0,m=a.length;g<m;g++){var l=a[g],p=g+n;c.isEditableRow({rowIndx:p})&&c.isEditableCell({rowIndx:p,dataIndx:d})&&(f++,l[d]===b.check?k++:h++)}k==f&&f?e=!0:h==f&&(e=!1);this.$inp&&
this.$inp.pqval({val:e})}}};f.onHeaderChange=function(c){for(var a=l(c.target),d=this.that,b=this.column,e=b.dataIndx,n=d.options,k=b.cb,h=k.all,f=h?n.dataModel.data:d.pdata,g=d.rowIndxOffset,g="remote"!=n.pageModel.type&&h?0:g,n=[],b={column:b,dataIndx:e,source:"header"},a=a[0].checked,h=0,m=f.length;h<m;h++){var p=h+g,s=f[h],r={},t={};r[e]=a?k.check:k.uncheck;t[e]=s[e];n.push({rowIndx:p,rowData:s,newRow:r,oldRow:t,type:"update"})}e={rowList:n,source:"checkbox"};e.history=e.track=k.select?!1:null;
b.check=a;b.rows=n;if(!1===d._trigger("beforeCheck",c,b)||!1===d._digestData(e))return d.refreshHeader(),!1;d.refresh({header:!1});n=b.rows=e.rowList;d._trigger("check",c,b);k.select&&d.selection({type:"row",method:a?"add":"remove",rows:n})};f.refreshHeader=function(c,a){var d=this;if(this.hasHeaderChkBox()){var b=this.that;if(b.pdata&&(b=b.getCellHeader({dataIndx:this.dataIndx}))){var e=this.$inp=b.find("input");this.setValCBox();if(p)e.on("click",function(a){null==e.data("pq_value")&&(e[0].checked=
!0,e.data("pq_value",!0),d.onHeaderChange(a))});e.on("change",function(a){d.onHeaderChange(a)})}}};f._onDataReady=function(){var c=this.that,a=this.options,d=a.dataModel.data,a="remote"==a.pageModel.type?c.rowIndxOffset:0,b=this.column,e=b.cb,n=b.dataIndx;if(null!=n&&d){for(var k=[],h=0,f=d.length;h<f;h++){var g=d[h];g[n]===e.check&&k.push({rowIndx:h+a,rowData:g})}if(!1!==c._trigger("check",null,{rows:k,column:b,dataIndx:n,source:"dataAvailable"})&&e.select){for(h=0;h<f;h++)g=d[h],g[n]===e.check&&
(g.pq_rowselect=!0);c.selection().refresh()}}this.setValCBox()};f.rowSelect=function(c,a){var d=this.that,b=a.rows,e=a.rowData,n=this.dataIndx;if(b)for(var k=0,h=b.length;k<h;k++){var e=b[k],f=e.rowIndx,e=e.rowData;e[n]=!0;d.refreshCell({rowIndx:f,dataIndx:n})}else e&&(e[n]=!0,f=a.rowIndx,d.refreshCell({rowIndx:f,dataIndx:n}));this.setValCBox()};f.rowUnSelect=function(c,a){var d=this.that,b=a.rows,e=a.rowData,n=this.dataIndx;if(b)for(var k=0,h=b.length;k<h;k++){var e=b[k],f=e.rowIndx,e=e.rowData;
e[n]=!1;d.refreshCell({rowIndx:f,dataIndx:n})}else e&&(e[n]=!1,f=a.rowIndx,d.refreshCell({rowIndx:f,dataIndx:n}));this.setValCBox()};f.onCheckBoxChange=function(c){var a=this.that,d=this.column.cb,b=l(c.target),e=b.closest(".pq-grid-cell");if(e.length){var e=a.getCellIndices({$td:e}),e=a.normalize(e),n=e.rowData,k=e.rowIndx,h=e.dataIndx;if(h==this.dataIndx){var b=b[0].checked,f={},g={};f[h]=b?d.check:d.uncheck;g[h]=n[h];n=[{rowData:n,rowIndx:k,oldRow:g,newRow:f,type:"update"}];e.check=b;e.rows=n;
if(!1===a._trigger("beforeCheck",c,e))return a.refreshCell({rowIndx:k,dataIndx:h}),!1;n={source:"checkbox",rowList:n};n.history=n.track=d.select?!1:null;if(!1===a._digestData(n))return a.refreshCell({rowIndx:k,dataIndx:h}),!1;a.refreshRow({rowIndx:k});n=e.rows=n.rowList;a._trigger("check",c,e);d.select&&a.selection({type:"row",method:b?"add":"remove",rows:n});this.setValCBox()}}};f.onCellKeyDown=function(c,a){if(a.dataIndx==this.dataIndx&&(13==c.keyCode||32==c.keyCode))return l(c.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var l=0,p=["moz","webkit"],f=0;!window.requestAnimationFrame&&f<p.length;f++)window.requestAnimationFrame=window[p[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[p[f]+"CancelAnimationFrame"]||window[p[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var a=(new Date).getTime(),a=Math.max(0,16-(a-l));return window.setTimeout(function(){l=(new Date).getTime();c()},a)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(c){clearTimeout(c)})})();
(function(l){function p(c){this.that=c;var a=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=c.options.rowHeight;this.colwd=60;c.on("contMouseDown",function(d,b){return a._onContMouseDown(d,b)}).on("mouseDrag",function(d,b){return a._onMouseDrag(d,b)}).on("mouseStop",function(d,b){return a._onMouseStop(d,b)}).on("mousePQUp",function(d,
b){return a._onMousePQUp(d,b)}).on("rowMouseDown",function(d,b){return a._onRowMouseDown(d,b)}).on("cellMouseDown",function(d,b){return a._onCellMouseDown(d,b)}).on("refresh",function(a,b){setTimeout(function(){c.element&&c.focus()},0)}).on("cellMouseEnter",function(d,b){return a._onCellMouseEnter(d,b)}).on("rowMouseEnter",function(d,b){return a._onRowMouseEnter(d,b)})}l.paramquery.cMouseSelection=p;var f=p.prototype=new l.paramquery.cClass;f.inViewPort=function(c){var a=this.that.iRefresh,d=a.getEContHt(),
a=a.getEContWd()+1;c=c[0];var b=this.scrollLeft;if(d>=c.offsetTop+c.offsetHeight+this.marginTop)if("TD"==c.nodeName.toUpperCase()){if(a>=c.offsetLeft+c.offsetWidth+b)return!0}else return!0};f._onCellMouseDown=function(c,a){var d=this.that,b=a.rowIndx,e=d.iSelection,n=a.colIndx,k=d.options.selectionModel,f=k.mode;if("cell"!=k.type)d.focus(a);else if(null!=n)return e=e.address()[0],c.shiftKey&&"single"!=f&&e?(f=e.firstR,e=e.firstC,d.range({r1:f,c1:e,r2:b,c2:n,firstR:f,firstC:e}).select()):(this.mousedown=
{r1:b,c1:n},d.range({r1:b,c1:n,firstR:b,firstC:n}).select()),d.focus(a),!0};f._onCellMouseEnter=function(c,a){var d=this.that,b=d.options.selectionModel,e=b.type,b=b.mode;if(this.mousedown&&"single"!=b){if("cell"==e){var e=this.mousedown,b=e.r1,n=e.c1,k=a.rowIndx,f=a.colIndx;if(b==k&&n==f||e.r2==k&&e.c2==f)return;this.mousedown.r2=k;this.mousedown.c2=f;d.scrollCell({rowIndx:k,colIndx:f});d.range({r1:b,c1:n,r2:k,c2:f,firstR:b,firstC:n}).select()}d.focus(a)}};f._onRowMouseEnter=function(c,a){var d=
this.that,b=d.options.selectionModel,e=b.mode;"row"==b.type&&this.mousedown&&"single"!=e&&(b=this.mousedown.r1,e=a.rowIndx,b==e?d.range({r1:b,firstR:b},!1).select():this.mousedown.r2!=e&&(this.mousedown.r2=e,d.scrollRow({rowIndx:e}),d.range({r1:b,r2:e,firstR:b},!1).select()))};f._onRowMouseDown=function(c,a){var d=this.that,b=a.rowIndx,e=d.iSelection,n=d.options.selectionModel,k=0<=c.originalEvent.target.className.indexOf("pq-grid-number-cell"),f=n.mode;if(("row"==n.type||n.row&&k)&&null!=b)return n=
d.iSelection.address(),c.shiftKey?((e=n.length)&&"row"==n[e-1].type&&(e=n[e-1],e.r1=e.firstR,e.r2=b,e.c1=e.c2=e.type=void 0),d.range(n).select()):(c.ctrlKey||c.metaKey)&&"single"!=f?e.add({r1:b,firstR:b}):(this.mousedown={r1:b,y1:c.pageY,x1:c.pageX},d.range({r1:b,firstR:b},!1).select()),k&&setTimeout(function(){d.focus({rowIndxPage:a.rowIndxPage,colIndx:d.getFirstVisibleCI(!0)})},0),!0};f._onContMouseDown=function(c,a){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:c.pageX,
y:c.pageY});return!0};f._onMousePQUp=function(c,a){this.mousedown=null};f._stopSwipe=function(c){c&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};f._onMouseStop=function(c,a){var d=this,b=this.that;if(this.swipedownPrev){var e=b.options.swipeModel,b=this.swipedownPrev,n=b.ts,k=(new Date).getTime()-n,f=c.pageX,q=c.pageY,g=f-b.x,m=q-b.y;if(Math.sqrt(g*g+m*m)/k>e.ratio){var l=0,p=e.repeat;d._stopSwipe();var r=function(){l+=
e.speed;p--;d._onMouseDrag({pageX:f+l*g/k,pageY:q+l*m/k});0<p?d.intID=window.requestAnimationFrame(r):d._stopSwipe(!0)};r()}else d.swipedown=null,d.swipedownPrev=null}};f._onMouseDrag=function(c,a){var d=this.that.options;if(this.swipedown){var b=this.swipedown,e=b.x,f=b.y,k=c.pageX,h=c.pageY;this.swipedownPrev={x:e,y:f,ts:(new Date).getTime()};var q=d.scrollModel.smooth;if(!d.virtualY||q)this.scrollVertSmooth(f,h),this.syncScrollBarVert();if(!d.virtualX||q)this.scrollHorSmooth(e,k),this.syncScrollBarHor();
b.x=k;b.y=h}return!0};f.updateTableY=function(c){if(0==c)return!1;var a=this.that,d=this.getTableForVertScroll(),a=a.iRefresh.getEContHt();if(!d||!d.length)return!1;var b=d.data("offsetHeight")-1,e=this.scrollTop-c;this.setScrollTop(0>e?0:0>c&&0<a-b+e?b-a:e,d,a);return!0};f.setScrollTop=function(c,a,d){0<=c&&(this.scrollTop=c=Math.round(c),a.parent("div").scrollTop(c))};f.getScrollLeft=function(c){return this.scrollLeft};f.getScrollTop=function(c){return this.scrollTop};f.setScrollLeft=function(c,
a,d,b){0<=c&&(this.scrollLeft=c=Math.round(c),d=d?d.parent():l(),d=d.add(a?a.parent("div"):l()),d.scrollLeft(c))};f.scrollVertSmooth=function(c,a){c!=a&&this.updateTableY(a-c)};f.scrollHorSmooth=function(c,a){if(c!=a){var d=this.that,b=d.options,e=a-c,f=this.getTableForHorScroll(),k=this.getTableHeaderForHorScroll(),d=d.iRefresh.getEContWd();if(f||k){var h=f?f:k,b=b.virtualX?this.getScrollWidth(h):h.data("scrollWidth"),e=this.scrollLeft-e;this.setScrollLeft(0>e?0:0>b-d-e?b-d:e,f,k,d)}}};f.syncViewWithScrollBarVert=
function(c){if(null!=c){var a=this.that,d=this.getTableForVertScroll();if(d&&d.length){a.options.editModel.indices&&a.blurEditor({force:!0});var b=d.data("offsetHeight"),a=a.iRefresh.getEContHt();if((c*=b-a)||0===c)0>c&&(c=0),this.setScrollTop(c,d,a)}}};f.syncViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,d=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(d||b){var e=a.options;e.editModel.indices&&a.blurEditor({force:!0});var f=d?d:b,e=e.virtualX?this.getScrollWidth(f):
f.data("scrollWidth"),a=a.iRefresh.getEContWd();c*=e-a;e&&a&&(0>c&&(c=0),this.setScrollLeft(c,d,b,a))}}};f.resetMargins=function(){this.scrollTop=this.scrollLeft=0};f.syncHeaderViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,d=this.getTableHeaderForHorScroll();if(d){var b=a.options,e=b.freezeCols;b.editModel.indices&&a.blurEditor({force:!0});var b=d.data("scrollWidth"),f=a.iRefresh.getEContWd();c=a.calcWidthCols(e,c+e);b&&f&&(0>c&&(c=0),d.css("marginLeft",-c))}}};f.syncScrollBarVert=
function(){var c=this.that,a=this.getTableForVertScroll();if(a&&a.length){var a=a.data("offsetHeight"),d=c.iRefresh.getEContHt(),a=this.scrollTop/(a-d);0<=a&&1>=a&&c.vscroll.widget().hasClass("pq-sb-vert")&&c.vscroll.option("ratio",a)}};f.syncScrollBarHor=function(){var c=this.that,a=c.options,d=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(d||b)d=d?d:b,a=a.virtualX?this.getScrollWidth(d):d.data("scrollWidth"),d=c.iRefresh.getEContWd(),a=this.scrollLeft/(a-d),0<=a&&1>=a&&c.hscroll.widget().hasClass("pq-sb-horiz")&&
c.hscroll.option("ratio",a)};f.getTableForVertScroll=function(){var c=this.that,a=c.pqpanes;if((c=c.$tbl)&&c.length)return a.h&&a.v?c=l([c[2],c[3]]):a.v?c=l([c[0],c[1]]):a.h&&(c=l(c[1])),c};f.getTableForHorScroll=function(){var c=this.that,a=c.pqpanes,d=[],b=c.$tbl;if(b&&b.length)return a.h&&a.v?d.push(b[1],b[3]):a.v?d.push(b[1]):a.h?d.push(b[0],b[1]):d.push(b[0]),c.tables.length&&(c=c.tables[0].$tbl,a.v?d.push(c[1]):d.push(c[0])),l(d)};f.getTableHeaderForHorScroll=function(){var c=this.that,a=c.pqpanes;
if((c=c.$tbl_header)&&c.length)return c=a.vH?l(c[1]):l(c[0]),c.parent()};f.scrollRowNonVirtual=function(c){var a=this.that,d=a.options,b=c.rowIndxPage,e=c.rowIndx;c=a.iRefresh.getEContHt();b=null==b?e-a.rowIndxOffset:b;d=parseInt(d.freezeRows);if(!(b<d)){var d=a.get$Tbl(b),f=a.getRow({rowIndxPage:b})[0];f&&(a=d[0].offsetTop+1,b=f.offsetHeight,e=this.getScrollTop(),f=f.offsetTop-1,0>a+f-e?(a=a+f+-1,this.setScrollTop(0>a?0:a,d,c),this.syncScrollBarVert()):f+b-e>c&&(this.setScrollTop(b+f-c,d,c),this.syncScrollBarVert()))}};
f.scrollColumnNonVirtual=function(c){var a=this.that,d=c.colIndx,d=null==d?a.getColIndx({dataIndx:c.dataIndx}):d,b=a.options.freezeCols;if(!(d<b)){c=a._calcRightEdgeCol(d).width;var d=a._calcRightEdgeCol(d-1).width,b=a._calcRightEdgeCol(b-1).width,e=this.getTableForHorScroll(),f=this.getTableHeaderForHorScroll(),a=a.iRefresh.getEContWd(),k=this.scrollLeft;c-k>a?(this.setScrollLeft(c-a,e,f,a),this.syncScrollBarHor()):d-b<k&&(this.setScrollLeft(d-b,e,f,a),this.syncScrollBarHor())}}})(jQuery);
(function(l){var p=null,f=!1,c="",a=l.paramquery.pqGrid.prototype,d=a.options,b={on:!0,header:!0,zIndex:1E4},e={on:!0},n={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};d.pasteModel=d.pasteModel||n;d.copyModel=d.copyModel||b;d.cutModel=d.cutModel||e;a._setGlobalStr=function(a){c=a};a.canPaste=function(){return c?!0:!1};a.copy=function(){p=new k(this);p.copy();p=null};a.paste=function(a){p=new k(this);p.paste(a);p=null};a.cut=function(){p=new k(this);p.copy({cut:!0,source:"cut"});
p=null};a.clear=function(){this.iSelection.clear()};var k=function(a,b){this.that=a},a=k.prototype;a.createClipBoard=function(){var a=l("#pq-grid-excel-div"),a=this.that.options.copyModel,b=l("#pq-grid-excel");0==b.length&&(a=l("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=l("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.select()};a.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=l(window).scrollTop(),d=l(window).scrollLeft();a.focus();var a=l(window).scrollTop(),e=l(window).scrollLeft();b==a&&d==e||window.scrollTo(d,b)};a.clearClipBoard=function(){l("#pq-grid-excel").val("")};a.copy=function(a){return this.that.iSelection.copy(a)};a.paste=function(a){a=a||{};var b=this.that,d=a.dest,e=a.clip,k=e?e.length?e.val():"":c,k=k.replace(/\n$/,""),e=k.split("\n"),f=e.length,n,h=b.colModel,
p=b.readCell,y=b.options.pasteModel,z="row",A=!1,B=h.length;if(y.on&&0!=k.length&&0!=f){k={rows:e};if(!1===b._trigger("beforePaste",null,k))return!1;var v=y.type,x,D,E,z=(d?b.range(d):b.selection())._areas;(E=z.length?z[0]:null)&&b.getRowData({rowIndx:E.r1})?(z="row"==E.type?"row":"cell",x=E.r1,D=E.r2,d=E.c1,E=E.c2):(z="cell",E=d=D=x=0);var F,H;"replace"==v?(F=x,H=D-x+1<f?"extend":"repeat"):"append"==v?(F=D+1,H="extend"):"prepend"==v&&(F=x,H="extend");var J,f="extend"==H?f:D-x+1,N;x=0;a=a.rowList||
[];for(var L=D=0;L<f;L++){var P=e[x],O=L+F,K="replace"==v?b.getRowData({rowIndx:O}):null,M=K?{}:null,G={};void 0===P&&"repeat"===H&&(x=0,P=e[x]);x++;var I=P.split("\t");if(!n)if("cell"==z){n=I.length;J=E-d+1<I.length?"extend":"repeat";n="extend"==J?n:E-d+1;if(isNaN(n))throw"lenH NaN. assert failed.";n+d>B&&(n=B-d)}else n=B,d=0;var T=0,Q=0,P=0;N=n;for(var W=I.length,Q=0;Q<N;Q++){T>=W&&(T=0);var R=h[Q+d],X=I[T],U=R.dataIndx;!1===R.copy?(P++,"extend"==J&&N+d<B&&N++):(T++,G[U]=X,M&&(M[U]=p(K,R)))}!1==
l.isEmptyObject(G)&&(I="update",null==K&&(A=!0,I="add"),a.push({newRow:G,rowIndx:O,rowData:K,oldRow:M,type:I}),D++)}b._digestData({rowList:a,source:"paste",allowInvalid:y.allowInvalid,validate:y.validate});b[A?"refreshView":"refresh"]();y.select&&("cell"==z?b.range({r1:F,c1:d,r2:F+D-1,c2:"extend"==J?d+n-1+P:E}).select():b.range({r1:F,r2:F+D-1}).select());b._trigger("paste",null,k)}};l(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=l(a.target);if(b.hasClass("pq-grid-row")||
b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var d=b.closest(".pq-grid");if(p||b.length&&d.length){if(!p){try{var e=d.pqGrid("getInstance").grid;if(e.option("selectionModel.native"))return!0}catch(c){return!0}p=new k(e,b);p.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?p.copy({clip:l("#pq-grid-excel")}):"88"==a.keyCode?p.copy({cut:!0,clip:l("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(f=!0,p.clearClipBoard(),window.setTimeout(function(){p&&(p.paste({clip:l("#pq-grid-excel")}),
p.destroyClipBoard(),p=null);f=!1},0)):(b=l("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&p.that._onKeyPressDown(a))}}}else if(b=a.keyCode,d=l.ui.keyCode,b==d.UP||b==d.DOWN||b==d.LEFT||b==d.RIGHT||b==d.PAGE_UP||b==d.PAGE_DOWN){if(h)return!1;b=l(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))h=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;f||!p||a.ctrlKey||a.metaKey||-1==l.inArray(b,[17,91,93,224])||(p.destroyClipBoard(),p=null);h&&(a=l(a.target),a.hasClass("pq-grid-row")||
a.hasClass("pq-grid-cell")||(h=!1))});var h=!1})(jQuery);
(function(l){var p=l.paramquery.pqGrid.prototype.options,f={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};p.historyModel=p.historyModel||f;p=(l.paramquery.cHistory=function(c){var a=this;this.that=c;this.options=c.options;this.records=[];this.id=this.counter=0;c.on("keyDown",function(d,b){return a._onKeyDown(d,b)}).on("dataAvailable",function(d,b){"filter"!=b.source&&a.reset()})}).prototype=new l.paramquery.cClass;p._onKeyDown=function(c,a){var d=c.ctrlKey||c.metaKey;if(d&&"90"==c.keyCode)return this.undo(),
!1;if(d&&"89"==c.keyCode)return this.redo(),!1};p.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};p.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};p.increment=function(){var c=this.records,a=c.length;
this.id=a?c[a-1].id+1:0};p.push=function(c){var a=this.canRedo(),d=this.records,b=this.counter;d.length>b&&d.splice(b,d.length-b);d[b]=l.extend({id:this.id},c);this.counter++;c=this.that;var e,f;1==this.counter&&(e=!0);a&&this.counter==d.length&&(f=!1);c._trigger("history",null,{type:"add",canUndo:e,canRedo:f,num_undo:this.counter,num_redo:0})};p.canUndo=function(){return 0<this.counter?!0:!1};p.canRedo=function(){return this.counter<this.records.length?!0:!1};p.processCol=function(c,a){var d=this.that;
if(c.length){var b="add"==c.type;d[(a?b:!b)?"addColumn":"deleteColumn"]({colList:c,history:!1})}};p.undo=function(){var c=this.canRedo(),a=this.that,d=!1,b=this.options.historyModel,e=this.records;if(0<this.counter)this.counter--;else return!1;for(var f=e[this.counter],e=(e=f.rowList)?e:[],f=(f=f.colList)?f:[],k=[],h=0,l=e.length;h<l;h++){var g=e[h],m=g.newRow,p=g.rowData,s=g.type,r=g.oldRow,g=g.rowIndx;"update"==s?(g=a.getRowIndx({rowData:p}).rowIndx,k.push({type:s,rowIndx:g,rowData:p,oldRow:m,newRow:r})):
"add"==s?(d=!0,k.push({type:"delete",rowData:m})):"delete"==s&&(d=!0,k.push({type:"add",rowIndx:g,newRow:p}))}f.length?this.processCol(f):(a._digestData({history:!1,source:"undo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:k}),a[d?"refreshView":"refresh"]({source:"undo"}));var t,w;!1===c&&(t=!0);0==this.counter&&(w=!1);a._trigger("history",null,{canUndo:w,canRedo:t,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};p.redo=function(){var c=this.canUndo(),a=this.that,d=this.options.historyModel,b=this.counter,e=this.records;if(b==e.length)return!1;for(var f=!1,k=e[b],b=(b=k.rowList)?b:[],k=(k=k.colList)?k:[],h=[],l=0,g=b.length;l<g;l++){var m=b[l],p=m.newRow,s=m.rowData,r=m.type,t=m.oldRow,m=m.rowIndx;"update"==r?(m=a.getRowIndx({rowData:s}).rowIndx,h.push({type:r,rowIndx:m,rowData:s,oldRow:t,newRow:p})):"add"==r?(f=!0,h.push({type:"add",rowIndx:m,newRow:p})):"delete"==r&&(f=!0,h.push({type:"delete",
rowData:s}))}k.length?this.processCol(k,!0):(a._digestData({history:!1,source:"redo",checkEditable:d.checkEditable,checkEditableAdd:d.checkEditableAdd,allowInvalid:d.allowInvalid,rowList:h}),a[f?"refreshView":"refresh"]({source:"redo"}));this.counter<e.length&&this.counter++;var w,u;!1==c&&(w=!0);this.counter==this.records.length&&(u=!1);a._trigger("history",null,{canUndo:w,canRedo:u,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};l.paramquery.pqGrid.prototype.history=
function(c){return this.iHistory[c.method](c)}})(jQuery);
(function(l){var p=l.paramquery;p.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var d=[],b;for(b in a)d.push(b);return d}(),getConditions:function(d){var b=
[],e;for(e in a)a[e][d]&&b.push(e);return b},getTRConditions:function(){var d=[],b;for(b in a)a[b].TR&&d.push(b);return d}(),getWTRConditions:function(){var d=[],b;for(b in a)a[b].TR||d.push(b);return d}()}}();p.filter.rules={};p.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var f=function(a){this.that=a;a.on("load",function(){var d=a.options.dataModel.dataUF;d&&(d.length=0)})};p.cFilterData=f;var c=f.prototype;f.conditions={equal:function(a,d){if(a==d)return!0},contain:function(a,d){if(-1!=a.indexOf(d))return!0},notcontain:function(a,d){if(-1==a.indexOf(d))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,d){if(0==(a+"").indexOf(d))return!0},
notbegin:function(a,d){if(0!=a.indexOf(d))return!0},end:function(a,d){var b=a.lastIndexOf(d);if(-1!=b&&b+d.length==a.length)return!0},notend:function(a,d){var b=a.lastIndexOf(d);if(-1==b||b+d.length!=a.length)return!0},regexp:function(a,d){if(d.test(a))return d.lastIndex=0,!0},notequal:function(a,d){if(a!=d)return!0},great:function(a,d){if(a>d)return!0},gte:function(a,d){if(a>=d)return!0},between:function(a,d,b){if(a>=d&&a<=b)return!0},range:function(a,d){if(-1!=l.inArray(a,d))return!0},less:function(a,
d){if(a<d)return!0},lte:function(a,d){if(a<=d)return!0}};f.convert=function(a,d){a=null==a?"":a;"string"==d?a=l.trim(a).toUpperCase():"date"==d?a=Date.parse(a):"integer"==d?a=parseInt(a):"float"==d?a=parseFloat(a):"bool"==d&&(a=String(a).toLowerCase());return a};c.isMatchCellSingle=function(a,d){var b=a.dataType,e=a.value,c=a.value2,k=a.cbFn,h=d[a.dataIndx],h="regexp"==a.condition?null==h?"":h:f.convert(h,b);return k(h,e,c)?!0:!1};c.isMatchRow=function(a,d,b){if(0==d.length)return!0;for(var e=0;e<
d.length;e++){var c=this.isMatchCell(d[e],a);if("OR"==b&&c)return!0;if("AND"==b&&!c)return!1}if("AND"==b)return!0;if("OR"==b)return!1};c.getQueryStringFilter=function(){var a=this.that,d=a.options,b=d.stringify,d=d.filterModel,e=d.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),c="";d&&d.on&&a&&(a.length?(d={mode:e,data:a},c=!1===b?d:JSON.stringify(d)):c="");return c};c.filterLocalData=function(a){a=a||{};var d=this.that,b=a.apply;a=this.getFilterData({CM:!1===b?a.CM:d.colModel});var e=
d.options,c=e.dataModel,k=d.iSort,f=c.data,l=c.dataUF,e=e.filterModel,g=e.multiple,m=e?e.mode:null;f||(f=c.data=[]);l||(l=c.dataUF=[]);!1===b&&(f=f.slice());if(l.length){for(var p=0,s=l.length;p<s;p++)f.push(l[p]);0==k.readSorter().length&&k.sortLocalData(f);l=c.dataUF=[]}else if(a.length)k.saveOrder();else return{data:f,dataUF:l};this.isMatchCell=g?this.isMatchCellMultiple:this.isMatchCellSingle;if(e.on&&m&&a&&a.length&&f.length)for(p=f.length-1;0<=p;p--)this.isMatchRow(f[p],a,m)||l.push(f.splice(p,
1)[0]);!1!==b&&(d._queueATriggers.filter={ui:{type:"local",filter:a}});return{data:f,dataUF:l}};c.getFilterData=function(a){var d=a.CM;if(!d)throw"CM N/A";var b=d.length,e=a.location;a=this.that.options.filterModel.multiple;for(var c=p.filter.getAllConditions,k=p.filter.getTRConditions,f=[],q=p.cFilterData,g=function(a,b,d){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=d&&""!==d?!0:!1:-1!=l.inArray(a,c)?null!=b&&""!==b||-1==l.inArray(a,k)?!0:!1:!0},m=function(a,b){return"remote"==
e?(null==a?"":a).toString():q.convert(a,b)},C=0;C<b;C++){var s=d[C],r=s.dataIndx,t=s.dataType,t=t&&"function"!=typeof t?t:"string",w=s.filter;if(a){if((w=s.filterModel)&&w.on){for(var u=[],y=w.mode,z=w.filters,s=0;s<z.length;s++){var w=z[s],A=w.value,B=w.condition;g(B,A)&&(A=m(A,t),u.push({value:A,condition:B}))}f.push({dataIndx:r,mode:y,dataType:t,filters:u})}}else if(w&&w.on&&(A=w.value,u=w.value2,B=w.condition,g(B,A,u))){if("between"==B)""===A||null==A?(B="lte",A=m(u,t)):""===u||null==u?(B="gte",
A=m(A,t)):(A=m(A,t),u=m(u,t));else if("regexp"==B)if("remote"==e)A=A.toString();else{if("string"==typeof A)try{var v=w.modifiers,v=v?v:"gi",A=new RegExp(A,v)}catch(x){A=/.*/}}else if("range"==B)if(null==A)continue;else if("string"==typeof A)A=m(A,t),A=A.split(/\s*,\s*/);else{if(A&&"function"==typeof A.push){if(0==A.length)continue;A=A.slice();s=0;for(w=A.length;s<w;s++)A[s]=m(A[s],t)}}else A=m(A,t);f.push({dataIndx:r,value:A,value2:u,condition:B,dataType:t,cbFn:"remote"==e?"":"function"==typeof B?
B:q.conditions[B]})}}return f}})(jQuery);
(function(l){l=(l.paramquery.cSort=function(f){this.that=f;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1}).prototype;l.cancelSort=function(){this.cancel=!0};l.resumeSort=function(){this.cancel=!1};l.readSorter=function(){var f=this.that,c=f.options,a=c.groupModel,d,f=f.columns,b=0,e,n,k=[];if(a.on)for(d=a.dataIndx,e=d.length,n=a.dir;b<e;b++)a=d[b],k.push({dataIndx:a,dir:n[b]?n[b]:"up"});d=c.sortModel;c=d.sorter;d=d.single;if(c&&(e=c.length)){for(;e--;)null==f[c[e].dataIndx]&&c.splice(e,
1);d&&c.length&&(c=[c[0]]);k=k.concat(c)}return k=pq.arrayUnique(k,"dataIndx")};l.setSingle=function(f){this.single=f};l.getSingle=function(){return this.single};l.readSingle=function(){return this.that.options.sortModel.single};l.writeSingle=function(f){this.that.options.sortModel.single=f};l.setCancel=function(f){this.cancel=f};l.getCancel=function(){return this.cancel};l.readCancel=function(){return this.that.options.sortModel.cancel};l.writeCancel=function(f){this.that.options.sortModel.cancel=
f};l.writeSorter=function(f){var c=this.that.options,a=c.sortModel,d=c.groupModel,c=d.dataIndx,b=d.dir;if(d.on){for(d=0;d<c.length;d++){var e=f[d];if(c[d]!=e.dataIndx)throw"gDataIndx!=sorter.dataIndx";b[d]=e.dir}f.splice(0,c.length)}a.sorter=f};l.refreshSorter=function(f){f=f||{};var c=f.sorter,a=c[0].dataIndx,d=c[0].dir,b=f.single,c=f.cancel,e=this.that.options.groupModel,n=e.dataIndx,k=e.on?n.length:0,h=-1;f=this.readSorter();if(null==b)throw"sort single N/A";if(e.on)for(e=0;e<k;e++)n[e]==a&&(h=
e);-1<h?f[h].dir="up"===f[h].dir?"down":"up":null!=a&&(b?f[k]&&f[k].dataIndx==a?(a=f[k].dir,a="up"===a?"down":c&&"down"===a?"":"up",""===a?f.length--:f[k].dir=a):f[k]={dataIndx:a,dir:d?d:"up"}:(k=this.inSorters(f,a),-1<k?(a=f[k].dir,"up"==a?f[k].dir="down":c&&"down"==a?f.splice(k,1):1==f.length?f[k].dir="up":f.splice(k,1)):f.push({dataIndx:a,dir:"up"})));return f};l.saveOrder=function(f){var c=this.that.options.dataModel;f=c.data;if(!(!f||!f.length||c.dataUF&&c.dataUF.length||this.getSorter().length&&
null!=f[0].pq_order))for(var c=0,a=f.length;c<a;c++)f[c].pq_order=c};l.getQueryStringSort=function(){if(this.cancel)return"";var f=this.sorters,c=this.that.options.stringify;return f.length?!1===c?f:JSON.stringify(f):""};l.getSorter=function(){return this.sorters};l.setSorter=function(f){this.sorters=f.slice(0)};l.inSorters=function(f,c){for(var a=-1,d=0;d<f.length;d++)if(f[d].dataIndx==c){a=d;break}return a};l.sortLocalData=function(f){for(var c=this.that,a=c.colModel,d=this.sorters,b=0;b<d.length;b++){var e=
d[b],n=c.getColIndx({dataIndx:e.dataIndx}),n=a[n],k=n.sortType;e.dataType=n.dataType;e.sortType=k}d.length||(d=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(d,f)};l._sortLocalData=function(f,c){if(null==c)return[];if(0==c.length||!f||!f.length)return c;var a=this,d=a.tmpPrefix,b=a.that.options.sortModel,e=b.useCache,n=b.ignoreCase;(function(){for(var b=[],h=[],l=[],g=f.length,m=0;m<g;m++){var C=f[m],s=C.dataIndx,r="up"==C.dir?1:-1,t=C.sortType,C=(C=C.dataType)?C:
"string",C="string"==C&&n?"stringi":C,w=e&&"date"==C,u=w?d+s:s;h[m]=u;l[m]=r;b[m]=t?function(a,b){return function(d,e,c,k){return b(d,e,c,k,a)}}(t,p.sort_sortType):"integer"==C?p.sort_number:"float"==C?p.sort_number:"function"==typeof C?function(a,b){return function(d,e,c,k){return b(d,e,c,k,a)}}(C,p.sort_dataType):"date"==C?p["sort_date"+(w?"_fast":"")]:"bool"==C?p.sort_bool:"stringi"==C?p.sort_locale:p.sort_string;w&&a.useCache(c,C,s,u)}c=c.sort(function(a,d){for(var e=0,c=0;c<g&&(e=b[c](a,d,h[c],
l[c]),0==e);c++);return e});w&&setTimeout(a.removeCache(f,c),0)})();return c};l.useCache=function(f,c,a,d){c=p["get_"+c];for(var b=f.length;b--;){var e=f[b];e[d]=c(e[a])}};l.removeCache=function(f,c){var a=this.tmpPrefix;return function(){for(var d=f.length;d--;){var b=a+f[d].dataIndx,e=c.length;if(e&&c[0].hasOwnProperty(b))for(;e--;)delete c[e][b]}}};var p={get_date:function(f){var c;return f?isNaN(c=Date.parse(f))?0:c:0},sort_number:function(f,c,a,d){f=f[a];c=c[a];return((f?1*f:0)-(c?1*c:0))*d},
sort_date:function(f,c,a,d){f=f[a];c=c[a];f=f?Date.parse(f):0;c=c?Date.parse(c):0;return(f-c)*d},sort_date_fast:function(f,c,a,d){return(f[a]-c[a])*d},sort_dataType:function(f,c,a,d,b){return b(f[a],c[a])*d},sort_sortType:function(f,c,a,d,b){return b(f,c,a)*d},sort_string:function(f,c,a,d){f=f[a];c=c[a];a=0;f=f?f:"";c=c?c:"";f>c?a=1:f<c&&(a=-1);return a*d},sort_locale:function(f,c,a,d){f=f[a];c=c[a];return(f?f:"").localeCompare(c?c:"")*d},sort_bool:function(f,c,a,d){f=f[a];c=c[a];a=0;if(f&&!c||!1===
f&&null===c)a=1;else if(c&&!f||!1===c&&null===f)a=-1;return a*d}};pq.sortObj=p})(jQuery);
(function(l){function p(a){this.that=a;this.mc=null;var b=this,e=a.options;this.DM=e.dataModel;a.on("dataReady columnOrder groupShowHide",function(a,d){e.mergeCells&&"pager"!==d.source&&b.init()})}function f(a,b,e){var c=0,k=a.length;for(e=e>k?k:e;b<e;b++)!0!==a[b].hidden&&c++;return c}function c(a,b,e){var c=0,k=a.length;for(e=e>k?k:e;b<e;b++)!0!==a[b].pq_hidden&&c++;return c}l.paramquery.cMerge=p;var a=p.prototype=new l.paramquery.cClass;a.init=function(){for(var a=this.that,b=a.colModel,e=a.options.mergeCells||
[],n=a.get_p_data(),k=[],h=[],l=0,g=e.length;l<g;l++){var m=e[l],p=m.r1,s=p,r=n[p],t=m.c1,w=t,u=b[t],y=m.rc,z=m.cc;if(u&&r){if(u.hidden)a:{for(w=t;w<t+z;w++){u=b[w];if(!u){w=-1;break a}if(!u.hidden)break a}w=void 0}u=f(b,t,t+z);if(r.pq_hidden)a:{for(s=p;s<p+y;s++){r=n[s];if(!r){s=-1;break a}if(!r.pq_hidden)break a}s=void 0}r=c(n,p,p+y);if(!(1>r||1>u))for(k.push({r1:p,c1:t,rc:y,cc:z,e_rc:r,e_cc:u}),h[s]=h[s]||[],h[s][w]={show:!0,rowspan:r,colspan:u,o_rowspan:y,o_colspan:z,style:m.style,cls:m.cls,attr:m.attr,
r1:p,c1:t,v_r1:s,v_c1:w},m={show:!1,r1:p,c1:t,v_r1:s,v_c1:w},r=p;r<p+y;r++)for(h[r]=h[r]||[],u=t;u<t+z;u++)if(r!=s||u!=w)h[r][u]=m}}a._mergeCells=0<h.length;this.mc=h;this.mc2=k};a.isHidden=function(a,b){var c,f=this.mc;return f&&f[a]&&(c=f[a][b])&&!c.show?!0:!1};a.setData=function(a,b,c){var f,k=this.mc;k[a]&&(f=k[a][b])&&(f.data=c)};a.getData=function(a,b,c){var f,k=this.mc;if(k[a]&&(f=k[a][b]))return(a=f.data)?a[c]:null};a.removeData=function(a,b,c){var f,k=this.mc;k&&k[a]&&(f=k[a][b])&&(a=f.data)&&
(a[c]=null)};a.ismergedCell=function(a,b){var c=this.mc,f;return c&&c[a]&&(f=c[a][b])?(c=c[f.v_r1][f.v_c1],a==c.r1&&b==c.c1?{rowspan:c.o_rowspan,colspan:c.o_colspan}:!0):!1};a.isRootCell=function(a,b,c){var f=this.mc,k;if(f&&f[a]&&(k=f[a][b])){if("o"==c)return a==k.r1&&b==k.c1;var h=k.v_r1;k=k.v_c1;if("a"==c)return c=f[h][k],c.a_r1==a&&c.a_c1==b;if(h==a&&k==b)return c=f[h][k],{rowspan:c.rowspan,colspan:c.colspan}}};a.getRootCell=function(a,b,c){var f=this.that,k=this.mc,h;if(k&&k[a]&&(h=k[a][b])){"a"==
c?(a=h.v_r1,b=h.v_c1,c=k[a][b],c.a_r1&&(a=c.a_r1,b=c.a_c1)):"o"==c?(a=h.r1,b=h.c1):(a=h.v_r1,b=h.v_c1);c=f.colModel[b];var k=f.rowIndxOffset,l=a-k;0>l&&(l=0,a=k);return{rowIndxPage:l,colIndx:b,column:c,dataIndx:c.dataIndx,rowData:f.pdata[l],rowIndx:a,rowspan:h.rowspan,colspan:h.colspan}}return f.normalize({rowIndx:a,colIndx:b})};a.inflateRange=function(a,b,c,f){var k=this.that,h=!1,l=k.options,l=l.groupModel.on?k.rowIndxOffset+k.pdata.length-1:l.dataModel.data.length-1,k=k.colModel.length-1,g=this.mc2;
if(!g)return[a,b,c,f];var m=0,p=g.length;a:for(;m<p;m++){var s=g[m],r=s.r1,t=s.c1,w=r+s.rc-1,s=t+s.cc-1,w=w>l?l:w,s=s>k?k:s,u=r<=c&&w>c,y=t<b&&s>=b,z=t<=f&&s>f;if((r<a&&w>=a||u)&&s>=b&&t<=f||(y||z)&&w>=a&&r<=c){h=!0;a=r<a?r:a;b=t<b?t:b;c=w>c?w:c;f=s>f?s:f;break a}}return h?this.inflateRange(a,b,c,f):[a,b,c,f]};l.paramquery.pqGrid.prototype.calcVisibleRows=c;a.renderCell=function(a){var b=this.that,e=a.rowIndx,n=a.rowIndxPage,k=a.colIndx,h,l=this.mc,g;if(l[e]&&(g=l[e][k])){var m=g.v_r1,p=g.v_c1;h=
g.r1;var s=g.c1,r=b.options,t=b.colModel,w=b.rowIndxOffset,u=r.freezeCols,y=(r=r.freezeRows)?r+w:0,z=b.initH,A=b.initV;if(g.show||k==p&&n==A&&m>=y||k==p&&e==A&&m>=y||e==m&&k==z&&p>=u||e==A&&k==z&&p>=u&&m>=y){var B=h-w,n=b.pdata,b=b.get_p_data(),v=f(t,0,u);g=c(n,0,r);h={rowData:b[h],rowIndx:h,colIndx:s,column:t[s],rowIndxPage:B};l=l[m][p];s=l.colspan;B=l.rowspan;u&&k<u&&k+s>v?(p=s-f(t,u,z),t=f(t,k,u),s=Math.max(p,t)):s-=f(t,p,k);r&&e<y&&e+B>g+w?(m=B-c(n,r,A),w=c(n,e-w,r),B=Math.max(m,w)):B-=c(b,m,
e);l.a_r1=e;l.a_c1=k;h.rowspan=B;h.colspan=s;h.style=l.style;h.attr=l.attr;h.cls=l.cls}else return null}return h?h:a};a.getMergeCells=function(a,b,c){for(var f=this.that,k=f.options.mergeCells,h,l,f=f.rowIndxOffset,g=f+c,m=[],p=k?k.length:0,s=0;s<p;s++)if(c=k[s],h=c.r1,l=c.c1,!b||h>=f&&h<g)b&&(h-=f),h+=a,m.push({r1:h,c1:l,r2:h+c.rc-1,c2:l+c.cc-1});return m}})(jQuery);
(function(){var l=window.pq=window.pq||{};l.extend=function(a,c,d){var f=function(){};f.prototype=a.prototype;var f=c.prototype=new f,h=a.prototype,l;for(l in d){var g=h[l],m=d[l];f[l]=g?function(a,b){return function(){this._super=function(){return a.apply(this,arguments)};var c=b.apply(this,arguments);this._super=void 0;return c}}(g,m):m}f.constructor=c;f._base=a;f._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return h[a].apply(this,b)}};var p=l.Range=function(a,c,d,f){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof p)return new p(a,c,d,f);this._type=d?d:"range";this.init(c,f)},f=p.prototype;f._areas=[];f.init=function(a,c){c=!1!==c;if(a)if("function"==typeof a.push)for(var d=0,f=a.length;d<f;d++)this.init(a[d],c);else if(d=this._normal(a,c))f=this._areas,f.length?f.push(d):this._areas=[d]};f.address=function(){this.dirty&&this.refresh();return this._areas};f.areas=function(a){this.dirty&&this.refresh();var c=this.that,d=this._areas,d=null==a?d:d[a];return l.Range(c,d,"area")};
f.merge=function(a){a=a||{};var c=this.that,d=c.options.mergeCells,f,h,l=this._areas[0];l&&(f=l.r2-l.r1+1,h=l.c2-l.c1+1,1<f||1<h)&&(l.rc=f,l.cc=h,d.push(l),!1!==a.refresh&&c.refreshView())};f.unmerge=function(a){a=a||{};var c=this.that,d=c.options.mergeCells,f=this._areas[0];if(f){for(var h=0;h<d.length;h++){var l=d[h];if(l.r1==f.r1&&l.c1==f.c1){d.splice(h,1);break}}!1!==a.refresh&&c.refreshView()}};f.hide=function(a){a=a||{};for(var c=this.that,d=c.colModel,f=c.get_p_data(),h=this._areas,l=0,g=h.length;l<
g;l++){var m=h[l],p=m.type,s=m.r1,r=m.r2,t=m.c1,m=m.c2;if("column"==p)for(p=t;p<=m;p++)d[p].hidden=!0;else if("row"==p)for(p=s;p<=r;p++)f[p].pq_hidden=!0}!1!==a.refresh&&c.refreshView()};f.unhide=function(a){a=a||{};for(var c=this.that,d=c.colModel,f=c.get_p_data(),h=this._areas,l=0,g=h.length;l<g;l++){var m=h[l],p=m.type,s=m.r1,r=m.r2,t=m.c1,m=m.c2;if("column"==p)for(p=t;p<=m;p++)d[p].hidden=!1;else if("row"==p)for(p=s;p<=r;p++)f[p].pq_hidden=!1}!1!==a.refresh&&c.refreshView()};f.select=function(){var a=
this.that,c=a.iSelection,d=c._areas[0],f=this._areas,h=f[0];if(!h)return this;var l=h.r1,g=h.c1;if(c.dirty||1!=f.length||"block"!=f[0].type||!d||"cell"!=d.type&&"block"!=d.type||l!=d.r1||g!=d.c1)for(c.removeAll({trigger:!1}),l=0,g=f.length;l<g;l++)c.add(f[l],!1);else{var m=d.r1,p=d.c1,s=d.r2,d=d.c2,r=h.r2,h=h.c2,a=a.iCells;if(r==s&&h==d)return this;h>d?a.selectBlock({range:{r1:l,c1:d+1,r2:r,c2:h}}):h<d&&a.selectBlock({range:{r1:Math.max(l,m),c1:h+1,r2:Math.max(r,s),c2:d},remove:!0});r>s?a.selectBlock({range:{r1:s+
1,c1:g,r2:r,c2:h}}):r<s&&a.selectBlock({range:{r1:r+1,c1:Math.max(g,p),r2:s,c2:Math.max(h,d)},remove:!0});c._areas=f}c._trigger();return this};f.resize=function(a,c){var d=this._areas[0];return p(this.that,{r1:d.r1,c1:d.c1,rc:a,cc:c})};f.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};f.copy=function(a){a=a||{};this.dirty&&this.refresh();var c=this.that,d=a.dest,f=a.cut?!0:!1,h=null==a.copy?!0:a.copy,l=a.source||(f?"cut":"copy"),g=null==a.history?!0:a.history,m=null==a.allowInvalid?!0:a.allowInvalid,
p=[],s=[],r=c.get_p_data(),t=c.colModel,w=c.readCell,u=c.iMerge,y=this._areas;if(y.length){var z=this._areas[0],A=z.type,B=z.r1,v=z.c1,x="cell"==A?B:z.r2,z="cell"==A?v:z.c2,D=0;do{for(;B<=x;B++){for(var E=[],F=r[B],H={},J={},N=v;N<=z;N++){var L=t[N],P=L.dataIndx;if(!1!==L.copy){var O=F[P];h&&E.push(w(F,L,u,B,N));f&&(H[P]=void 0,J[P]=O)}}f&&p.push({rowIndx:B,rowData:F,oldRow:J,newRow:H,type:"update"});E=E.join("\t");s.push(E)}D++;z=y[D];if("row"==A&&z&&"row"==z.type)B=z.r1,v=z.c1,x=z.r2,z=z.c2;else break}while(1);
h&&(E=s.join("\n"),a.clip?(a=a.clip,a.val(E),a.select()):c._setGlobalStr(E));d?c.paste({dest:d,rowList:p,history:g,allowInvalid:m}):f&&!1!==c._digestData({rowList:p,source:l,history:g,allowInvalid:m})&&c.refresh({source:"cut"})}};f.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};f.add=function(a){this.init(a)};f._countArea=function(a){var c=a.r1,d=a.c1,f=a.r2,h=a.c2;return"cell"==a.type?1:(f-c+1)*(h-d+1)};f.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
c=this._areas,d=0,f=c.length,h=0;h<f;h++)d+=a?this._countArea(c[h]):1;return d};f.rows=function(a){this.dirty&&this.refresh();var c=this.that,d=[],f=this._areas[0];if(f){var h=f.r1,p=f.c1,g=f.r2,m=f.c2,f=f.type,g=null==a?g:h+a;for(a=null==a?h:h+a;a<=g;a++)d.push({r1:a,c1:p,r2:a,c2:m,type:f})}return l.Range(c,d,"row")};f.columns=function(a){this.dirty&&this.refresh();var c=this.that,d=[],f=this._areas[0];if(f){var h=f.r1,p=f.c1,g=f.r2,m=f.c2,f=f.type,m=null==a?m:p+a;for(a=null==a?p:p+a;a<=m;a++)d.push({r1:h,
c1:a,r2:g,c2:a,type:f})}return l.Range(c,d,"column")};f.cell=function(a,c){this.dirty&&this.refresh();var d=this.that,f=[],h=this._areas[0];h&&(f=h.r1+a,h=h.c1+c,f=[f,h,f,h]);return l.Range(d,f,"cell")};f.item=function(a){this.dirty&&this.refresh();for(var c=0,d=!1,f=this._areas,h=0,l=f.length;h<l;h++){var g=f[h],m=this._countArea(g);if(c+m>a){d=!0;a-=c;break}else c+=m}if(d){if(g)var p=g.r1,s=g.c1,c=g.c2-s+1,p=p+Math.floor(a/c),s=s+a%c;return{r1:p,c1:s}}};f._normal=function(a,c){if(a.type)return a;
if("function"==a.push){for(var d=[],f=0,h=a.length;f<h;f++){var l=this._normal(a[f],c);l&&d.push(l)}return d}var d=this.that,g=d.get_p_data().length-1,m=d.colModel.length-1,f=a.r1,h=a.c1,f=f>g?g:f,h=h>m?m:h,p=a.rc,s=a.cc,l=a.r2,r=a.c2,l=p?f+p-1:l>g?g:l,r=s?h+s-1:r>m?m:r;if(0>m||0>g)return null;f>l&&(p=f,f=l,l=p);h>r&&(p=h,h=r,r=p);if(null!=f||null!=h)return null==f?(f=0,l=g,r=null==r?h:r,g="column"):null==h?(h=0,l=null==l?f:l,r=m,g="row"):null==l?(g="cell",l=f,r=h):g="block",c&&(d=d.iMerge.inflateRange(f,
h,l,r),f=d[0],h=d[1],l=d[2],r=d[3]),a.r1=f,a.c1=h,a.r2=l,a.c2=r,a.type=a.type||g,a};f.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var c=this.that,d=c.colModel,f=[],h=this._areas;if(void 0===a&&h.length){var l=h[0],g=l.r1,m=l.c1;return c.getCellData({rowIndx:g,colIndx:m})}for(var p=0;p<h.length;p++)for(var l=h[p],g=l.r1,m=l.c1,s=l.r2,l=l.c2;g<=s;g++){for(var r=c.normalize({rowIndx:g}),t=r.rowData,r=r.rowIndx,w={},u={},y=m;y<=l;y++){var z=d[y].dataIndx;u[z]=a;w[z]=t[z]}f.push({rowData:t,
rowIndx:r,type:"update",newRow:u,oldRow:w})}f.length&&(c._digestData({rowList:f,source:"range"}),c.refresh())};var c=l.Selection=function(a,d){if(null==a)throw"invalid param";if(!1==this instanceof c)return new c(a,d);this.that=a;var f=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&f.renew()});this._base(a,d)},a={renew:function(){var a=this._areas,c=a.length;if(1==c){if(a=a[0],a=this._adjust(a))this.removeAll({trigger:!1}),this.add(a,!1)}else 1<c&&(this.dirty=
!0)},isDirty:function(){return this.dirty}},d=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",d),this.off("keyUp",d))};a._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,{selection:this});a.off("mousePQUp",d);a.off("keyUp",d);a.on("mousePQUp",d);a.on("keyUp",d)};a.removeAll=function(a){a=a||{};var c=this.that;c.iCells.removeAll({refresh:!0});c.iRows.removeAll({refresh:!0,
all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};f.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var c=a.type,d=a.r1,f=a.c1,h=a.r2;a=a.c2;for(var l=this._areas,g=0,m=l.length;g<m;g++){var p=l[g],s=p;if(c==p.type&&d>=s.r1&&h<=s.r2&&f==s.c1&&a==s.c2)return g}return-1};a.add=function(a,c){var d=this.that,f=this._normal(a,!0),h=d.iCells,d=d.iRows,l=f.r1,g=f.c1,m=f.r2,p=f.type;0<=this.indexOf(f)||("row"==p?(h=this._areas,h.length&&(h=h[h.length-1],p=h.type,"row"==p&&l<=h.r2&&
(this.dirty=!0)),m>l?d.selectRange({range:f}):d.add({rowIndx:l})):"column"==p||"block"==p?h.selectBlock({range:f}):"cell"==p&&h.add({rowIndx:l,colIndx:g}),this._super(f),!1!==c&&this._trigger())};a._adjust=function(a){var c=this.that,d=c.get_p_data().length-1,c=c.colModel.length-1,f=a.r1,h=a.c1,l=a.r2,g=a.c2,l=l>d?d:l,g=g>c?c:g;if(0>c||0>d||f>l||h>g)return null;a.r1=f;a.r2=l;a.c1=h;a.c2=g;return a};f.removeRow=function(a,c){var d=a.r1,f=a.r2,h=this._areas,l=this._areas[c],g=l.r1,m=l.r2;d==g&&f==m?
h.splice(c,1):d>g?(l.r2=d-1,f<m&&(d=this._normal({r1:f+1,r2:m}),h.splice(c+1,0,d))):f<m&&(d>g&&(d=this._normal({r1:f+1,r2:m}),h.splice(c,0,d)),l.r1=f+1)};a.removeRow=function(a,c){var d=this.that,f=this._normal(a),h=this.indexOf(f);-1<h&&"row"==f.type&&f.r1==f.r2&&(d.iRows.remove({rowIndx:f.r1}),this._super(a,h),!1!==c&&this._trigger())};a.selectAll=function(a){a=a||{};var c=this.that,d=a.all,f=d?0:c.rowIndxOffset,h=c.colModel.length-1,l=f+(d?c.options.dataModel.data.length-1:c.pdata.length-1);"cell"==
a.type?(a={r1:f,c1:0},a.r2=l,a.c2=h,c.range(a).select()):(a={r1:f},a.r2=l,d||this.removeRows({all:!1,trigger:!1}),c.iRows.selectRange({range:a}),c=d?[]:this._areas,c.push({r1:f,c1:0,r2:l,c2:h,type:"row"}),this._areas=c,this._trigger());return this};a.removeRows=function(a){a=a||{};var c=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});c?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};a.refresh=function(){for(var a=this.that,c=[],d=a.colModel.length-1,a=a.get_p_data(),f=0,h=a.length;f<
h;f++){var l=a[f],g;l&&(l.pq_cellselect=void 0,l.pq_rowselect?g?g.r2=f:g={r1:f,r2:f,c1:0,c2:d,type:"row"}:g&&(c.push(g),g=null))}g&&c.push(g);this.dirty=!1;this._areas=c};l.extend(p,c,a)})();
(function(l){function p(a,c,b,e){a.push("<li data-option='",b,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",c[b]?"checked":"","/>",e["strGroup_"+b],"</label></li>")}var f=l.paramquery;pq.aggregate={sum:function(a){for(var c=0,b=a.length,e;b--;)e=a[b],null!=e&&(c+=e-0);return c},avg:function(a,c){return this.sum(a,c,!0)/a.length},max:function(a,c){var b;b=c.dataType;"float"==b||"integer"==b?b=Math.max.apply(Math,a):"date"==b?(a.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&
(a=0);isNaN(b)&&(b=0);return b-a}),b=a[0]):(a.sort(),b=a[a.length-1]);return b},min:function(a,c){var b;b=c.dataType;var e,f;if("integer"==b||"float"==b)b=Math.min.apply(Math,a);else if("date"==b){f=a.length;for(b=[];f--;)(e=a[f])&&b.push({dateO:e,dateP:Date.parse(e)});b.sort(function(a,b){return a.dateP-b.dateP});b=b.length?b[0].dateO:void 0}else a.sort(),b=a[0];return b},count:function(a){return a.length}};var c=(f.cGroupView=function(a){this.that=a;a.options.groupModel.on&&this.init()}).prototype;
c.init=function(){var a,c,b,e;this._init||(this.mc=[],this.tree=[],this.summaryData=[],e=this.that,a=e.options,c=a.groupModel,a=a.bootstrap,b=(a=a.on)?"glyphicon ":"ui-icon ",this.groupRemoveIcon="pq-group-remove "+b+(a?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+b,e.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,c)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,c)).on("dataReady",this.onDataReady(this,e)).on("beforeSortDone",
this.onBeforeSort(this,e)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(a){return function(c,b){b.rowData.pq_gtitle&&l(c.originalEvent.target).hasClass("pq-group-icon")&&a.toggle(b.rowIndxPage)}};c.onChange=function(a,c){return function(){a.saveState(c.refreshOnChange)}};c.onCellMouseDown=function(){return function(a,c){c.rowData.pq_gtitle&&l(a.originalEvent.target).hasClass("pq-group-icon")&&a.stopImmediatePropagation()}};
c.onCellKeyDown=function(a,c){return function(b,e){if(e.rowData.pq_gtitle&&0<=l.inArray(e.dataIndx,c.dataIndx)&&b.keyCode==l.ui.keyCode.ENTER)return a.toggle(e.rowIndxPage),!1}};c.showRows=function(){for(var a=this.that.options.dataModel.data,c=0,b=a.length;c<b;c++)a[c].pq_hidden=!1};c.removeGroup=function(a,c){for(var b=this.that.options.groupModel.dataIndx,e=0;e<b.length;e++)if(a==b[e]){b.splice(e,1);break}b.length||(this.showRows(),this.mc.length=0);!1!==c&&this.refreshFull()};c.addGroup=function(a,
c){var b=this.that.options.groupModel;b.dataIndx=b.dataIndx||[];null!=a&&-1==l.inArray(a,b.dataIndx)&&(b.dataIndx.push(a),this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(a){return function(c,b){var e=b.column.colModel;e&&e.length?a.acceptDrop=!1:a._initHeadDroppable()}};c._initHeadDroppable=function(){var a=this,c=a.that,b=a.$header;b&&
(b.droppable({accept:function(b){return a.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:a.onDrop(c,a)}),a.acceptDrop=!0)};c.onDrop=function(a,c){return function(b,e){var f=1*e.draggable.attr("pq-col-indx");c.addGroup(a.colModel[f].dataIndx);c.acceptDrop=!1}};c.onSortable=function(a,c){return function(){for(var b=[],e=c.groupModel,f=e.dataIndx,k=[],h=!1,p=l(this).find(".pq-group-item"),g=0;g<p.length;g++){var m=l(p[g]),C=m.data("indx"),m=m.data("dir");f[g]!=C&&(h=!0);b.push(C);k.push(m)}h&&
(e.dataIndx=b,e.dir=k,a.refreshFull())}};c._initHeader=function(a,c){if(this.$header){var b=this.$header,e=b.find(".pq-group-item");b.data("uiSortable")||this._initHeadSortable();e.length||b.append("<span class='pq-group-placeholder'>"+a.strGroup_header+"</span>");c.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var a=this,c=a.that,b=a.$header,e=c.options,f=e.bootstrap,k=c.columns,h=f.on,p=e.groupModel,g=p.dataIndx,m=g.length;m--;)null==k[g[m]]&&g.splice(m,1);m=g.length;if(p.header&&
p.on){b?b.empty():(b=a.$header=l("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(c.$top),b.on("click",".pq-group-item",function(b){b=l(b.target);var c=l(this).data("indx");b.hasClass("pq-group-remove")?a.removeGroup(c):a.groupToggle(c)}));if(m){for(var c=[],C=0;C<m;C++){var s=g[C],r=k[s],t=h?f.groupModel.icon:p.icon;c.push("<div class='pq-group-item' data-indx='",s,"' data-dir='",p.dir[C],"'>","<span class='",a.toggleIcon,p.collapsed[C]?t[1]:t[0],"' ></span>",r.pqtitle||("string"==
typeof r.title?r.title:s),"<span class='",a.groupRemoveIcon,"' ></span></div>")}b[0].innerHTML=c.join("")}a._initHeader(e,p)}else b&&(b.remove(),a.$header=null)};c._initHeaderMenu=function(){for(var a=this.that,c=a.options,b=this.$header,e=["<ul class='pq-group-menu'><li>",a.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],f=c.groupModel,k=f.menuItems,h=0,q=k.length;h<q;h++)p(e,f,k[h],c);e.push("</ul></li></ul>");b=l(e.join("")).appendTo(b);b.menu({icons:{submenu:"ui-icon-carat-1-w"},
position:{my:"right top",at:"left top"}});b.change(function(b){if("INPUT"==b.target.nodeName){b=l(b.target).closest("li").data("option");var e={};e[b]=!c.groupModel[b];e.refresh=!0;a.groupOption(e)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=function(a,c){return function(){a.tree.length=0;var b=c.options.groupModel;b.on&&(b.dataIndx.length?(a.refreshColumns(),a._groupData(),a._initcollapsed(),a._initmerge()):
b.grandSummary&&(a.refreshColumns(),a._groupData()));a.createHeader()}};c.onColumnOrder=function(a){return function(){a._initmerge()}};c.pq_gc_=function(){return"pq_gc_"};c.onBeforeSort=function(a,c){return function(b){if(!b.isDefaultPrevented()){var e=c.options,f=e.groupModel;if(f.on){b=c.columns;for(var k=[],e=e.dataModel.data||[],h=[],l,g,m=f.dataIndx,p=m.length;p--;){var s=m[p];l=b[s];var r=l.groupChange;if(r)for(k.push(l),f=a.pq_gc_()+s,h.push(f),l.sortType=a.sortType(f),g=e.length;g--;)l=e[g],
l[f]=r(l[s])}c.one("sort",function(){if(p=k.length)for(;p--;)k[p].sortType=void 0})}}}};c.sortType=function(a){return function(c,b,e){return c[a]!=b[a]?c[e]-b[e]:0}};c.groupToggle=function(a){var c=this.that.options.groupModel,b=c.collapsed;a=l.inArray(a,c.dataIndx);b[a]=!b[a];this.trigger(null,a);this.refreshView()};c.expandIndx=function(a){var c=this.that,b=!0==a.close;a=a.indx.split(",");var e=a.length,f=this.tree,k,h,l;k=0;var g,c=c.pdata;if(!(e>f.length)){for(var m=0;m<e;m++){g=1*a[m]+k;k=f[m][g];
if(!k){if(0==m)return;break}k=k.rip;if(!b||b&&m==e-1)h=c[k],h.pq_close!=b&&(l=h,h.pq_close=b);h=f[m+1];var p=void 0;if(h){do p=h[g].rip,g++;while(p<k);k=g-1}else k=void 0}l&&(this.trigger(l),this.saveState(!0))}};c._editorSummary=function(a,c){var b=a.summaryOptions;return function(a){var f=a.rowData;if(f.pq_gsummary||f.pq_gtitle){var f=pq.aggregate,k=a.column,h=k.summary,h=h?h.edit:null,p=k.dataType,k=[""];if(-1<l.inArray(a.dataIndx,c.dataIndx)||!c.summaryEdit&&!h||!1===h)return!1;"integer"==p||
"float"==p?p="number":"date"!==p&&(p="string");h=b[p].split(",");a=l.inArray;for(var g in f)-1<a(g,h)&&k.push(g);return 1==k.length?!1:{type:"select",prepend:c.prepend,options:c.options||k,valueIndx:c.valueIndx,labelIndx:c.labelIndx,init:c.init||function(a){var b=a.column.summary,c;b||(b=a.column.summary={});c=b.type;setTimeout(function(){a.$cell.find("select").val(c)},100)},getData:c.getData||function(a){var b=a.column;a=a.$cell.find("select").val();b.summary.type=a;this.one("beforeValidate",function(a,
b){b.allowInvalid=!0;b.track=!1;b.history=!1});return a}}}}};c._renderTitle=function(a,c){var b=this.that,e=a.bootstrap,f=e.on,e=f?e.groupModel.icon:c.icon,k=f?["glyphicon "+e[0],"glyphicon "+e[1]]:["ui-icon "+e[0],"ui-icon "+e[1]];return function(a){var e=a.rowData,f,l,n;if(e.pq_gtitle&&null!=a.cellData)return f=e.pq_close,l=e.pq_level,n=c.title,n=n[l]?n[l]:c.titleDefault,n="function"===typeof n?n.call(b,a):n.replace("{0}",a.cellData).replace("{1}",e.pq_items),{text:(a.Export?"":"<span class='pq-group-icon "+
k[f?1:0]+"'></span>")+n,cls:"pq-group-title-cell"}}};c._renderSummary=function(a){var c=this.that;return function(b){var e=b.rowData,f,k;if(e.pq_gsummary||e.pq_gtitle){e=b.column;f=e.summary.type;k=a.summaryTitle[f];if("function"==typeof k)return k.call(c,b);f=b.formatVal;null==f&&(f=b.cellData,f=null==f?"":f);"number"!=typeof f||e.format||parseInt(f)===f||(f=f.toFixed(2));return k?k.replace("{0}",f):f}}};c.refreshColumns=function(){for(var a=this.that,c=a.options,b=c.groupModel,e=b.on,f=b.fixCols,
k,h,l,g,m=b.dataIndx,p=m.length,s=c.colModel,r=s.length;r--;)l=s[r],l._render&&(l._render==l._renderGT?(delete l._renderGT,delete l._render):l._render==l._renderGS&&(delete l._renderGS,delete l._render)),l._nodrag&&(delete l._nodrag,delete l._nodrop),e&&(g=l.summary)&&g.type&&(h=h||this._renderSummary(c),l._render=l._renderGS=h);c.geditor=e?this._editorSummary(c,b):void 0;if(e)for(r=p-1;0<=r;r--)l=a.getColumn({dataIndx:m[r]}),k=k||this._renderTitle(c,b),l._renderGT=l._render=k;if(f&&e)for(r=0;r<p;r++)c=
a.getColIndx({dataIndx:m[r]}),l=s[c],l._nodrag=l._nodrop=!0,c!=r&&(a.iDragColumns.moveColumn(c,r,!0),a.iColModel.init())};c.refreshFull=function(){this.refreshColumns();this.that.sort()};c.refreshView=function(){this.that.refreshView()};c.expandAll=function(a){a=a||{};a=!0==a.close;var c=this.that.options.groupModel,b=c.collapsed,c=c.dataIndx,e;for(e=0;e<c.length;e++)b[e]=a;this.trigger(null,null,!0);this.refreshFull()};c.showHideRows=function(a,c,b,e){for(var f=[],k=this.that.pdata,h=k.length;a<
h;a++){var l=k[a];if(l.pq_gsummary)if(l.pq_level<c)break;else l.pq_hidden=b;else if(l.pq_gtitle){var g=l.pq_close;g&&f.push({indx:a,level:l.pq_level});if(l.pq_level<=c)break;else l.pq_hidden=e&&!g?!0:b}else l.pq_hidden=b}return f};c.trigger=function(a,c,b){var e=this.that,f=e.options.groupModel,k={};a?(c=a.pq_level,b=a[f.dataIndx[c]],a=a.pq_close,k={level:c,close:a,group:b}):b?(a=f.collapsed[0],k={all:!0,close:a}):null!=c&&(a=f.collapsed[c],k={level:c,close:a});e._trigger("group",null,k)};c.toggle=
function(a){a=this.that.pdata[a];a.pq_close=a.pq_close?!1:!0;this.trigger(a);this.saveState(!0)};c.saveState=function(a){var c=this.that,b=c.options.groupModel;if(b.on&&b.dataIndx.length){for(var b=c.pdata,e=b.length,f=Array(e),k=0;k<e;k++)f[k]=b[k];this.pdata=f;a&&c.refreshView()}};c._initmerge=function(){for(var a=this.that,c=a.options,b=c.groupModel.merge,e=this.tree,f=a.rowIndxOffset,k,h,l,g,m,p=a.colModel.length,s=[],r=a.pdata,t=0;t<e.length;t++){k=e[t];l=a.getColIndx({dataIndx:c.groupModel.dataIndx[t]});
for(var w=0,u=k.length;w<u;w++){h=k[w];g=h.rip;if(null==g)break;b?(h=h.rip2,m=h-g,h=g+f,s.push({r1:h,rc:m,c1:l,cc:1})):(h=g+f,g=r[g],g.pq_close||s.push({r1:h,rc:1,c1:l,cc:p-l}))}}s.length?(this.mc=c.mergeCells=s,a.iMerge.init()):this.mc.length&&(this.mc.length=0,a.iMerge.init())};c._initcollapsed=function(){var a=this.that,c=a.options.groupModel.merge,b=this.pdata,a=a.pdata,e,f,k,h;if(a){for(var l=0,g=a.length;l<g;l++)e=a[l],f=e.pq_gtitle,void 0!==f&&(f=e.pq_level,h=null,b&&(k=(k=b[l])?k.pq_close:
null,null!=k&&(h=e.pq_close=k)),null==h&&(h=e.pq_close),h?this.showHideRows(l+1,f,!0):c&&(e.pq_hidden=!0));delete this.pdata}};c._groupChange=function(a){var c=l.trim,b=this.pq_gc_();return function(e,f,k){if(k.groupChange)return e=e[b+f],null!=e?e:"";e=c(e[f]);return a?e.toUpperCase():e}};c._groupData=function(){var a=this.that,c=pq.aggregate,b=a.pdata,e=a.options,f=e.groupModel,k=f.merge,h=f.grandSummary,p=l.inArray,g=a.colModel,m=g.length,C=this._groupChange(f.ignoreCase),s=b.length,r=f.dataIndx,
t=r.length,w=f.collapsed||[],u=[],y={},z=a.columns,A=[],B,f=f.showSummary||[],v=[];if(b&&0<s){for(var x=t-1;0<=x;x--)f[x]=null!=f[x]?f[x]:!1,w[x]=null!=w[x]?w[x]:!1,v[x]=(v[x+1]?v[x+1]:0)+f[x],A[x]=z[r[x]];for(B=0;B<m;B++){var D=g[B],E=D.dataIndx,F=D.summary;F&&F.type&&-1==p(E,r)&&(u.push({column:D}),y[E]=Array(s-1))}B=u.length;p=[];g=[];m=[];z=[];for(x=0;x<t;x++)z[x]=null,m[x]="",g[x]=[];for(var H=0;H<=s;H++){for(var J=b[H],E=!1,N=null,x=0;x<t;x++){m[x]=H<s?C(J,r[x],A[x]):"";if(z[x]!=m[x]||H==s)E=
!0,null==N&&(N=x);if(E){var D=g[x],L=D[D.length-1];L&&(L.rip2=p.length+v[x]);D.push({rowIndx:H,title:m[x]})}}if(E){if(0<H)for(x=t-1;x>=N;x--){for(var L={},D=g[x],P=D.length-2?D[D.length-2].rip:x,O=D.length-2?D[D.length-2].rowIndx:0,K=D[D.length-1].rowIndx,M=0;M<B;M++){var D=u[M].column,F=D.summary,F=F.type,E=D.dataIndx,G="",G=y[E].slice(O,K),G=c[F](G,D);L[E]=G}if(f[x]){var D={pq_gsummary:!0,pq_level:x,pq_rowcls:"pq-summary-row"},I;for(I in L)D[I]=L[I];p.push(D)}D=p[P];for(I in L)D[I]=L[I];k&&(D.pq_rowcls=
"pq-summary-row");D.pq_items=K-O}if(H==s)break;for(x=0;x<t;x++)z[x]=m[x];for(x=N;x<t;x++)D={pq_gtitle:!0,pq_level:x,pq_close:w[x]},D[r[x]]=m[x],E=p.push(D),D=g[x],D[D.length-1].rip=E-1}if(H==s)break;J.pq_hidden=!1;p.push(J);for(x=0;x<B;x++)D=u[x].column,E=D.dataIndx,y[E][H]=J[E]}this.tree=g;a.pdata=p}else a.dataGM=null;if(h){L={pq_grandsummary:!0,pq_gsummary:!0};for(M=0;M<B;M++)D=u[M].column,F=D.summary,F=F.type,E=D.dataIndx,G=y[E],G=c[F](G,D),L[E]=G;this.summaryData=e.summaryData=[L]}else this.summaryData.length=
0};f=f.pqGrid.prototype;f.group=function(a){this.iGroupView[a.indx?"expandIndx":"expandAll"](a)};f.groupOption=function(a){var c=a.dataIndx,b=c?c.length:0,c=!1,e=this.iGroupView,f=this.options,k=f.groupModel,h=k.dataIndx,p=a.on||null==a.on&&k.on;p&&e.init();p&&(b||h.length)&&(c=!0);if(k.on&&h.length&&(!1===a.on||0===b))for(b=f.dataModel.data,f=0,h=b.length;f<h;f++)b[f].pq_hidden=!1;l.extend(k,a);e.setOption();if(!1!==a.refresh)this[c?"sort":"refreshView"]()}})(jQuery);
